  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (139.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "referral-api_test"[0m
  [1m[35m (319.4ms)[0m  [1m[35mCREATE DATABASE "referral-api_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.3ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (9.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "password_digest" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "referrer_id" bigint, "referral_points" integer DEFAULT 0, "credits" integer DEFAULT 0, "referral_code" character varying)[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_referral_code" ON "users"  ("referral_code")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_referrer_id" ON "users"  ("referrer_id")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20210207145521)[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20210131202438),
(20210207103024),
(20210207105104);

[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2021-02-07 16:00:11.349767"], ["updated_at", "2021-02-07 16:00:11.349767"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "referral_code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2021-02-07 18:04:19.938799"], ["updated_at", "2021-02-07 18:04:19.938799"], ["referral_code", "WQ1QYWfLz9Nf2qyodL5rhsSs"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "dummy value"], ["updated_at", "2021-02-07 18:04:19.941536"], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "dummy value"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "DUMMY VALUE"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "referral_code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2021-02-07 18:06:12.815390"], ["updated_at", "2021-02-07 18:06:12.815390"], ["referral_code", "3j9BJhktjJRPMYAyteswoxtu"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (1.1ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "dummy value"], ["updated_at", "2021-02-07 18:06:12.819221"], ["id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "dummy value"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "DUMMY VALUE"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "referral_code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2021-02-07 18:07:04.930714"], ["updated_at", "2021-02-07 18:07:04.930714"], ["referral_code", "y9cwbYnqFm7x9BsWftBf6YeF"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "dummy value"], ["updated_at", "2021-02-07 18:07:04.932731"], ["id", 3]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "dummy value"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "DUMMY VALUE"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "referral_code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2021-02-07 18:08:12.280418"], ["updated_at", "2021-02-07 18:08:12.280418"], ["referral_code", "qVFS8gVYiQBKAjhXQdwXDEgM"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "dummy value"], ["updated_at", "2021-02-07 18:08:12.286445"], ["id", 4]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "dummy value"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "DUMMY VALUE"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "referral_code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2021-02-07 18:09:43.965276"], ["updated_at", "2021-02-07 18:09:43.965276"], ["referral_code", "LBkHHwUxfejsqEATJJ2Wp9GW"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "dummy value"], ["updated_at", "2021-02-07 18:09:43.967289"], ["id", 5]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "dummy value"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "DUMMY VALUE"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "referral_code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2021-02-07 18:10:20.894890"], ["updated_at", "2021-02-07 18:10:20.894890"], ["referral_code", "xq5mKXf9XKqEnbnQDhrB1GAH"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "dummy value"], ["updated_at", "2021-02-07 18:10:20.897265"], ["id", 6]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "dummy value"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "DUMMY VALUE"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "referral_code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2021-02-07 18:17:11.839219"], ["updated_at", "2021-02-07 18:17:11.839219"], ["referral_code", "qP2itHWTXzHJadBKyAiLV1NM"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (1.6ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "dummy value"], ["updated_at", "2021-02-07 18:17:11.843078"], ["id", 7]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "dummy value"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "DUMMY VALUE"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "referral_code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2021-02-07 18:17:26.265381"], ["updated_at", "2021-02-07 18:17:26.265381"], ["referral_code", "FTC87De8D8xjdiS5QsBsF3HA"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.9ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "dummy value"], ["updated_at", "2021-02-07 18:17:26.268929"], ["id", 8]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "dummy value"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "DUMMY VALUE"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (2.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "referral_code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2021-02-07 18:28:15.508898"], ["updated_at", "2021-02-07 18:28:15.508898"], ["referral_code", "6vY61TtBxSn6VSreQJtrPFVw"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "dummy value"], ["updated_at", "2021-02-07 18:28:15.511150"], ["id", 9]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "dummy value"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "DUMMY VALUE"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "referral_code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2021-02-07 18:29:08.056840"], ["updated_at", "2021-02-07 18:29:08.056840"], ["referral_code", "JG8WcS7dTVBBnRTTUojKMn9F"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "dummy value"], ["updated_at", "2021-02-07 18:29:08.059068"], ["id", 10]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "dummy value"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "DUMMY VALUE"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "referral_code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2021-02-07 18:32:13.217091"], ["updated_at", "2021-02-07 18:32:13.217091"], ["referral_code", "3YXNRu32de9uUXwwGhjEk2sb"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "dummy value"], ["updated_at", "2021-02-07 18:32:13.219199"], ["id", 11]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "dummy value"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "DUMMY VALUE"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "referral_code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2021-02-07 18:33:52.709914"], ["updated_at", "2021-02-07 18:33:52.709914"], ["referral_code", "kWjmh2GYVk496dHudrkNd8xc"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "dummy value"], ["updated_at", "2021-02-07 18:33:52.715771"], ["id", 12]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "dummy value"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "DUMMY VALUE"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "referral_code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2021-02-07 18:34:36.276354"], ["updated_at", "2021-02-07 18:34:36.276354"], ["referral_code", "GXaVtUF6zM1wdp5JVmu99rJn"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "dummy value"], ["updated_at", "2021-02-07 18:34:36.278397"], ["id", 13]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "dummy value"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "DUMMY VALUE"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "referral_code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2021-02-07 18:35:41.188317"], ["updated_at", "2021-02-07 18:35:41.188317"], ["referral_code", "oVbbamfaP7kXy1cnh7KkTomn"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (1.1ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "dummy value"], ["updated_at", "2021-02-07 18:35:41.192998"], ["id", 14]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "dummy value"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "DUMMY VALUE"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "referral_code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2021-02-07 18:35:55.342560"], ["updated_at", "2021-02-07 18:35:55.342560"], ["referral_code", "Dt9WRYxxg6JBtqw5YHH3UGLp"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "dummy value"], ["updated_at", "2021-02-07 18:35:55.345739"], ["id", 15]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "dummy value"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "DUMMY VALUE"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$1j37rMksf1Rwmn2JoRY8bO4kmYiZMov/cOCxDWxzs1DF4jkcOvlm2"], ["created_at", "2021-02-07 18:36:45.461493"], ["updated_at", "2021-02-07 18:36:45.461493"], ["referral_code", "CikghKCSLwb6W3JU1StebZ7R"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "referral_code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2021-02-07 18:36:45.492827"], ["updated_at", "2021-02-07 18:36:45.492827"], ["referral_code", "VrtKbroieADnqQUMkMFHxhV8"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (1.3ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "dummy value"], ["updated_at", "2021-02-07 18:36:45.496145"], ["id", 17]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "dummy value"], ["LIMIT", 1]]
  [1m[36mUser Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "DUMMY VALUE"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (3.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (12.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$3JJ0pzLZnOPf/9p415ejtuia5uecaOuJ3nZ034D1VLgXKB7cxhlji"], ["created_at", "2021-02-08 18:32:33.511833"], ["updated_at", "2021-02-08 18:32:33.511833"], ["referral_code", "YhXL9VHL2cVB98hTQWUVy8eS"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 21:33:33 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email1@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 0.8ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$g1OeE1D1FKeMgCq918TtvOjLVYdjEmhUfPtvgQg8oExLzE8nK3pzy"], ["created_at", "2021-02-08 18:39:33.011507"], ["updated_at", "2021-02-08 18:39:33.011507"], ["referral_code", "GVnb5Em8pBmthn9Jz7mq1ZpR"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$RhjI8HY3P6QoRX716EJeJunUAvRGRr2JqxhpHPLZ1Gk0MbvPjoj/O"], ["created_at", "2021-02-08 18:40:07.094048"], ["updated_at", "2021-02-08 18:40:07.094048"], ["referral_code", "8y91SGvgZJmPernQvkhSGD3x"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 21:40:07 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email1@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 0.5ms)
Started GET "/users" for 127.0.0.1 at 2021-02-08 21:40:07 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.4ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$/PvPGy7RQ/q4vZPwRd/i7u9a1m.Hm/VqwqUbM4L.dqyy5rcz3T0Q."], ["created_at", "2021-02-08 18:40:22.244592"], ["updated_at", "2021-02-08 18:40:22.244592"], ["referral_code", "Hcyct91dbPd9wLuWFLZCJzHe"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 21:40:22 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email1@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 0.5ms)
Started GET "/users" for 127.0.0.1 at 2021-02-08 21:40:22 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.4ms | ActiveRecord: 0.3ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$77969rINwndNcaDyCH9fBujC.76jCyMvdQqc/bv0wROOJ03lD7IXS"], ["created_at", "2021-02-08 18:45:42.893555"], ["updated_at", "2021-02-08 18:45:42.893555"], ["referral_code", "M7dNjXKWSa6aNRipSbgCho3a"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 21:45:42 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email1@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.4ms)
Started GET "/users" for 127.0.0.1 at 2021-02-08 21:45:42 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.4ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$0AZJkUcXoDujtLyhTJwEGOT9kL/nMCYyQbpz.LR3lAgxpa8NvBUB6"], ["created_at", "2021-02-08 18:45:58.273960"], ["updated_at", "2021-02-08 18:45:58.273960"], ["referral_code", "pwGVNC1NypR5JWL29jEWmTGo"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 21:45:58 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email1@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.4ms)
Started GET "/users" for 127.0.0.1 at 2021-02-08 21:45:58 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.5ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$Io1eIf8fZmfEycr8RSFruOeARz0/Sn2tw2WIi70NjLmfBbLuctnQ."], ["created_at", "2021-02-08 18:46:25.711873"], ["updated_at", "2021-02-08 18:46:25.711873"], ["referral_code", "UgNnkyEYpm96Ut3yM2BGiEJC"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 21:46:25 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email1@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 0.5ms)
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 21:46:36 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email1@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.4ms)
Started GET "/users" for 127.0.0.1 at 2021-02-08 21:46:50 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.5ms | ActiveRecord: 0.4ms)
Started GET "/users" for 127.0.0.1 at 2021-02-08 21:46:52 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.4ms | ActiveRecord: 0.5ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/users" for 127.0.0.1 at 2021-02-08 21:47:10 +0300
Processing by UsersController#index as HTML
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$.J7vZXdMR9rhzCoRx5USbu5illFFQQVgcsaq8k.PE8IrrykFwHpEa"], ["created_at", "2021-02-08 18:47:10.663617"], ["updated_at", "2021-02-08 18:47:10.663617"], ["referral_code", "mYPTU7xmQTg24Q1RPXqUWdQ4"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 21:47:10 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email1@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 0.8ms)
Started GET "/users" for 127.0.0.1 at 2021-02-08 21:47:11 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.5ms | ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$GLeltntvPPItfRD0sDQG6.7bAoHlirTorghX7lvLh3.oWhTVw1km2"], ["created_at", "2021-02-08 18:49:36.195990"], ["updated_at", "2021-02-08 18:49:36.195990"], ["referral_code", "V1zSjc74ByQdbkbGX8h4AmFe"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 21:49:36 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email1@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.5ms)
Started GET "/users" for 127.0.0.1 at 2021-02-08 21:49:36 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.4ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/users" for 127.0.0.1 at 2021-02-08 21:49:36 +0300
Processing by UsersController#index as HTML
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$sa8d7Wb2AvNa5ZQz1O2evu2MgQTBT2.xMOXWmwU.KHThYd7hhxtCO"], ["created_at", "2021-02-08 18:49:45.962844"], ["updated_at", "2021-02-08 18:49:45.962844"], ["referral_code", "tLr41hXyhaJ86eLomnzTWmVM"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 21:49:45 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email1@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 0.5ms)
Started GET "/users" for 127.0.0.1 at 2021-02-08 21:49:45 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.4ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/users" for 127.0.0.1 at 2021-02-08 21:49:45 +0300
Processing by UsersController#index as HTML
Filter chain halted as :authenticate_request rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$KLOzrZLzgSaVZdp4nf68eulYpfBrp8AutsjBwu.syEVlYDKeGlOXe"], ["created_at", "2021-02-08 18:53:05.675214"], ["updated_at", "2021-02-08 18:53:05.675214"], ["referral_code", "9FMbiqZ2wg66c3eS2d7qGVZb"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 21:53:05 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email1@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 0.5ms)
Started GET "/users" for 127.0.0.1 at 2021-02-08 21:53:05 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.4ms | ActiveRecord: 0.3ms)
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$fGQRmbkGFHt7Sjrf20NwgOykFEV2c86uaoOyY9OKBDpwMA1logk7S"], ["created_at", "2021-02-08 19:00:07.367037"], ["updated_at", "2021-02-08 19:00:07.367037"], ["referral_code", "dwKT3XwgZ7Dm24o1atrfHyyM"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 22:00:07 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email2@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.7ms)
Started GET "/users" for 127.0.0.1 at 2021-02-08 22:00:07 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
Completed 200 OK in 1ms (Views: 0.4ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/users" for 127.0.0.1 at 2021-02-08 22:00:07 +0300
Processing by UsersController#index as HTML
Filter chain halted as :authenticate_request rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
Started GET "/users" for 127.0.0.1 at 2021-02-08 22:00:09 +0300
Processing by UsersController#index as HTML
Filter chain halted as :authenticate_request rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$tVbuMu1GkdpE5Zrt5Et0pes6r8CBlcmGBx5y7P0h.xLtI0B.Url0e"], ["created_at", "2021-02-08 19:00:09.890524"], ["updated_at", "2021-02-08 19:00:09.890524"], ["referral_code", "R5PBDczUbPWR7cQSwqnyxjLc"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 22:00:09 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email1@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 0.9ms)
Started GET "/users" for 127.0.0.1 at 2021-02-08 22:00:09 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$7h7XpzVGjioD/LCvNawWP.W/QkoSlRYayzJ2cLBMhEqDdSqwoAmRe"], ["created_at", "2021-02-08 19:00:09.915117"], ["updated_at", "2021-02-08 19:00:09.915117"], ["referral_code", "hMfhiHBUreuPrG35jVF4GiVi"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 22:00:09 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email2@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms)
Started GET "/users" for 127.0.0.1 at 2021-02-08 22:00:09 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
Completed 200 OK in 1ms (Views: 0.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$MB.QdG.y5b7RuJJc0aulV.FYafUzy/pz2S/J.R41L2zmtzY0mU5NC"], ["created_at", "2021-02-08 19:05:36.502575"], ["updated_at", "2021-02-08 19:05:36.502575"], ["referral_code", "CAsTEoHAJG5JTFCbrfUE2i5m"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 22:05:36 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email1@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 22:05:36 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$ouNTbOHw4CsYI0WLlNrJ.eK6ubZocfqClzMraieSKUkjpGAENEMbO"], ["created_at", "2021-02-08 19:06:11.058701"], ["updated_at", "2021-02-08 19:06:11.058701"], ["referral_code", "Z8WPrkGhzcFQRE6TZ7iqw2JC"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:06:11 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email1@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[35m (2.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 422 Unprocessable Entity in 13ms (ActiveRecord: 2.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:06:11 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$3jnwJK78Zhd3mMaRgvEKx.Bs/6c2f/5b5wt0oPEsueFSuOxG3P7VK"], ["created_at", "2021-02-08 19:06:11.090358"], ["updated_at", "2021-02-08 19:06:11.090358"], ["referral_code", "kZTwiMa2RR5T6wD1jsZhwFmd"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 34], ["LIMIT", 1]]
Completed 200 OK in 10ms (Views: 0.5ms | ActiveRecord: 1.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$B7hNP6QoFuSScAscVv0mHOQ7nScE5FrEA0r891VoD3vRdNRFmrQ6y"], ["created_at", "2021-02-08 19:10:55.505033"], ["updated_at", "2021-02-08 19:10:55.505033"], ["referral_code", "4vsiwbD4AoKRZcw4iubVhKPh"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:10:55 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email1@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:10:55 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
Completed 200 OK in 8ms (Views: 0.3ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$pBaG4t1VHvaBwKAKmDw58eZ91ifKJ3doMYCYwoktYlLTWRrPB6r5O"], ["created_at", "2021-02-08 19:11:50.299788"], ["updated_at", "2021-02-08 19:11:50.299788"], ["referral_code", "BQxW63CBhppQrCqx7m2BoWm1"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:11:50 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email1@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 5ms (Views: 0.2ms | ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:11:50 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
Completed 200 OK in 8ms (Views: 0.3ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$hi4jGLdQQn28rScNj56BtuoErMVct6LcJYDqxgHHax1R8np4Wu3RS"], ["created_at", "2021-02-08 19:12:35.602152"], ["updated_at", "2021-02-08 19:12:35.602152"], ["referral_code", "omwwmpPckt22VhoWaWvP9Pvd"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:12:35 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email1@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 5ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$CMxfHGrZfMKZkp8BUAWiJu/VCTMhp949NdNjrFQN6XwXnCEXfVOKK"], ["created_at", "2021-02-08 19:12:35.625975"], ["updated_at", "2021-02-08 19:12:35.625975"], ["referral_code", "2m87N7kcWLKtD2r1qg5N6kFi"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:12:35 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email2@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 3ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:12:35 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$XN1BbAmi37eapUDsXeELH.8Wq6Mpz2L0H3tUVFhzoh/jZuoWAhIU."], ["created_at", "2021-02-08 19:13:26.195550"], ["updated_at", "2021-02-08 19:13:26.195550"], ["referral_code", "KinnzJZsGtqk2iLwDbBiimhv"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:13:49 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email1@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 5ms (Views: 0.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$rYnl13zdai8U//E3KhnBluM5x5xqgihKOCD8DvgGlMXknog2KIAPy"], ["created_at", "2021-02-08 19:13:49.898402"], ["updated_at", "2021-02-08 19:13:49.898402"], ["referral_code", "m7S25g123My3A2sirtvYxSCw"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:13:49 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email2@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 3ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:13:49 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
Completed 200 OK in 7ms (Views: 0.4ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$HXTeBucg3N6MtXv76pJ.k.adOFVjW/0/iGoh4qRw8R1j4/xHWc.yy"], ["created_at", "2021-02-08 19:14:04.992957"], ["updated_at", "2021-02-08 19:14:04.992957"], ["referral_code", "fwDGd7Ddk6LQkyLpMkqKoB9x"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:14:04 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email1@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 5ms (Views: 0.2ms | ActiveRecord: 0.4ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$B7RbXEItPI/e0DdPSoCj0.ME2eqTaPw.87S4B5xujySaIDQ1rOQGe"], ["created_at", "2021-02-08 19:15:37.574726"], ["updated_at", "2021-02-08 19:15:37.574726"], ["referral_code", "hCj9v7VG2HSwsfSmTGke3m71"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:15:37 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email2@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 10ms (Views: 0.5ms | ActiveRecord: 1.2ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:15:37 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
Completed 200 OK in 17ms (Views: 0.3ms | ActiveRecord: 2.2ms)
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$paBtmfFKVn9d.vfwNMi6Fu5u9XWC9ri1x/1G6no5LQhMFIPzGqJTe"], ["created_at", "2021-02-08 19:15:39.593074"], ["updated_at", "2021-02-08 19:15:39.593074"], ["referral_code", "AseepP8ok8sx9JcsN1eyNKaL"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:15:39 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email1@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 5ms (Views: 0.2ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$r7lN9GebmCMjqZ0RH92csOdlkt1VlHeKm/qnqhIT586eNJMw5INNW"], ["created_at", "2021-02-08 19:15:39.613075"], ["updated_at", "2021-02-08 19:15:39.613075"], ["referral_code", "pF6HmePAYUW6GHenqEzUEjxR"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:15:39 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email2@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 4ms (Views: 0.1ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:15:39 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
Completed 200 OK in 7ms (Views: 0.3ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:16:20 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
Completed 200 OK in 10ms (Views: 0.3ms | ActiveRecord: 3.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$9flHsjKiCJiszJoi1tuNBe5/d2qEXmPbwxgwFdKoan/CN.HJKzN02"], ["created_at", "2021-02-08 19:16:20.301560"], ["updated_at", "2021-02-08 19:16:20.301560"], ["referral_code", "SoK5hV2RCw187AQCJ89TfYAz"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:16:20 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email1@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 5ms (Views: 0.1ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$KlA.SRO38fD3ghkBVM3VoOOWagrrz.2i0xrpqNSRAXIb.AJHdBhLq"], ["created_at", "2021-02-08 19:16:20.314145"], ["updated_at", "2021-02-08 19:16:20.314145"], ["referral_code", "QXkM19WvqFPe7DMrgjXbAyPp"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:16:20 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email2@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 4ms (Views: 0.1ms | ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$4fjM86pScjfzpP/MOwvc1em9Jfq3dsR26stPZDrMQHELlO0kqOthK"], ["created_at", "2021-02-08 19:19:24.149444"], ["updated_at", "2021-02-08 19:19:24.149444"], ["referral_code", "ERaoPyKieXt9euFRc3MCkX75"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:19:24 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email1@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 8ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$g.5Sy8/EmyFMUwcI8bBQZOw/462HhA44bDrM7D/VHstSa4xMMqsKi"], ["created_at", "2021-02-08 19:19:24.174502"], ["updated_at", "2021-02-08 19:19:24.174502"], ["referral_code", "oDs6LiJ3Nu7SrdCmT55YzgKs"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:19:24 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email2@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 8ms (Views: 0.2ms | ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:19:24 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$YYmUTOEylY3i9uxv4g3Sy.FtCB3QiPT2CFW1a8gWdpx1jM9oFJVSq"], ["created_at", "2021-02-08 19:19:24.195760"], ["updated_at", "2021-02-08 19:19:24.195760"], ["referral_code", "arjHUpfvbn96BRZTaLnHgZF2"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 49], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 49], ["LIMIT", 1]]
Completed 200 OK in 17ms (Views: 0.7ms | ActiveRecord: 2.8ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:19:33 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$sxq4hoJvas9UbRtfVPYTnug30oy0D5nRIpiEjuBjo08jAE6m4Lm4m"], ["created_at", "2021-02-08 19:19:33.666155"], ["updated_at", "2021-02-08 19:19:33.666155"], ["referral_code", "3FBNa8XhmpmdF1QRxWMLLBFb"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 50], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 50], ["LIMIT", 1]]
Completed 200 OK in 13ms (Views: 0.4ms | ActiveRecord: 3.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$rjuuQXF.uNGnoihyuiOGde7RqPNceMtnSEIkK0in/QyKOClEjZVVK"], ["created_at", "2021-02-08 19:19:33.682839"], ["updated_at", "2021-02-08 19:19:33.682839"], ["referral_code", "Mk4xPnCL76zrieneDESfYEjV"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:19:33 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email1@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 7ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$3Jv.a2iB.jXe9o4liSmfW.IyO8IG8VNTn2HEnxPGg6QkdeDYRkyVq"], ["created_at", "2021-02-08 19:19:33.697575"], ["updated_at", "2021-02-08 19:19:33.697575"], ["referral_code", "Ztg4C6jFdw7hAU2mcoSZQT2E"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:19:33 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email2@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 10ms (Views: 0.2ms | ActiveRecord: 1.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:24:32 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$mhh4NvLWfV45ZcIEy7.6wOywjH1451XwplkG95GrWJheH3SGmaAxm"], ["created_at", "2021-02-08 19:24:32.928477"], ["updated_at", "2021-02-08 19:24:32.928477"], ["referral_code", "Vk3ccsGGiT6kHvz4g7oBugob"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 53], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 53], ["LIMIT", 1]]
Completed 200 OK in 19ms (Views: 0.7ms | ActiveRecord: 5.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$ZpiNkKCH9/wxDfvuwc0DXOT7woLLTcjsDJ4iMeVUUazATD5TVlAX2"], ["created_at", "2021-02-08 19:24:32.945483"], ["updated_at", "2021-02-08 19:24:32.945483"], ["referral_code", "4X26SveS1MJhMR7CgdFnTrbL"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:24:32 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email1@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 6ms (Views: 0.1ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$nV/D5Q.pAx7dw6wn3Va5veIxjaCzVj4OGczrppJyyDipJYdI8pGE6"], ["created_at", "2021-02-08 19:24:32.959926"], ["updated_at", "2021-02-08 19:24:32.959926"], ["referral_code", "G9YYU2voAYkgUc7LSZt2P7a4"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:24:32 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email2@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 6ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:30:24 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$fXqU2Rb9pMqja7D7B9UnVeLP7UzQ2hFMg25qurixUh9ewjpptRsFy"], ["created_at", "2021-02-08 19:30:24.129888"], ["updated_at", "2021-02-08 19:30:24.129888"], ["referral_code", "iFn5onVSzMrYoBbpWgQ6gSud"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 56], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 56], ["LIMIT", 1]]
Completed 200 OK in 13ms (Views: 0.4ms | ActiveRecord: 4.1ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:30:24 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$nlf/zclqj1pM/5Ou7g/Bk.Bhj3h4Wjpt5IB.q3bUbom7nKza2Ia3y"], ["created_at", "2021-02-08 19:30:24.146197"], ["updated_at", "2021-02-08 19:30:24.146197"], ["referral_code", "VgNNgA3JHVwMkjiBVtkiQLCt"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 57], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 57], ["LIMIT", 1]]
Completed 200 OK in 7ms (Views: 0.3ms | ActiveRecord: 1.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$kuKrIt7VpcTO9l6lOBxKq.PWw1t9jHyQHc7sNcZhm2UxiCGG.NNqa"], ["created_at", "2021-02-08 19:30:24.154164"], ["updated_at", "2021-02-08 19:30:24.154164"], ["referral_code", "RZZhMFH5TuFwS9bsQyPmMk51"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:30:24 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$KcDImiWWcxJOXSecaZPxQeWXAJYCwDlgAngMkS2gBLOYU1Zh6/KZ2"], ["created_at", "2021-02-08 19:30:24.163660"], ["updated_at", "2021-02-08 19:30:24.163660"], ["referral_code", "DQz88ii4hrrsde894hVPQLwf"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 59], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 59], ["LIMIT", 1]]
Completed 200 OK in 13ms (Views: 0.9ms | ActiveRecord: 3.3ms)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$YxIR6.DZiiqk5emQGnno7eRlb2cIowAD2BmMbdgK.0g.21kAMBw0i"], ["created_at", "2021-02-08 19:30:24.222109"], ["updated_at", "2021-02-08 19:30:24.222109"], ["referral_code", "no3JV4Q4ZJZzUUe6vF6ztCP5"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:30:24 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email2@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 8ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email3@gmail.com"], ["password_digest", "$2a$04$zqr6RCkkTFWGZkH1v7uk6OlP5iMehCU1jWd8JdqoRct0xjoPEdRBu"], ["created_at", "2021-02-08 19:30:24.238155"], ["updated_at", "2021-02-08 19:30:24.238155"], ["referral_code", "hSZToB4i3riAi5WwLsHCiPbD"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:30:24 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email3@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 8ms (Views: 0.1ms | ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$IkdY/FG7l5aZ7Llw2nLRL.mNtkCwvL1/3TXcsppbNVGEfgoYDr1Iq"], ["created_at", "2021-02-08 19:31:28.694111"], ["updated_at", "2021-02-08 19:31:28.694111"], ["referral_code", "qnhZe7YUSeMdMGvE2WLapMjb"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:31:28 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email1@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 7ms (Views: 0.2ms | ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$1OUkwAQuKZULfDJQbpZKt.Adpdr/B0kZ2N48pNLFAH90p95R5hIVK"], ["created_at", "2021-02-08 19:31:28.716815"], ["updated_at", "2021-02-08 19:31:28.716815"], ["referral_code", "qWabDTHqynauuUKNqARw7dKf"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:31:28 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email2@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 6ms (Views: 0.1ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:31:28 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$FFRLTZ9FhoweUXdJd4DYd.WSBQdbjwtP5QUOYbSxgq/q0bQWqjNLS"], ["created_at", "2021-02-08 19:31:28.732856"], ["updated_at", "2021-02-08 19:31:28.732856"], ["referral_code", "hczshGDztp6bwUWZVipzW8Tc"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 64], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 64], ["LIMIT", 1]]
Completed 200 OK in 17ms (Views: 0.8ms | ActiveRecord: 3.1ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:31:28 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$bOE3tu.tCKGR2FZVdp2iHOFXrESsbyMIFldGQeGh.zA12AiMfhob6"], ["created_at", "2021-02-08 19:31:28.756982"], ["updated_at", "2021-02-08 19:31:28.756982"], ["referral_code", "mAgNixWrnUBq4kgHPMG2wgHp"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 65], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 65], ["LIMIT", 1]]
Completed 200 OK in 7ms (Views: 0.4ms | ActiveRecord: 1.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email3@gmail.com"], ["password_digest", "$2a$04$g0QRh25IY/TzYHnXQGjFWOQH6hVSeF0Usy/nsLFTbfIA7z.39IPwC"], ["created_at", "2021-02-08 19:31:28.767568"], ["updated_at", "2021-02-08 19:31:28.767568"], ["referral_code", "rFUL6FRkCMLns6AGqWJnDG9r"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:31:28 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$FTxu8AMJIhrm9q7A0qvesuqu4oAzUVdxtynyTbv1056T9fzyzFgTK"], ["created_at", "2021-02-08 19:31:28.788836"], ["updated_at", "2021-02-08 19:31:28.788836"], ["referral_code", "xVegSUH2XJUGEiEiN4rG1kMS"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 67], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 67], ["LIMIT", 1]]
Completed 200 OK in 8ms (Views: 0.3ms | ActiveRecord: 1.9ms)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:31:44 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$XRQPmsKR5NaKAINauxhdz.CuJNQMD7TQnbW8hDUbEo7HnhTrRjZc."], ["created_at", "2021-02-08 19:31:47.334761"], ["updated_at", "2021-02-08 19:31:47.334761"], ["referral_code", "2PfNuXbE9LJPEgrhBjwzSKXE"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 68], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 68], ["LIMIT", 1]]
Completed 200 OK in 8164ms (Views: 0.5ms | ActiveRecord: 4.7ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:31:52 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$zXziyl8MzO6XvHouRP0eWeNcIdsvRe8F1kNt38753qditSKcbt4H6"], ["created_at", "2021-02-08 19:32:13.069243"], ["updated_at", "2021-02-08 19:32:13.069243"], ["referral_code", "NhD4CcG7yD2NN9zefgjbExmG"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 69], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 69], ["LIMIT", 1]]
Completed 200 OK in 20233ms (Views: 0.3ms | ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$fFSbnU8huX6aBHNRKzlak.sZOq//qsKHOI/..KItcb9axzchGfXaO"], ["created_at", "2021-02-08 19:32:13.077079"], ["updated_at", "2021-02-08 19:32:13.077079"], ["referral_code", "tXFJ6KW7Ta9CmTBY3b1PZMWd"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:32:13 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$eV.H5QGh44pWqEH7wAa90.3t3746eb9pQ4DMbWS0xbBUQtkaxcgju"], ["created_at", "2021-02-08 19:32:15.367047"], ["updated_at", "2021-02-08 19:32:15.367047"], ["referral_code", "JdM5fsRGKtwsgREo6D8KhKPj"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 71], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 71], ["LIMIT", 1]]
Completed 200 OK in 2286ms (Views: 0.3ms | ActiveRecord: 1.9ms)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$AgMNqEn/VM3T0AVxIA8YAukPSlS.2KZj6FgUqTewwEAm2tbl7aihG"], ["created_at", "2021-02-08 19:32:54.390097"], ["updated_at", "2021-02-08 19:32:54.390097"], ["referral_code", "Xw3ZJxacuNo84V9sCVRD3Zbt"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:32:54 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email2@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 770ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email3@gmail.com"], ["password_digest", "$2a$04$vNDYYC5pefI2N/PxOyhXcObNUMkZHlPGtQM.l7z7YTdWfHb8NxQ3C"], ["created_at", "2021-02-08 19:32:55.166526"], ["updated_at", "2021-02-08 19:32:55.166526"], ["referral_code", "JVgiGk8xoAcxeXGXm8vL85aF"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:32:55 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email3@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 633ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:34:12 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$R9BGcu.4omme.Bc1HwY/MehIIn2fM7TqAud5.TUi688VCwHIFkSkS"], ["created_at", "2021-02-08 19:34:13.761138"], ["updated_at", "2021-02-08 19:34:13.761138"], ["referral_code", "UPj1J27EtePNNByv6m37Lpqo"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 74], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 74], ["LIMIT", 1]]
Completed 200 OK in 1234ms (Views: 0.4ms | ActiveRecord: 4.5ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:34:13 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$zWMbJVKeit8TyULDSi3pqe7IG1axLv3VK9JsVdv.hJvFRh9pms51K"], ["created_at", "2021-02-08 19:34:14.237155"], ["updated_at", "2021-02-08 19:34:14.237155"], ["referral_code", "CoYnzD3QD6QhKXDsxP3h4XVg"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 75], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 75], ["LIMIT", 1]]
Completed 200 OK in 467ms (Views: 0.3ms | ActiveRecord: 1.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$942Y/MvcmT3yc9v1IsJnQ.UbPFc4Mje75SNpXgNOb2x4Hh1jYo202"], ["created_at", "2021-02-08 19:34:14.246352"], ["updated_at", "2021-02-08 19:34:14.246352"], ["referral_code", "uYHRUNy6My9zLz9Dmpd6kiFg"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:34:14 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]", "referred_by"=>"uYHRUNy6My9zLz9Dmpd6kiFg"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$9/x7MiUrPVv7CDpWuuLkau1JLzKe89FKHv.8IZGugWYe.r0mTH0aa"], ["created_at", "2021-02-08 19:34:14.601448"], ["updated_at", "2021-02-08 19:34:14.601448"], ["referral_code", "j7bScTtfadgrRaHxAXNAxdUN"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 77], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "uYHRUNy6My9zLz9Dmpd6kiFg"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 77], ["LIMIT", 1]]
  [1m[36mUser Update (1.6ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 19:34:14.606090"], ["referrer_id", 76], ["id", 77]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 77], ["LIMIT", 1]]
  [1m[36mUser Update All (1.1ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 77]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 76]]
Completed 200 OK in 363ms (Views: 0.3ms | ActiveRecord: 5.4ms)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$Gb8Za1L9xMx5yH/xXN6hae32NDgccdnvF22fiuUEfhVK2clg5kABG"], ["created_at", "2021-02-08 19:34:14.627486"], ["updated_at", "2021-02-08 19:34:14.627486"], ["referral_code", "DLfL3WpLEorUBLUgA2hMLwk7"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:34:14 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email2@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 723ms (Views: 0.2ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email3@gmail.com"], ["password_digest", "$2a$04$avTdJ4BgLasTMr.QcCtpLunuTv2Ie4.WLPmDgrjIES7cddDkk819y"], ["created_at", "2021-02-08 19:34:15.358675"], ["updated_at", "2021-02-08 19:34:15.358675"], ["referral_code", "hU1Cg2rbsh6shFnVz8HCd4QD"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:34:15 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email3@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 751ms (Views: 0.2ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$t8XjE1fcmMR/EgR/dMh0/eHYlRG7qm4X/lynmEbrF.DCjGVCr2pRa"], ["created_at", "2021-02-08 19:34:34.784294"], ["updated_at", "2021-02-08 19:34:34.784294"], ["referral_code", "FhTpfKEk4CkEWikBQdoQf2iJ"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:34:34 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]", "referred_by"=>"FhTpfKEk4CkEWikBQdoQf2iJ"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$dWpuP3Emvga01l5ahfJ9sOOYnTEqBqyYlJb1XirutacWB6AQY6y8G"], ["created_at", "2021-02-08 19:34:38.392237"], ["updated_at", "2021-02-08 19:34:38.392237"], ["referral_code", "tkseDsmF8UuwWH7twMkRXcGx"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 81], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "FhTpfKEk4CkEWikBQdoQf2iJ"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 81], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 19:34:38.400211"], ["referrer_id", 80], ["id", 81]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 81], ["LIMIT", 1]]
  [1m[36mUser Update All (0.6ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 81]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 80]]
Completed 200 OK in 15303ms (Views: 0.4ms | ActiveRecord: 4.4ms)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$vY0pR8aR/vYZexGqIIKmNudcuu3uaTt6tZPLA3EvkTjYOv5sop7Gm"], ["created_at", "2021-02-08 19:38:22.741559"], ["updated_at", "2021-02-08 19:38:22.741559"], ["referral_code", "D4ZZiJ3GCA1ZeX4whf6EMSpp"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:38:22 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]", "referred_by"=>"D4ZZiJ3GCA1ZeX4whf6EMSpp"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$MnUPVQpiaBGVtPF6RwuvUerqvh5Maw6bpXlCPUeddCx5cIF1Ke2lS"], ["created_at", "2021-02-08 19:38:24.229927"], ["updated_at", "2021-02-08 19:38:24.229927"], ["referral_code", "pY4rX9mVjHjTL49QSGGFdwAE"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 83], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "D4ZZiJ3GCA1ZeX4whf6EMSpp"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 83], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 19:38:24.237448"], ["referrer_id", 82], ["id", 83]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 83], ["LIMIT", 1]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 83]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 82]]
Completed 200 OK in 1488ms (Views: 0.4ms | ActiveRecord: 3.7ms)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$CSxw3fF9kUerLn09pPojVue4.aRRisAYyfrVW3y7dmnEtiLPcDaL6"], ["created_at", "2021-02-08 19:38:54.885168"], ["updated_at", "2021-02-08 19:38:54.885168"], ["referral_code", "4fA2t9YmYcpSUa3HEhirryfh"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:38:54 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]", "referred_by"=>"4fA2t9YmYcpSUa3HEhirryfh"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$Md/h.yADpiuLdqqwzqB6iO1yrOdEqfPq.G.pQ.ODIuZEZs32duiJC"], ["created_at", "2021-02-08 19:38:56.351319"], ["updated_at", "2021-02-08 19:38:56.351319"], ["referral_code", "ieV8AQFcppCmdSCmLQ8Ti1eH"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 85], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "4fA2t9YmYcpSUa3HEhirryfh"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 85], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 19:38:56.359313"], ["referrer_id", 84], ["id", 85]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 85], ["LIMIT", 1]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 85]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 84]]
Completed 200 OK in 1467ms (Views: 0.4ms | ActiveRecord: 3.9ms)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$rB3nQcwJCF0Pxk9C2rEwVOYyt.dTWwSfPO5.xTq1LuPlV/.J0C9tK"], ["created_at", "2021-02-08 19:39:06.959208"], ["updated_at", "2021-02-08 19:39:06.959208"], ["referral_code", "8jcKBw6Rbr8SzAMM82ohpGNm"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:39:06 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]", "referred_by"=>"8jcKBw6Rbr8SzAMM82ohpGNm"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$iC9sF4nEJfoTNOMDdSe18.0wYA/pL.jtIsjOU15YPuJN/c3/zVwNy"], ["created_at", "2021-02-08 19:39:22.147916"], ["updated_at", "2021-02-08 19:39:22.147916"], ["referral_code", "BYhBz1MqN94uHd6XUhyBvRtH"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 87], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "8jcKBw6Rbr8SzAMM82ohpGNm"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 87], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 19:39:22.154818"], ["referrer_id", 86], ["id", 87]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 87], ["LIMIT", 1]]
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 87]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 86]]
Completed 200 OK in 15189ms (Views: 0.4ms | ActiveRecord: 5.2ms)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$AVp0cWFcTeY5oA0UXTCIfe.GUtwheSL90dvKZIARIQ9lm9lL1ke6y"], ["created_at", "2021-02-08 19:40:03.585505"], ["updated_at", "2021-02-08 19:40:03.585505"], ["referral_code", "gVyDTVRr9tPNmQipFCj47aoa"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:40:03 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]", "referred_by"=>"gVyDTVRr9tPNmQipFCj47aoa"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$KK88D2aho/ubPOiRgppgCuscyk9oOaaw60/7TKEGJj8uxE91Z2x92"], ["created_at", "2021-02-08 19:40:05.179021"], ["updated_at", "2021-02-08 19:40:05.179021"], ["referral_code", "e5KubioF1MsrV6MCY8Zby2ti"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 89], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "gVyDTVRr9tPNmQipFCj47aoa"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 89], ["LIMIT", 1]]
  [1m[36mUser Update (1.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 19:40:05.187051"], ["referrer_id", 88], ["id", 89]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 89], ["LIMIT", 1]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 89]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 88]]
Completed 200 OK in 1597ms (Views: 0.4ms | ActiveRecord: 4.5ms)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$zhMu4lxUYILggb4weVSubuMYchAb8lJ2haXpGgPWNehWzsktedr/."], ["created_at", "2021-02-08 19:40:08.927080"], ["updated_at", "2021-02-08 19:40:08.927080"], ["referral_code", "mLQynHyQcxQXL6y2VqxLqtpt"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:40:08 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]", "referred_by"=>"mLQynHyQcxQXL6y2VqxLqtpt"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$FHHxqbYVYF98t7/3nbMqmeoVEVax9r44W8Id9tW3aTdVdpLrYKQ0C"], ["created_at", "2021-02-08 19:40:11.995530"], ["updated_at", "2021-02-08 19:40:11.995530"], ["referral_code", "iU2knhTJmq2Gtbxrkt1Ppwst"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 91], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "mLQynHyQcxQXL6y2VqxLqtpt"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 91], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 19:40:12.004227"], ["referrer_id", 90], ["id", 91]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Update All (0.8ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 91]]
  [1m[36mUser Update All (0.6ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 90]]
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 91], ["LIMIT", 1]]
  [1m[36mUser Update All (0.6ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 91]]
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 90]]
Completed 200 OK in 5665ms (Views: 0.5ms | ActiveRecord: 6.2ms)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$b02wiqRq/o6mfmqB.3IpVev3YJG0uXJvfk.YligEbtG9JlxcQWDI2"], ["created_at", "2021-02-08 19:41:32.269578"], ["updated_at", "2021-02-08 19:41:32.269578"], ["referral_code", "DuSQZF3TTkqcwGC2QyXkiyTJ"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:41:32 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]", "referred_by"=>"DuSQZF3TTkqcwGC2QyXkiyTJ"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$W5NM9BpdUxspo9000zWDLu0JZoIB30vfKvuXTawmBham8fFs4HBlO"], ["created_at", "2021-02-08 19:41:33.435788"], ["updated_at", "2021-02-08 19:41:33.435788"], ["referral_code", "ugnydQ3Nug2GyD3tmsaxKxFa"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 93], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "DuSQZF3TTkqcwGC2QyXkiyTJ"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 93], ["LIMIT", 1]]
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 19:41:33.443311"], ["referrer_id", 92], ["id", 93]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 93], ["LIMIT", 1]]
Completed 500 Internal Server Error in 1164ms (ActiveRecord: 3.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$OeJyDnDdjnj.5KSvAe.p4.gy5QtWc6Np0cApSCC6Xhyv6TxR7jxLi"], ["created_at", "2021-02-08 19:42:05.493275"], ["updated_at", "2021-02-08 19:42:05.493275"], ["referral_code", "hYZemYDUVwwPf3wBUrTTxRik"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:42:05 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]", "referred_by"=>"hYZemYDUVwwPf3wBUrTTxRik"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$P6WRLjehZTfB7yNvq6sYAeIJy7irqj6YvBoBE6sz4lVEzrXsFr6Im"], ["created_at", "2021-02-08 19:42:06.968093"], ["updated_at", "2021-02-08 19:42:06.968093"], ["referral_code", "R4K5CiGhFWwQqAnW1x1gTQVs"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 95], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "hYZemYDUVwwPf3wBUrTTxRik"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 95], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 19:42:06.976082"], ["referrer_id", 94], ["id", 95]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 95], ["LIMIT", 1]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 95]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 94]]
Completed 200 OK in 1477ms (Views: 0.5ms | ActiveRecord: 3.9ms)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$.egNZaL9G.DfFGGCgWSBdua0GYZaCwq66rFMV3Sp6mwgmawesnSqq"], ["created_at", "2021-02-08 19:42:33.881671"], ["updated_at", "2021-02-08 19:42:33.881671"], ["referral_code", "hyLWVYEY9QVtCJkJUWUHYsua"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:42:33 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]", "referred_by"=>"hyLWVYEY9QVtCJkJUWUHYsua"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$k3bLmlJWURhsmTeY8FBnnuiScmIxD2OBpkyEVy9/RrFipgIMdEiVi"], ["created_at", "2021-02-08 19:42:35.475842"], ["updated_at", "2021-02-08 19:42:35.475842"], ["referral_code", "hz4qXsKxRuVg1MVFa7tmpcPB"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 97], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "hyLWVYEY9QVtCJkJUWUHYsua"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 97], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 19:42:35.483123"], ["referrer_id", 96], ["id", 97]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 97], ["LIMIT", 1]]
Completed 500 Internal Server Error in 1590ms (ActiveRecord: 3.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$jo2JD9joJCeA9D0tMA27Fun6U8O5wZiRFFKBZe.L3VJBeO39BnQDi"], ["created_at", "2021-02-08 19:42:47.979305"], ["updated_at", "2021-02-08 19:42:47.979305"], ["referral_code", "iwAGFsdnmhFb3Ltma751gcu6"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:42:47 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]", "referred_by"=>"iwAGFsdnmhFb3Ltma751gcu6"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$SijFFLRvUM2GTdKSMslonu8GCqy5o30CajEvI89Oy1.i0kFf8fH.K"], ["created_at", "2021-02-08 19:42:49.124856"], ["updated_at", "2021-02-08 19:42:49.124856"], ["referral_code", "QCxfcGXP4y4tZ8Hcf5FSsiLj"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 99], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "iwAGFsdnmhFb3Ltma751gcu6"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 99], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 19:42:49.132501"], ["referrer_id", 98], ["id", 99]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 99], ["LIMIT", 1]]
Completed 200 OK in 1139ms (Views: 0.3ms | ActiveRecord: 3.2ms)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$fgydjGZIAKVR1q9EWzFG0O33i6PI2O8dX93SpbyQMAhJ.lXwrgUse"], ["created_at", "2021-02-08 19:43:49.233339"], ["updated_at", "2021-02-08 19:43:49.233339"], ["referral_code", "Qpqp9qDk3h2cvJzgJpLTJM1J"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:43:49 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]", "referred_by"=>"Qpqp9qDk3h2cvJzgJpLTJM1J"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$IPFt.yMoQxa4bp68Yh7pY.rYA7eoRexDPPN1TRrqpB4Bw0z8N1Sge"], ["created_at", "2021-02-08 19:43:49.853779"], ["updated_at", "2021-02-08 19:43:49.853779"], ["referral_code", "d4qjwGiaTnB8qYfYn9JYZEyv"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 101], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "Qpqp9qDk3h2cvJzgJpLTJM1J"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 101], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 19:43:49.861862"], ["referrer_id", 100], ["id", 101]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 101], ["LIMIT", 1]]
Completed 200 OK in 613ms (Views: 0.3ms | ActiveRecord: 3.1ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$CaecenXSoZzM6r/Bzx1cOO.xYD3uoguMoywwNRPjZ4pUKeMScT17O"], ["created_at", "2021-02-08 19:45:08.738841"], ["updated_at", "2021-02-08 19:45:08.738841"], ["referral_code", "oVc5vVLtnZFGmq7rX4aDZmHd"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$e8eJTV4Y2XRTnrV2tRr9QeNKgH04Mj8pPz5VXekY44.HJXgJWCa4i"], ["created_at", "2021-02-08 19:45:21.775040"], ["updated_at", "2021-02-08 19:45:21.775040"], ["referral_code", "PxWVycwEVnh7kaSyTtiPZKQG"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:45:21 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]", "referred_by"=>"PxWVycwEVnh7kaSyTtiPZKQG"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$OElntcsj9.5jomZtM3REU.h1qLjuGPC7Euy5xMQris8QFnvxMblyu"], ["created_at", "2021-02-08 19:45:21.795263"], ["updated_at", "2021-02-08 19:45:21.795263"], ["referral_code", "n8nASr5Pz2gjmXb3bMgyzWn1"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 104], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "PxWVycwEVnh7kaSyTtiPZKQG"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 104], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 19:45:21.802994"], ["referrer_id", 103], ["id", 104]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 104], ["LIMIT", 1]]
Completed 200 OK in 13ms (Views: 0.3ms | ActiveRecord: 3.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$UFzED.3xt50JZX52ynVz/eq/U8Dqk.owOFGQNc4k8rnxe1JHlugM."], ["created_at", "2021-02-08 19:46:41.463503"], ["updated_at", "2021-02-08 19:46:41.463503"], ["referral_code", "1ygwYU14uCMTk4QVveLt5apR"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:46:41 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email1@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 7ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$wMhUo6yThvNCooQG8hdnG.iF8bSAd2uy7t2A96XEsRydiQWFa3wQK"], ["created_at", "2021-02-08 19:46:41.484680"], ["updated_at", "2021-02-08 19:46:41.484680"], ["referral_code", "jyjLLgTR6bSTH8mSPg6nYEgR"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:46:41 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email2@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 6ms (Views: 0.2ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email3@gmail.com"], ["password_digest", "$2a$04$TLzhM9RC./bh9sjKB0p9i.wtveFiBm9jq3HK8keU.NgXiWbThRBIq"], ["created_at", "2021-02-08 19:46:41.497632"], ["updated_at", "2021-02-08 19:46:41.497632"], ["referral_code", "zENiQTtZ9LpESPFMn7CTxuMx"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email4@gmail.com"], ["password_digest", "$2a$04$RVZC/ctNufYvFEar9PFAO.spusHSkl0.2s7ia6s.NpQ92woaQpVvW"], ["created_at", "2021-02-08 19:46:41.501395"], ["updated_at", "2021-02-08 19:46:41.501395"], ["referral_code", "hyXcnszv7y58UcH6u7DZVCHb"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:46:41 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email3@gmail.com", "password"=>"[FILTERED]", "referred_by"=>"hyXcnszv7y58UcH6u7DZVCHb"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 10ms (Views: 0.2ms | ActiveRecord: 2.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:46:41 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$WypI8oGFBhUSKUxUOxoyD.AAt9C5YLBaYc9NfQvW/EXu1jZmrwLmS"], ["created_at", "2021-02-08 19:46:41.530079"], ["updated_at", "2021-02-08 19:46:41.530079"], ["referral_code", "4fgGJZQUbrHnJNDvJFYxTPXP"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 109], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 109], ["LIMIT", 1]]
Completed 200 OK in 12ms (Views: 0.4ms | ActiveRecord: 2.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:46:41 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$r4WQyWIlV.wpyV86dNi0Ae5yR.2qXvqPxkEW2L.LqqjTQ7uX/d61S"], ["created_at", "2021-02-08 19:46:41.549427"], ["updated_at", "2021-02-08 19:46:41.549427"], ["referral_code", "Qx6cCWWuPvdf9NzG2uUmTd1i"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 110], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 110], ["LIMIT", 1]]
Completed 200 OK in 11ms (Views: 0.3ms | ActiveRecord: 2.7ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email5@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email5@gmail.com"], ["password_digest", "$2a$04$jv/QHgB2kuzHMsyZn1JdxexqRaOlvzz0P.D3OKuMso1ebRbcDigkO"], ["created_at", "2021-02-08 19:46:41.561878"], ["updated_at", "2021-02-08 19:46:41.561878"], ["referral_code", "PX9FTPNc62rgGRuFEs8yXNYM"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 22:46:41 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]", "referred_by"=>"PX9FTPNc62rgGRuFEs8yXNYM"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$ruIlaDS5qQADZ6oHfbmElekt/J.TWY1MLj8B0cN.fu6jdMLOREIHO"], ["created_at", "2021-02-08 19:46:41.569170"], ["updated_at", "2021-02-08 19:46:41.569170"], ["referral_code", "eWt5JyZ1ewbTBkGCL5FR4NjA"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 112], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "PX9FTPNc62rgGRuFEs8yXNYM"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 112], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 19:46:41.575046"], ["referrer_id", 111], ["id", 112]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 112], ["LIMIT", 1]]
Completed 200 OK in 12ms (Views: 0.4ms | ActiveRecord: 2.9ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$Vx035YFrkaMGVgnfrvTqzO/KqNQiOWHYm7URqPmgIJNTTmED6Wix6"], ["created_at", "2021-02-08 19:50:58.623658"], ["updated_at", "2021-02-08 19:50:58.623658"], ["referral_code", "uiqivDhN6zKUJtryXjtVkJDH"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 22:50:58 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email1@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$zIomKIvlpZPFVjxcbsor5u2J16QUjN1nat1lAYzKxO8LLKQH9u4kG"], ["created_at", "2021-02-08 19:50:58.646290"], ["updated_at", "2021-02-08 19:50:58.646290"], ["referral_code", "Y1qC8V5GV8UJ5kDPeFjzZzem"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 22:50:58 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email2@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 22:50:58 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$.N60kI/6teGehEmCCoNbxesWUasV4Bcj3J7ojzcsK/8zKMZWcV7Aq"], ["created_at", "2021-02-08 19:52:01.111451"], ["updated_at", "2021-02-08 19:52:01.111451"], ["referral_code", "7HVjLzd1UTPmD96fBCcpjmfy"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 22:52:01 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email1@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$Wg7nOjq5fb8LditGg1boGOvAKSx3PfhAMbrMImfapbaGZTzzJ7VGu"], ["created_at", "2021-02-08 19:52:01.130576"], ["updated_at", "2021-02-08 19:52:01.130576"], ["referral_code", "tHhe4HU7H8CaBQZV9Cyxmcut"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 22:52:01 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email2@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 22:52:01 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$Ob9m2HjQt7xWBtwaDakIUuqUgV64UFYtw.CPnZO17qQgEJ8gxIyRa"], ["created_at", "2021-02-08 19:52:30.209988"], ["updated_at", "2021-02-08 19:52:30.209988"], ["referral_code", "kUYnvmXGkKq5RhDeys8WZLpU"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 22:52:30 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email1@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 7ms (Views: 0.3ms | ActiveRecord: 0.7ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$cgF5X70h7E0Dh/9rUjgbnO/zijLC5oTPSVdLuDD99j7W86zjMnl4q"], ["created_at", "2021-02-08 19:53:21.403903"], ["updated_at", "2021-02-08 19:53:21.403903"], ["referral_code", "baCTki7XfUdv9BaVXV25mg38"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 22:53:21 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email2@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 22:53:21 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$gTTNJQu671F2eWExnX9vi.e1mtOSSJvJIX9f1K11zgpubF407PEIO"], ["created_at", "2021-02-08 19:53:24.177104"], ["updated_at", "2021-02-08 19:53:24.177104"], ["referral_code", "sxUJtfUausxgEmiJCjAXttTb"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 22:53:24 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email1@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$cL/rsO7mq8Kl6bW06dvqpuhRyZol7foMv/KZ.x/glkBujhT2wXxiC"], ["created_at", "2021-02-08 19:53:24.196637"], ["updated_at", "2021-02-08 19:53:24.196637"], ["referral_code", "gSfEmkEQygGpZmeRWSkQ5s9w"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 22:53:24 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email2@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 22:53:24 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$1dvlBPxfZnj7kPMSlfKQtO.S1Y6lP2a0kyHTCFGIQwaahS/ieh7s6"], ["created_at", "2021-02-08 19:55:37.085941"], ["updated_at", "2021-02-08 19:55:37.085941"], ["referral_code", "koSbKYc5HxhGavCVbQnYvTEN"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 22:55:37 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email1@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$a4/5XTjhGau4/gyUi86y.OvGF8ezww9EVksub9WUzva2cHM5QkRAG"], ["created_at", "2021-02-08 19:55:37.111049"], ["updated_at", "2021-02-08 19:55:37.111049"], ["referral_code", "vXxp6mo7KfeWE6b568yqf6nJ"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 22:55:37 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email2@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 22:55:37 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$rCQb4fFttoQvKtrkHNWa6uDT3fpITGSkAuLgXo643aHgj1lmlznWi"], ["created_at", "2021-02-08 19:59:22.647108"], ["updated_at", "2021-02-08 19:59:22.647108"], ["referral_code", "eEY1q9BQhWcuxXmDvSuUViRD"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 22:59:22 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email1@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$3a/r5WpUtAJXO7K0w7WwwuOD4xzu/90lLDiPqnjgVoiR/AtfQ0hmm"], ["created_at", "2021-02-08 19:59:22.670670"], ["updated_at", "2021-02-08 19:59:22.670670"], ["referral_code", "AtXDY5PhBxpj3BTqhgasfjXk"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 22:59:22 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email2@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 22:59:22 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
Started GET "/users" for 127.0.0.1 at 2021-02-08 23:02:18 +0300
Processing by UsersController#index as HTML
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$fL/fUL4D1tB0TsgPUGVZVesOqjBZoxgv1LDTojPFDrhqldD7zm2ly"], ["created_at", "2021-02-08 20:02:18.686154"], ["updated_at", "2021-02-08 20:02:18.686154"], ["referral_code", "7AcvwcaDAdugP68zqLcpxtbM"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 23:02:18 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email1@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.5ms)
Started GET "/users" for 127.0.0.1 at 2021-02-08 23:02:18 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 125], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.7ms | ActiveRecord: 0.7ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$vfrF0h63pHTof/8CbKGe6OAadyEQl9gQBK9bx0mS7vgmYEKdAiUEi"], ["created_at", "2021-02-08 20:02:18.711787"], ["updated_at", "2021-02-08 20:02:18.711787"], ["referral_code", "dfF7ofFgBY8H1wgUWiszyr8c"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 23:02:18 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email2@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.3ms)
Started GET "/users" for 127.0.0.1 at 2021-02-08 23:02:18 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 126], ["LIMIT", 1]]
Completed 200 OK in 1ms (Views: 0.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 23:02:18 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email3@gmail.com"], ["password_digest", "$2a$04$ekdL5R3vT2c5DRYTISllUOSn62dC4gvMIFHybnb9dKAb1TEg6i90u"], ["created_at", "2021-02-08 20:02:18.728643"], ["updated_at", "2021-02-08 20:02:18.728643"], ["referral_code", "7jAErkYWgFJkU65okTh2wyhR"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 23:02:18 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email3@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 5ms (Views: 0.5ms | ActiveRecord: 0.7ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email4@gmail.com"], ["password_digest", "$2a$04$ByJyz/z.7qxzw66rmZ4SwOIYJJvW44a5Ypo3pxQZ8qQ1BI4MuhWqm"], ["created_at", "2021-02-08 20:02:18.745207"], ["updated_at", "2021-02-08 20:02:18.745207"], ["referral_code", "g7sekR1EcKp36HYjcWDTwH5k"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 23:02:18 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email4@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 23:02:18 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$sKiTlEPP.CTw.b6MNDvLGuClwUVnYtdSzZmUZ7KHBBUbigNUen7Wi"], ["created_at", "2021-02-08 20:02:18.763185"], ["updated_at", "2021-02-08 20:02:18.763185"], ["referral_code", "a5LrxMkzNB7eVwHsCjNGPGny"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 129], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 129], ["LIMIT", 1]]
Completed 200 OK in 17ms (Views: 0.6ms | ActiveRecord: 2.9ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 23:02:18 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$6wGmJWb71l5qCmx9BJqTiumkce1oM6svSoVrEO5WxWv.5I2YcL9J."], ["created_at", "2021-02-08 20:02:18.788684"], ["updated_at", "2021-02-08 20:02:18.788684"], ["referral_code", "neMkutmeqwPHCai6TNadMdUr"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 130], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 130], ["LIMIT", 1]]
Completed 200 OK in 11ms (Views: 0.6ms | ActiveRecord: 2.3ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email5@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email5@gmail.com"], ["password_digest", "$2a$04$nm/y/8jRPCMDy8A0EmE4..K5iHWWtBMwJtnanCdhw55PB43pUvap6"], ["created_at", "2021-02-08 20:02:18.803228"], ["updated_at", "2021-02-08 20:02:18.803228"], ["referral_code", "LKqxx4MciNqm4ieo4pFSfPuZ"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 23:02:18 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]", "referred_by"=>"LKqxx4MciNqm4ieo4pFSfPuZ"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$2NpfHxQgP52Kvt8KNW6RH.OVxoip5WQURv/Dk.px4oRl66jgcXte."], ["created_at", "2021-02-08 20:02:18.821436"], ["updated_at", "2021-02-08 20:02:18.821436"], ["referral_code", "8arz5Ajrcn9pM2x9d8MqgqEi"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 132], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "LKqxx4MciNqm4ieo4pFSfPuZ"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 132], ["LIMIT", 1]]
  [1m[36mUser Update (0.9ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:02:18.827398"], ["referrer_id", 131], ["id", 132]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 132], ["LIMIT", 1]]
Completed 200 OK in 16ms (Views: 0.6ms | ActiveRecord: 3.9ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email6@gmail.com"], ["password_digest", "$2a$04$Lx3HkeGw5DPYIgHH9kimo.wMnlOHb8tJSco9XtSFx.RaVam1yOmca"], ["created_at", "2021-02-08 20:02:18.842999"], ["updated_at", "2021-02-08 20:02:18.842999"], ["referral_code", "rJy39wvFHByY9tGC4NMJBW8L"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 23:02:18 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email6@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 8ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email7@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email7@gmail.com"], ["password_digest", "$2a$04$8lo64tNkmuKbRR3fZ3UnyeLk/naLyw8PstmzJJFgUEmsePQzy9mv2"], ["created_at", "2021-02-08 20:02:18.865085"], ["updated_at", "2021-02-08 20:02:18.865085"], ["referral_code", "6sKAKnnth6e8r4sY3EacDenT"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 23:02:18 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email7@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email7@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email7@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email7@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 11ms (Views: 0.2ms | ActiveRecord: 2.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email8@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email8@gmail.com"], ["password_digest", "$2a$04$zJMjRTl7OJAmbaSDE1Wyt.Txhnyeu17RmnN78rf9oxWAJq0ieio52"], ["created_at", "2021-02-08 20:02:18.886538"], ["updated_at", "2021-02-08 20:02:18.886538"], ["referral_code", "CohxZuTaA4K9oFADC6aERE67"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email9@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email9@gmail.com"], ["password_digest", "$2a$04$Td8EhRjybNfXbSUU0uPr.u.P0PfJtb3Ztid8f8iER.YdArA4ssxkq"], ["created_at", "2021-02-08 20:02:18.891129"], ["updated_at", "2021-02-08 20:02:18.891129"], ["referral_code", "Lq7eUKFzzkdzxqTe47irjXd5"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 23:02:18 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email8@gmail.com", "password"=>"[FILTERED]", "referred_by"=>"Lq7eUKFzzkdzxqTe47irjXd5"}
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email8@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email8@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email8@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 14ms (Views: 0.4ms | ActiveRecord: 2.8ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "referral_code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2021-02-08 20:02:18.935854"], ["updated_at", "2021-02-08 20:02:18.935854"], ["referral_code", "bYSPMxN4t7Sjwne6JJu6cmtT"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (1.3ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "dummy value"], ["updated_at", "2021-02-08 20:02:18.941188"], ["id", 137]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "dummy value"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "DUMMY VALUE"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$3SHmBjwQWP9BeEa1QXr4Mu0KdW7NkxZizsqSYKO.JqEga2PVx5E1i"], ["created_at", "2021-02-08 20:04:11.825472"], ["updated_at", "2021-02-08 20:04:11.825472"], ["referral_code", "dRjmJrYZzSeSCwbJdk62jppN"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 23:04:11 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email1@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 0.5ms)
Started GET "/users" for 127.0.0.1 at 2021-02-08 23:04:11 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 138], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$c5eXAj4cmHSoUXDj1nA58u7Bk7OvU3MNAyxbHAPprg1Z9yuWofwzK"], ["created_at", "2021-02-08 20:04:11.850324"], ["updated_at", "2021-02-08 20:04:11.850324"], ["referral_code", "QA6PkJmrTpVt9ewjQUmrAzcM"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 23:04:11 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email2@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.3ms)
Started GET "/users" for 127.0.0.1 at 2021-02-08 23:04:11 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 139], ["LIMIT", 1]]
Completed 200 OK in 1ms (Views: 0.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/users" for 127.0.0.1 at 2021-02-08 23:04:11 +0300
Processing by UsersController#index as HTML
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 23:04:11 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$0wYZWhaqbSyLoY4Jl8ULJ.U5YuJf/QKTOg1b.Mf.ACCOWtcTKxjOO"], ["created_at", "2021-02-08 20:04:11.870128"], ["updated_at", "2021-02-08 20:04:11.870128"], ["referral_code", "jfMJp6PLGWouGfiJvNAfv6K9"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 140], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 140], ["LIMIT", 1]]
Completed 200 OK in 12ms (Views: 0.7ms | ActiveRecord: 1.6ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 23:04:11 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$MkB8dZs8YuQbNb00krPWbOkZNtwY/wAzJcH2bzCZJGZ5rTh5CuGby"], ["created_at", "2021-02-08 20:04:11.890670"], ["updated_at", "2021-02-08 20:04:11.890670"], ["referral_code", "ujCYEJ2KzvoSuJoLktgAVj36"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 141], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 141], ["LIMIT", 1]]
Completed 200 OK in 9ms (Views: 0.3ms | ActiveRecord: 2.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email3@gmail.com"], ["password_digest", "$2a$04$7.8y94Clb0pgUYiV2N/seuNkIAN0bjQsOXaSRELiPLTUdpbhF0SlS"], ["created_at", "2021-02-08 20:04:11.899384"], ["updated_at", "2021-02-08 20:04:11.899384"], ["referral_code", "3hyybFp3AnSpzfLvcDfx33Hz"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 23:04:11 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]", "referred_by"=>"3hyybFp3AnSpzfLvcDfx33Hz"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$d6UiiFiYsO.IXd5SApobuOwDbOr3Wl1Rkw51I0nGkmsVHLz/4/i1W"], ["created_at", "2021-02-08 20:04:11.916679"], ["updated_at", "2021-02-08 20:04:11.916679"], ["referral_code", "Jd3UAzWGpw3pVfQiZz1qrzJp"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 143], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "3hyybFp3AnSpzfLvcDfx33Hz"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 143], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:04:11.924893"], ["referrer_id", 142], ["id", 143]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 143], ["LIMIT", 1]]
Completed 200 OK in 15ms (Views: 0.3ms | ActiveRecord: 4.4ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email4@gmail.com"], ["password_digest", "$2a$04$vXMCMzcRRh1XEyAREAQdz.XJ7hw4uZ63Rk.5jXRRgKHF81h.YBhRS"], ["created_at", "2021-02-08 20:04:11.932324"], ["updated_at", "2021-02-08 20:04:11.932324"], ["referral_code", "ZF5QDFT49AQGbCbeYNymEdBX"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 23:04:11 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email4@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 10ms (Views: 0.6ms | ActiveRecord: 1.4ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email5@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email5@gmail.com"], ["password_digest", "$2a$04$mBUGCj2PpTQ6Ngm6HWrJQumZmQkUYciOK1XtYHrLN0IE/CPMqxHTy"], ["created_at", "2021-02-08 20:04:11.951733"], ["updated_at", "2021-02-08 20:04:11.951733"], ["referral_code", "oLpxQJZ1A42dU52m5vMpjvuG"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 23:04:11 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email5@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email5@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email5@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email5@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 6ms (Views: 0.1ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email6@gmail.com"], ["password_digest", "$2a$04$rcYZkY7Ezicaf5CLePBKFekeinfR.QA0zuv4d73tJgsLHbGnpAB2u"], ["created_at", "2021-02-08 20:04:11.968740"], ["updated_at", "2021-02-08 20:04:11.968740"], ["referral_code", "2qXoNBMrGNF5oFf3Mt19UHhF"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email7@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email7@gmail.com"], ["password_digest", "$2a$04$ws6EiKSN3vAstLstiV8fk.CzCc2jLETNRs4NDcDKPlDuT3xCI3Hsu"], ["created_at", "2021-02-08 20:04:11.973211"], ["updated_at", "2021-02-08 20:04:11.973211"], ["referral_code", "c74L3qmWT5aFtc9Jpw99FopA"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 23:04:11 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email6@gmail.com", "password"=>"[FILTERED]", "referred_by"=>"c74L3qmWT5aFtc9Jpw99FopA"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 11ms (Views: 0.1ms | ActiveRecord: 2.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "referral_code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2021-02-08 20:04:12.039439"], ["updated_at", "2021-02-08 20:04:12.039439"], ["referral_code", "bVwDJ3Fenu5UNJVQyuxAdQZr"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (1.2ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "dummy value"], ["updated_at", "2021-02-08 20:04:12.042398"], ["id", 148]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "dummy value"], ["LIMIT", 1]]
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "DUMMY VALUE"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 23:04:12 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 23:04:12 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email8@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email8@gmail.com"], ["password_digest", "$2a$04$cXzFC6v5Et7Wlfm5Ag1mzOS.ge3Dg.4dDFw7cc8YmrhCKtuKvExt."], ["created_at", "2021-02-08 20:04:12.080376"], ["updated_at", "2021-02-08 20:04:12.080376"], ["referral_code", "KtxRpEuQviWQt3bgjXE1Sa5y"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 23:04:12 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email8@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email8@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email9@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email9@gmail.com"], ["password_digest", "$2a$04$UHzaTwDuRTppeZ9SXajRiuiy9PzieggzjL.1EGPOqKclh6y7Vh.3S"], ["created_at", "2021-02-08 20:04:12.095538"], ["updated_at", "2021-02-08 20:04:12.095538"], ["referral_code", "ACxB1dxdD7QvrCm3dBxn4RtL"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 23:04:12 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email9@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email9@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$X.axHHc0Jn/PCRb7Woh0L..gTSLSe2VMo/Z4Md5fBvVYHdvV1LHm6"], ["created_at", "2021-02-08 20:04:26.973277"], ["updated_at", "2021-02-08 20:04:26.973277"], ["referral_code", "D79bnMv7y6q7ncoC1hVGwLCg"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 23:04:26 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email1@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 7ms (Views: 0.2ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$/7o1b1fKFqqqJ4Dh.fvaoOg9sVm18sjoICUPj7pr.JU4UBmC/AmJi"], ["created_at", "2021-02-08 20:04:26.995082"], ["updated_at", "2021-02-08 20:04:26.995082"], ["referral_code", "aFJypxosn2BfuqgTjc6KCgUs"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 23:04:26 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email2@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 6ms (Views: 0.1ms | ActiveRecord: 1.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email3@gmail.com"], ["password_digest", "$2a$04$mPuuamGGzjhMP819YbLuUeM0gcKTfqmogQhHHkUb4T5Gx3l1Lq4Zm"], ["created_at", "2021-02-08 20:04:27.007995"], ["updated_at", "2021-02-08 20:04:27.007995"], ["referral_code", "4RT9LuAboaVjikEjMoNpK4WG"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email4@gmail.com"], ["password_digest", "$2a$04$q/ulYqkQqiBgV1Nokz.VROs8MbU/Zb.lQHuX98txWAo0IVlvqw6De"], ["created_at", "2021-02-08 20:04:27.014936"], ["updated_at", "2021-02-08 20:04:27.014936"], ["referral_code", "EiHDbac9UeE2nh8e1MPBGwRz"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 23:04:27 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email3@gmail.com", "password"=>"[FILTERED]", "referred_by"=>"EiHDbac9UeE2nh8e1MPBGwRz"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 7ms (Views: 0.2ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 23:04:27 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$pQgr3WmWs8WPgbw.zh3Y0eSOhXK3SYByyoLH8Ft49c82W9MxbDhQe"], ["created_at", "2021-02-08 20:04:27.055788"], ["updated_at", "2021-02-08 20:04:27.055788"], ["referral_code", "4b1j2xi7zV2N6sUiApTxCuCq"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 155], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 155], ["LIMIT", 1]]
Completed 200 OK in 23ms (Views: 0.4ms | ActiveRecord: 5.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 23:04:27 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$MoLfZ0Bk/aHrIJTHoZc4WuX43LEk61uIfG/KVezKUeh98AOMuiA/S"], ["created_at", "2021-02-08 20:04:27.081699"], ["updated_at", "2021-02-08 20:04:27.081699"], ["referral_code", "15dkuz6jqFa4cB5piBWjuh3d"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 156], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 156], ["LIMIT", 1]]
Completed 200 OK in 16ms (Views: 0.6ms | ActiveRecord: 4.5ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email5@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email5@gmail.com"], ["password_digest", "$2a$04$CWdqFGpvqnmOl/wWQWsNgeX5lfwQ3.aTv4f1RPtIN82Nt.lnKwa5S"], ["created_at", "2021-02-08 20:04:27.099368"], ["updated_at", "2021-02-08 20:04:27.099368"], ["referral_code", "jxD2h5mVnVBXvmadQbscjkWn"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 23:04:27 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]", "referred_by"=>"jxD2h5mVnVBXvmadQbscjkWn"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$22hb/H/j2f1BjP.I3C.PreA4/gQKm/OD2ywB9o2r8G9EvcngoENma"], ["created_at", "2021-02-08 20:04:27.106261"], ["updated_at", "2021-02-08 20:04:27.106261"], ["referral_code", "m19vxwHJmZbyU6h3NP9Xt1uZ"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 158], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "jxD2h5mVnVBXvmadQbscjkWn"], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 158], ["LIMIT", 1]]
  [1m[36mUser Update (1.1ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:04:27.115882"], ["referrer_id", 157], ["id", 158]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 158], ["LIMIT", 1]]
Completed 200 OK in 19ms (Views: 0.8ms | ActiveRecord: 4.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
Started GET "/users" for 127.0.0.1 at 2021-02-08 23:04:27 +0300
Processing by UsersController#index as HTML
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 3ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email6@gmail.com"], ["password_digest", "$2a$04$oGWqNKm3GTICUrdKLRPy2e3SBoU.XTiqB9cyV00VNgqhGz3rVsm1W"], ["created_at", "2021-02-08 20:04:27.136517"], ["updated_at", "2021-02-08 20:04:27.136517"], ["referral_code", "YAd3WvZfr3LJCHdGZft28ipD"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 23:04:27 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email6@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.3ms)
Started GET "/users" for 127.0.0.1 at 2021-02-08 23:04:27 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 159], ["LIMIT", 1]]
Completed 200 OK in 6ms (Views: 1.2ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email7@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email7@gmail.com"], ["password_digest", "$2a$04$p5En6byo8H2iC9nZCYxbcuIzoIV5syvRnQ2xtSVKoauVMXytB1vnC"], ["created_at", "2021-02-08 20:04:27.165124"], ["updated_at", "2021-02-08 20:04:27.165124"], ["referral_code", "uz94okR2crFtrPvWP6AVNNfX"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 23:04:27 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email7@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email7@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.3ms)
Started GET "/users" for 127.0.0.1 at 2021-02-08 23:04:27 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 160], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.5ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email8@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email8@gmail.com"], ["password_digest", "$2a$04$UZfwYJx2SxzWr0TNTzdTQO9lWEoiCyRZWJWx.5pZEnl0YVoIzsZqK"], ["created_at", "2021-02-08 20:04:27.184310"], ["updated_at", "2021-02-08 20:04:27.184310"], ["referral_code", "2UqZq662oujxVGFPEf6QwuPX"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 23:04:27 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email8@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email8@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.6ms | ActiveRecord: 0.5ms)
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email9@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email9@gmail.com"], ["password_digest", "$2a$04$d58r/PWWqwv9kJNPTrVvxOz6J3cHiLDQiFNSTIr/Pc9HcoX3tspU."], ["created_at", "2021-02-08 20:04:27.200689"], ["updated_at", "2021-02-08 20:04:27.200689"], ["referral_code", "y8L72RooMRXFY2yxQ6sKBiqK"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 23:04:27 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email9@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email9@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 23:04:27 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.3ms | ActiveRecord: 0.8ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 23:04:27 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "referral_code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2021-02-08 20:04:27.262840"], ["updated_at", "2021-02-08 20:04:27.262840"], ["referral_code", "bpQgdYZHLxsQwSVsu7wUYba1"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "dummy value"], ["updated_at", "2021-02-08 20:04:27.264796"], ["id", 163]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "dummy value"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "DUMMY VALUE"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$Okq7NLfYC4Akz79lbGDNqeoJkK0r7/ecHJgvigCvdorN02tjHR/My"], ["created_at", "2021-02-08 20:12:38.675005"], ["updated_at", "2021-02-08 20:12:38.675005"], ["referral_code", "6fjDduXDzn32d8WgwHJydEZF"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$4/ttR5WibPNv1TrnCh7sSOAChTX35o7nK64G5Uky26l2kv2EwGP9m"], ["created_at", "2021-02-08 20:12:38.721210"], ["updated_at", "2021-02-08 20:12:38.721210"], ["referral_code", "ptbip7W2FjDMoQ9jjxKs8ohZ"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email3@gmail.com"], ["password_digest", "$2a$04$ue3Jeo/xJrI5XF07YC3iu.HLcLfpYsGRC3bUAH/Rf.9w9bfPb36A2"], ["created_at", "2021-02-08 20:12:38.727452"], ["updated_at", "2021-02-08 20:12:38.727452"], ["referral_code", "q6j9esCGqQtebjVFpUpxzQq6"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email4@gmail.com"], ["password_digest", "$2a$04$NvUWc1hKJexjX8AWHUYpmes97URjP8NrxNgciVDNVbAXSoQOs8t0y"], ["created_at", "2021-02-08 20:12:38.732514"], ["updated_at", "2021-02-08 20:12:38.732514"], ["referral_code", "qykdGzDAGYpmjeb6Fw64XnxZ"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$i3I9bEhdgyxq7GouFX9jXey/bfQD4HcMV35d00n95pfJ7dkm7x17O"], ["created_at", "2021-02-08 20:12:48.282291"], ["updated_at", "2021-02-08 20:12:48.282291"], ["referral_code", "j64PfXgB3tG61HErj1zJGFCb"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$rJc4yEpJR0Dh5Hj1oMLJbOdyQyKoSlFLFl4Nc4kkj7gIWatPht.Z2"], ["created_at", "2021-02-08 20:12:48.287197"], ["updated_at", "2021-02-08 20:12:48.287197"], ["referral_code", "q2RxDKtLzKzfbpiWJGAWaHJk"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email1@gmail.com"], ["id", 168], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:12:48.292403"], ["referrer_id", 169], ["id", 168]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email3@gmail.com"], ["password_digest", "$2a$04$GdBineTVhxeC2qJBfdicT.1y7/SR/JpovQl1HD0bWNxrvrX0lVT3."], ["created_at", "2021-02-08 20:12:48.337178"], ["updated_at", "2021-02-08 20:12:48.337178"], ["referral_code", "QzE5yUtbqrpTTPWpcyY3zmst"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email4@gmail.com"], ["password_digest", "$2a$04$JixQyB66UkRD5Rofi893jO1fEaKQJYfBg5MLQfOEuiNk4nmNIxP92"], ["created_at", "2021-02-08 20:12:48.340548"], ["updated_at", "2021-02-08 20:12:48.340548"], ["referral_code", "sfC9ATLbJa5PFYbmPqkEwDY6"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email3@gmail.com"], ["id", 170], ["LIMIT", 1]]
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:12:48.342992"], ["referrer_id", 171], ["id", 170]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email5@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email5@gmail.com"], ["password_digest", "$2a$04$Dx66gR6UBIZ/PRX0.sm0hu2UxXvmWfnKASLs9zaqypMHc2YRtH7u2"], ["created_at", "2021-02-08 20:12:57.435014"], ["updated_at", "2021-02-08 20:12:57.435014"], ["referral_code", "WsLSKxSRQZqShApiamrDeaNh"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email6@gmail.com"], ["password_digest", "$2a$04$hzgpeLwnSsyRzVZJpaHQ9OJonpGaAm7LynQJZxkCKQXL.nX1RZ83C"], ["created_at", "2021-02-08 20:12:57.438989"], ["updated_at", "2021-02-08 20:12:57.438989"], ["referral_code", "sKtgts5yW4qHRLqtpUuRc4AW"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email5@gmail.com"], ["id", 172], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:12:57.441125"], ["referrer_id", 173], ["id", 172]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email7@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email7@gmail.com"], ["password_digest", "$2a$04$brVlsHeuvewmpLDqjy1ZEu9l/SVGpT8TjbqetIxFCCAFYWsnXovzC"], ["created_at", "2021-02-08 20:12:57.445638"], ["updated_at", "2021-02-08 20:12:57.445638"], ["referral_code", "VwNNPNoUvJev2fgjPwMmBxKL"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email8@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email8@gmail.com"], ["password_digest", "$2a$04$lfS1jPq5GKET9rfzkClOUej6ZB4RGk15W22XNre1cV8YbdBeOMt9e"], ["created_at", "2021-02-08 20:12:57.449190"], ["updated_at", "2021-02-08 20:12:57.449190"], ["referral_code", "CnTomubC2MCGjh15qr5cZfS5"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email7@gmail.com"], ["id", 174], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:12:57.452642"], ["referrer_id", 175], ["id", 174]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$6abkafDz8oSEBRx2MF4iCugwWq2/B82gRpiYeoI7MigasSc/7StBC"], ["created_at", "2021-02-08 20:13:15.199637"], ["updated_at", "2021-02-08 20:13:15.199637"], ["referral_code", "Mx6mYgq2ejw8KcjWhzsddw36"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$QuvdbQulxh.oZfgj21SajOmZm5g9VI7PqN4jgfVlAIuPksIs1EfRW"], ["created_at", "2021-02-08 20:13:15.204319"], ["updated_at", "2021-02-08 20:13:15.204319"], ["referral_code", "i3fZ752Fn6PMvoM7ynhmrNUf"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email1@gmail.com"], ["id", 176], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:13:15.209214"], ["referrer_id", 177], ["id", 176]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email3@gmail.com"], ["password_digest", "$2a$04$JRvgjXdUs28UEdg8W4wi4u.M5SLPjb.gtyFhRxQuK05.4gtMbFQn."], ["created_at", "2021-02-08 20:13:15.253096"], ["updated_at", "2021-02-08 20:13:15.253096"], ["referral_code", "HNdcB1iREKUAJEJEMv1GTy5a"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email4@gmail.com"], ["password_digest", "$2a$04$JUkM/cbn5That611n8eKUOwO5rRJTGK45L3ZGGcOlkVpzVaY/V9x6"], ["created_at", "2021-02-08 20:13:15.256356"], ["updated_at", "2021-02-08 20:13:15.256356"], ["referral_code", "81mVfFBBLYFyvrEWWbypHk53"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email3@gmail.com"], ["id", 178], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:13:15.258488"], ["referrer_id", 179], ["id", 178]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email5@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email5@gmail.com"], ["password_digest", "$2a$04$UuZI1TeMoIy4VtEndzxIFOsrcq3Rj.bbwAZtl.fIUITHYNegNk2Gu"], ["created_at", "2021-02-08 20:13:23.521409"], ["updated_at", "2021-02-08 20:13:23.521409"], ["referral_code", "8Yi2ZjWU21bEGf7r3vzr6Vkb"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email6@gmail.com"], ["password_digest", "$2a$04$ubp7J0485j8vpO6HsBTh3.BGdrzv4SHGrk/5z1c22WkzgvYhPyWKC"], ["created_at", "2021-02-08 20:13:23.525161"], ["updated_at", "2021-02-08 20:13:23.525161"], ["referral_code", "ptfnHL3VMk4G4CV4dVjoAUHq"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email5@gmail.com"], ["id", 180], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:13:23.527551"], ["referrer_id", 181], ["id", 180]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email7@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email7@gmail.com"], ["password_digest", "$2a$04$qHw2EZwZIJzQJQAZ73wxeeEfwV3hn7VyooXIJfye.gIGOSY2vw14u"], ["created_at", "2021-02-08 20:13:23.531782"], ["updated_at", "2021-02-08 20:13:23.531782"], ["referral_code", "4N375rbjXNUTFNw5gtE9QZNQ"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email8@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email8@gmail.com"], ["password_digest", "$2a$04$7WEoQpD0GO5B3nYuAi2dNeryKynA4LdOqKiN3ewTQlPuI6jV8XVpW"], ["created_at", "2021-02-08 20:13:23.535351"], ["updated_at", "2021-02-08 20:13:23.535351"], ["referral_code", "S9nsg3LqamhVUPJPdUheMJTC"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email7@gmail.com"], ["id", 182], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:13:23.538460"], ["referrer_id", 183], ["id", 182]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$wVL/a./JNMou9EkC2TR5OO5cfQLc4qsh6.UWDa3JdrhFVbY8TeLsK"], ["created_at", "2021-02-08 20:15:40.020682"], ["updated_at", "2021-02-08 20:15:40.020682"], ["referral_code", "rm5i8qZxBqUmvdQajm3jFL3X"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$wEsa18wNF426gs88xQ4aBO4VJnhNO/.oXf332Z1CfJv.eP8bkSVzq"], ["created_at", "2021-02-08 20:15:40.025475"], ["updated_at", "2021-02-08 20:15:40.025475"], ["referral_code", "scWJtyEYBFLDku9HUifM3hh5"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email1@gmail.com"], ["id", 184], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:15:40.030818"], ["referrer_id", 185], ["id", 184]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email3@gmail.com"], ["password_digest", "$2a$04$P1OJK5tkvz47R3bsyycXfu2plKI0CHeLfV.cWgMhI734UrzetzYgW"], ["created_at", "2021-02-08 20:15:40.074905"], ["updated_at", "2021-02-08 20:15:40.074905"], ["referral_code", "gQ3BATS6PLfBb7NuKa5XP1ws"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email4@gmail.com"], ["password_digest", "$2a$04$rCoZM91ZLy2w6ykPr0N5jeUd7nafHCrsf6OtMLY5rkjRJOPnLmiWi"], ["created_at", "2021-02-08 20:15:40.078350"], ["updated_at", "2021-02-08 20:15:40.078350"], ["referral_code", "QGnMx8LvySNgeNoi9uVQVsjj"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email3@gmail.com"], ["id", 186], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:15:40.080357"], ["referrer_id", 187], ["id", 186]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 186], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 187], ["LIMIT", 1]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 186]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 187]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 186], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email5@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email5@gmail.com"], ["password_digest", "$2a$04$ltY4aqmjSuuCukuxGFgn..ZM5eFfRwBWVvR57PPgJie2Mv2YO.DhO"], ["created_at", "2021-02-08 20:15:40.098150"], ["updated_at", "2021-02-08 20:15:40.098150"], ["referral_code", "CK6TDP3cBKRCqqVFANZky89f"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email6@gmail.com"], ["password_digest", "$2a$04$gqLPxsENMPXrAt5lfcA35.vfw05TMwX2YW2gLAe.3LzeLTzjUiI3."], ["created_at", "2021-02-08 20:15:40.102631"], ["updated_at", "2021-02-08 20:15:40.102631"], ["referral_code", "13A16YJoHQ6V8vLFJjmyobPh"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email5@gmail.com"], ["id", 188], ["LIMIT", 1]]
  [1m[36mUser Update (1.1ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:15:40.104662"], ["referrer_id", 189], ["id", 188]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email7@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email7@gmail.com"], ["password_digest", "$2a$04$w/N5RfL1mU1j74hHs/sh.OgC2chvzURo1BNKDkZyRKF4nY96oaVE6"], ["created_at", "2021-02-08 20:15:40.115535"], ["updated_at", "2021-02-08 20:15:40.115535"], ["referral_code", "pJ664C2DGJw8sgsRSHFUtCDP"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email8@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email8@gmail.com"], ["password_digest", "$2a$04$IzLa7pLqRJduJcIFSprCHeoDC/Y/VJEBfOQ0g5PKQt/h9BsuiSP7u"], ["created_at", "2021-02-08 20:15:40.122193"], ["updated_at", "2021-02-08 20:15:40.122193"], ["referral_code", "DVf54V4fknYLJVskRaa9y1r4"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email7@gmail.com"], ["id", 190], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:15:40.124613"], ["referrer_id", 191], ["id", 190]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$CCHKFpN4xKstl8uucCRJw.Qzh98TOzF5KXYA8WrcT8h5kB9otz.tK"], ["created_at", "2021-02-08 20:16:38.268431"], ["updated_at", "2021-02-08 20:16:38.268431"], ["referral_code", "TDix9xnTGfTDBsKJF68kHUtE"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$8ht6ip6Ul00JmukfadlbbuYsrZFRoOE15p2WZZeyziBe/3nd/ULrO"], ["created_at", "2021-02-08 20:16:38.273088"], ["updated_at", "2021-02-08 20:16:38.273088"], ["referral_code", "fVk9H4nyYXYrRdAW5XwZsELR"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email1@gmail.com"], ["id", 192], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:16:38.278493"], ["referrer_id", 193], ["id", 192]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email3@gmail.com"], ["password_digest", "$2a$04$JTOVeLu7wmBLaVokHuBgMuXYVhlKXKymYyiclT6Xo7lLd01axAHeG"], ["created_at", "2021-02-08 20:16:38.324068"], ["updated_at", "2021-02-08 20:16:38.324068"], ["referral_code", "zFxRXbtZBCM1BmMGVZQ7zk7e"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email4@gmail.com"], ["password_digest", "$2a$04$QEr0aLv84ZMpHLa0MQhP3.X1pTkFjJAie8wOLqkzSskszvYaWtjFq"], ["created_at", "2021-02-08 20:16:38.327411"], ["updated_at", "2021-02-08 20:16:38.327411"], ["referral_code", "8yAuspFN7TEvae8V1sNh4wZN"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email3@gmail.com"], ["id", 194], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:16:38.329577"], ["referrer_id", 195], ["id", 194]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 194], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 195], ["LIMIT", 1]]
  [1m[36mUser Update All (0.6ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 194]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 195]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 194], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email5@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email5@gmail.com"], ["password_digest", "$2a$04$iEqf2zsP4jD5nAj9SKTZBuO3eMKOowdhEHexzJgk3EUM/OgAvdwym"], ["created_at", "2021-02-08 20:16:38.342301"], ["updated_at", "2021-02-08 20:16:38.342301"], ["referral_code", "7jKGaqhbfx8jiLnzbzdVmU6N"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email6@gmail.com"], ["password_digest", "$2a$04$0.8P8um3itSaPvfmJkRHnO1q8m083x3.gHPLn2P1RQt0USP/FJ18C"], ["created_at", "2021-02-08 20:16:38.345899"], ["updated_at", "2021-02-08 20:16:38.345899"], ["referral_code", "FBYZB9ZCdBWdnaVdNgZkk89s"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email5@gmail.com"], ["id", 196], ["LIMIT", 1]]
  [1m[36mUser Update (1.1ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:16:38.351467"], ["referrer_id", 197], ["id", 196]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email7@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email7@gmail.com"], ["password_digest", "$2a$04$Uu458riFL8dvBREopDVaKefhB8KfeVVIvMcG5VDRgTc53J6iUHRli"], ["created_at", "2021-02-08 20:16:38.361115"], ["updated_at", "2021-02-08 20:16:38.361115"], ["referral_code", "EB1LjbWQAPaC3Cp9e3j9TGca"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email8@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email8@gmail.com"], ["password_digest", "$2a$04$PQpvH0rBR.y23yJccv0LN.zMQv860gKcK1K3VaNbr2qFPpsaVDdz6"], ["created_at", "2021-02-08 20:16:38.367183"], ["updated_at", "2021-02-08 20:16:38.367183"], ["referral_code", "xiYMH4wvEBtYwFdLYx2CV7J8"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email7@gmail.com"], ["id", 198], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:16:38.369735"], ["referrer_id", 199], ["id", 198]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$gCzVsN/jKuNgU3Cfkiwz.eJHDNDZEKdzM/v2rqntBAW7GLCWXN3ju"], ["created_at", "2021-02-08 20:16:58.677693"], ["updated_at", "2021-02-08 20:16:58.677693"], ["referral_code", "C5d5RmRPqCfFTV92KTGL2z8Q"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$lbOJ64Arr7WvGdE24xUJjO2TPWFwg5uiexTmRYdiyFhFtdkjs88ty"], ["created_at", "2021-02-08 20:16:58.682416"], ["updated_at", "2021-02-08 20:16:58.682416"], ["referral_code", "7FA6BEcNLBbQQPjMBsB3eQUE"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email1@gmail.com"], ["id", 200], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:16:58.687696"], ["referrer_id", 201], ["id", 200]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 200], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 201], ["LIMIT", 1]]
  [1m[36mUser Update All (0.8ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 200]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 201]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 200], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email3@gmail.com"], ["password_digest", "$2a$04$szOzg99lM0w1QlMAEXghs.i9AYGFXuZkg6vfGU4POhEWOcW0KIHBO"], ["created_at", "2021-02-08 20:16:58.748532"], ["updated_at", "2021-02-08 20:16:58.748532"], ["referral_code", "SgEgoSJnQh9smZt4BN8h3uZX"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email4@gmail.com"], ["password_digest", "$2a$04$59UEhp058ZejeeueJKEhF.qKqI5O6rgZD9VOswymzQtprsMXhGeLO"], ["created_at", "2021-02-08 20:16:58.752208"], ["updated_at", "2021-02-08 20:16:58.752208"], ["referral_code", "oNRik67MxMKyZFnkKgsopVHB"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email3@gmail.com"], ["id", 202], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:16:58.754420"], ["referrer_id", 203], ["id", 202]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email5@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email5@gmail.com"], ["password_digest", "$2a$04$2mV7dwLpDteu.s5Lj4e5GegTiBz.3jblNNsJ8A.TNVq1V1pGEosd."], ["created_at", "2021-02-08 20:16:58.758953"], ["updated_at", "2021-02-08 20:16:58.758953"], ["referral_code", "3MjXZsJuzB8Q6EEe9jRa9j4M"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email6@gmail.com"], ["password_digest", "$2a$04$aQDRq4KVgEg8M1RdXVHWo.eMewmtV8/QpK5TPDG3WhC/I6JkvyYFq"], ["created_at", "2021-02-08 20:16:58.763158"], ["updated_at", "2021-02-08 20:16:58.763158"], ["referral_code", "oSgd42RoK4N2VeSDqSd8cb2H"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email5@gmail.com"], ["id", 204], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:16:58.765477"], ["referrer_id", 205], ["id", 204]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email7@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email7@gmail.com"], ["password_digest", "$2a$04$0eu.e1kUbZlEqSPt63HNKedbcOX2C0PkSr0ejkCuc5ofNXjV18f3K"], ["created_at", "2021-02-08 20:16:58.770204"], ["updated_at", "2021-02-08 20:16:58.770204"], ["referral_code", "8fqCz6zpvSnBing155b8KmfE"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email8@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email8@gmail.com"], ["password_digest", "$2a$04$WYUTEKC2AXSbYiY0V.xmrOP6QU/Yzrn7JvrjMoJTdS6yjWh0O7WIi"], ["created_at", "2021-02-08 20:16:58.774452"], ["updated_at", "2021-02-08 20:16:58.774452"], ["referral_code", "y2pGaaAvdyEegNiyQThUb7ES"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email7@gmail.com"], ["id", 206], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:16:58.777038"], ["referrer_id", 207], ["id", 206]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$2va69TGNPfXaFyf2NSBRuObaklFM5WYUyJjiKb8CPQODNOIhGI9Ce"], ["created_at", "2021-02-08 20:20:38.090675"], ["updated_at", "2021-02-08 20:20:38.090675"], ["referral_code", "xks49AbGGgVsurcxpcWZWFUu"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$VBmIwZ0dPPuGKT5NOMqPKOCITTmBJJRJDKvvpbYnrZpT19Kr6OPdy"], ["created_at", "2021-02-08 20:20:38.095357"], ["updated_at", "2021-02-08 20:20:38.095357"], ["referral_code", "AcQ1xuDGJnE1fWX8Gy67NTni"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email1@gmail.com"], ["id", 208], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:20:38.100837"], ["referrer_id", 209], ["id", 208]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 208], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 209], ["LIMIT", 1]]
  [1m[36mUser Update All (0.8ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 208]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 209]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 208], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email3@gmail.com"], ["password_digest", "$2a$04$tBcLExapmdD5bA631JUVdu1cJkGVinlcoY721AG/k.wINhpufM6Ry"], ["created_at", "2021-02-08 20:20:38.161480"], ["updated_at", "2021-02-08 20:20:38.161480"], ["referral_code", "NMTaiyK1FkdzeLjn3nB5e3Kc"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email4@gmail.com"], ["password_digest", "$2a$04$wFTyz2.TQil31quVZHZ1peicj4f/4aheIs8t.EkFa4f.q8BA2JXgC"], ["created_at", "2021-02-08 20:20:38.165104"], ["updated_at", "2021-02-08 20:20:38.165104"], ["referral_code", "eLnZhPv56sY7Kear6MUpeMbA"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email3@gmail.com"], ["id", 210], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:20:38.167390"], ["referrer_id", 211], ["id", 210]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 211], ["LIMIT", 1]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 210]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 211]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 211], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email5@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email5@gmail.com"], ["password_digest", "$2a$04$cIK5wn28EfQHquGvL3rD1ek5.K97EmbkJr8cXg.toEnr9A9YpS272"], ["created_at", "2021-02-08 20:20:38.176304"], ["updated_at", "2021-02-08 20:20:38.176304"], ["referral_code", "hMggdGGGSxb3LYbYD4pjk4cT"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email6@gmail.com"], ["password_digest", "$2a$04$8.yhd7yH4m1XiW24u.I37eFD8V9tMJLLm7ghBM9IqCwnwU2ATtq/."], ["created_at", "2021-02-08 20:20:38.180245"], ["updated_at", "2021-02-08 20:20:38.180245"], ["referral_code", "JU4r9Xu94Kxj1iQRHTPsR8gt"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email5@gmail.com"], ["id", 212], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:20:38.182656"], ["referrer_id", 213], ["id", 212]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email6@gmail.com"], ["id", 213], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:20:38.185038"], ["referral_points", 5], ["id", 213]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email7@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email7@gmail.com"], ["password_digest", "$2a$04$YmujRmPs4.McjMfaBm.KpOvCSc9qulbdWw9IoI6UakLB2XqndckwG"], ["created_at", "2021-02-08 20:20:38.191283"], ["updated_at", "2021-02-08 20:20:38.191283"], ["referral_code", "nFw171urkzcFdhJxnB4VgDCk"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email8@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email8@gmail.com"], ["password_digest", "$2a$04$x7qwXg9aZ/L.LThY1Qr86u0zSTtUs2lMyo2Gwt1aAakDgsuOUCRyO"], ["created_at", "2021-02-08 20:20:38.196561"], ["updated_at", "2021-02-08 20:20:38.196561"], ["referral_code", "cUX9hAHQndaZW83UFxe79gTr"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email7@gmail.com"], ["id", 214], ["LIMIT", 1]]
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:20:38.200100"], ["referrer_id", 215], ["id", 214]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email8@gmail.com"], ["id", 215], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:20:38.203784"], ["referral_points", 5], ["id", 215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 215], ["LIMIT", 1]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 214]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 215]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 215]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 215]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 215], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email9@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email9@gmail.com"], ["password_digest", "$2a$04$YP1nCwaKYRZ8iZstUu9TQ.TszvdtvWKOyxaZ/94PeP0SORwT3yJju"], ["created_at", "2021-02-08 20:20:38.247642"], ["updated_at", "2021-02-08 20:20:38.247642"], ["referral_code", "9rSuyr7KgVYQLS47WWbdEPC8"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email10@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email10@gmail.com"], ["password_digest", "$2a$04$U.4Uf5JPnatA2T1QDHm4aee..hckis3JxjdQ8gpoGfU53Vq7nT.u6"], ["created_at", "2021-02-08 20:20:38.252631"], ["updated_at", "2021-02-08 20:20:38.252631"], ["referral_code", "KekAndZ5JwcdogC8cCwTNKMi"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email9@gmail.com"], ["id", 216], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:20:38.255653"], ["referrer_id", 217], ["id", 216]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email11@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email11@gmail.com"], ["password_digest", "$2a$04$TuJ2bsEL.F4TcQdn1et1U.mFamWI4Imf60vDP5XEMXax1kdIOExRy"], ["created_at", "2021-02-08 20:20:38.261327"], ["updated_at", "2021-02-08 20:20:38.261327"], ["referral_code", "kAMymiR9Y7fmmcUwFkQuUH4u"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email12@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email12@gmail.com"], ["password_digest", "$2a$04$GpDPjY41weCXX.vlWBu5feSmMQmKF5msWoU3UObpvVDGKECG28vpa"], ["created_at", "2021-02-08 20:20:38.267354"], ["updated_at", "2021-02-08 20:20:38.267354"], ["referral_code", "DbZNChPuBcdqFSpqMw4x9s18"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email11@gmail.com"], ["id", 218], ["LIMIT", 1]]
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:20:38.272266"], ["referrer_id", 219], ["id", 218]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$qbwKNZ0K2fBa/KcrDVf9Y.AUTeMwl3jqfdPv3h1PgMROyiFtfr.Z2"], ["created_at", "2021-02-08 20:21:54.096532"], ["updated_at", "2021-02-08 20:21:54.096532"], ["referral_code", "4gXbHTUrieuPFcPXy68GURLY"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$lj6sIUb4GE5K7w6qCrFT5.9PEB3MVm5TC2OP09ne/USq6GYFVf2T6"], ["created_at", "2021-02-08 20:21:54.101743"], ["updated_at", "2021-02-08 20:21:54.101743"], ["referral_code", "CSetrMTpXZk4tT8GxTUt1DfR"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email1@gmail.com"], ["id", 220], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:21:54.106599"], ["referrer_id", 221], ["id", 220]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 220], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 221], ["LIMIT", 1]]
  [1m[36mUser Update All (0.7ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 220]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 221]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 220], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email3@gmail.com"], ["password_digest", "$2a$04$dM2LSGKcd25ng84EDMui3.CrqYjAAt/40SnaDlkALQR81Xhne.x86"], ["created_at", "2021-02-08 20:21:54.166868"], ["updated_at", "2021-02-08 20:21:54.166868"], ["referral_code", "Tn5BfkqVinMi2coss64vHQdJ"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email4@gmail.com"], ["password_digest", "$2a$04$1IpoWevZjD5UzVd4AjT0OufpgFdqVSBmFfkh6XA3rV.9mbbZ0Kx4C"], ["created_at", "2021-02-08 20:21:54.170082"], ["updated_at", "2021-02-08 20:21:54.170082"], ["referral_code", "w1yB6uXtdzw7EE46MtVYY3qD"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email3@gmail.com"], ["id", 222], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:21:54.172352"], ["referrer_id", 223], ["id", 222]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 223], ["LIMIT", 1]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 222]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 223]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 223], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email5@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email5@gmail.com"], ["password_digest", "$2a$04$xyuu0S9JLufJLwnGyx0Kn.ql/aFlMYg.AHWWGwPKIwMiEXyoFXZHO"], ["created_at", "2021-02-08 20:21:54.182079"], ["updated_at", "2021-02-08 20:21:54.182079"], ["referral_code", "2MG5PJBc4993wA9hsnqwnqUk"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email6@gmail.com"], ["password_digest", "$2a$04$jGCimUBH6yodNaepv/h0yOC8lO3vh316xNoP3Zi26FqVvToa65Iia"], ["created_at", "2021-02-08 20:21:54.186143"], ["updated_at", "2021-02-08 20:21:54.186143"], ["referral_code", "gDwfqQ8ekVmjpPmG4AMjEn1Q"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email5@gmail.com"], ["id", 224], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:21:54.188413"], ["referrer_id", 225], ["id", 224]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email6@gmail.com"], ["id", 225], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:21:54.190688"], ["referral_points", 5], ["id", 225]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email7@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email7@gmail.com"], ["password_digest", "$2a$04$OK16sjjFAdeUmS5KRLeXHu.wY97nSFsGxvrwUeJeOMvjcFRmOXxfG"], ["created_at", "2021-02-08 20:21:54.197645"], ["updated_at", "2021-02-08 20:21:54.197645"], ["referral_code", "jvHvsDEYrehRThwi9FJdU1Vf"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email8@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email8@gmail.com"], ["password_digest", "$2a$04$pc./HloMn7YCVKEZP.UljOXt/HsPTA0oO0tUfBavQ8L2LzPHbiUrO"], ["created_at", "2021-02-08 20:21:54.202868"], ["updated_at", "2021-02-08 20:21:54.202868"], ["referral_code", "JiKmZtz9ZZ9G3NAgw7fM4MSQ"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email7@gmail.com"], ["id", 226], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:21:54.206508"], ["referrer_id", 227], ["id", 226]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email8@gmail.com"], ["id", 227], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:21:54.209064"], ["referral_points", 5], ["id", 227]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email9@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email9@gmail.com"], ["password_digest", "$2a$04$jAHBNHhdv2ld9aTnHYmahu3qqsHSTeB.SXqxQ1Na1YGdavZjls7pm"], ["created_at", "2021-02-08 20:21:54.214061"], ["updated_at", "2021-02-08 20:21:54.214061"], ["referral_code", "b93gG1UeiWzuGvAfsXXvN9uc"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email10@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email10@gmail.com"], ["password_digest", "$2a$04$bELZfACCOBkX.gj2m2UBv.FfmdAoIXqhceAy2xNvaQXddsB8Kf0F2"], ["created_at", "2021-02-08 20:21:54.218006"], ["updated_at", "2021-02-08 20:21:54.218006"], ["referral_code", "U6J8X48ChL3jXvMGLKJKbEWc"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email9@gmail.com"], ["id", 228], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:21:54.220265"], ["referrer_id", 229], ["id", 228]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email11@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email11@gmail.com"], ["password_digest", "$2a$04$xs/JxWFrO3BUOf0O3ILMEuKT2VWFFxHH5agSkEWEWBQUrGrFsAfpa"], ["created_at", "2021-02-08 20:21:54.226371"], ["updated_at", "2021-02-08 20:21:54.226371"], ["referral_code", "616jJK23ZtkGZkpfsuCDaBvU"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email12@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email12@gmail.com"], ["password_digest", "$2a$04$THdha14GBiy/sKlmPE2JL.5p.Qn.qOPcTGul/KScLkklG2dmE9T5u"], ["created_at", "2021-02-08 20:21:54.234174"], ["updated_at", "2021-02-08 20:21:54.234174"], ["referral_code", "Lstmxn3jdSg2jNndGdyrETRR"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email11@gmail.com"], ["id", 230], ["LIMIT", 1]]
  [1m[36mUser Update (1.0ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:21:54.238931"], ["referrer_id", 231], ["id", 230]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$0PJLZQvgux6W8Q9kalZrDOrCdyg19M4Q7.KJWaQK46y4ELyRcSRLS"], ["created_at", "2021-02-08 20:22:53.030398"], ["updated_at", "2021-02-08 20:22:53.030398"], ["referral_code", "vhMK4s2AG8MsAC4DdYNhNhao"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$mVH4YoWuBZXsWUXCgSIUWeQ2SgPzpCDuH.fpgAz5KiUgXykEJaz5q"], ["created_at", "2021-02-08 20:22:53.035125"], ["updated_at", "2021-02-08 20:22:53.035125"], ["referral_code", "vVHV9MYhy9Yk92M7dG4QZJZp"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email1@gmail.com"], ["id", 232], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:22:53.040247"], ["referrer_id", 233], ["id", 232]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 233], ["LIMIT", 1]]
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 232]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 233]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 233], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email3@gmail.com"], ["password_digest", "$2a$04$zeZyT5Yq1mznieAsEok.geieVC0hxOVD6j77kH6hSxdXxx5W6eD/e"], ["created_at", "2021-02-08 20:22:53.100031"], ["updated_at", "2021-02-08 20:22:53.100031"], ["referral_code", "voNUnfZ7rcXZLFk6hJoC1FN4"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email4@gmail.com"], ["password_digest", "$2a$04$.B9b8odzQu8f1Qbf0d8vz.Zv3q7ILDZH2RsHoV0mwKEh15/j.kG76"], ["created_at", "2021-02-08 20:22:53.103314"], ["updated_at", "2021-02-08 20:22:53.103314"], ["referral_code", "5W5d2EEYzWDwGqWiQuMXhPfa"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email3@gmail.com"], ["id", 234], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:22:53.105257"], ["referrer_id", 235], ["id", 234]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 234], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 235], ["LIMIT", 1]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 234]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 235]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 234], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email5@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email5@gmail.com"], ["password_digest", "$2a$04$BNstulY2AwY1F6/O2rR4XuZQYvCbYqewy8CLsVbyNLH/G41dzrd3C"], ["created_at", "2021-02-08 20:22:53.115727"], ["updated_at", "2021-02-08 20:22:53.115727"], ["referral_code", "2bTxnscFVxRv5f7TK9iKzAaW"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email6@gmail.com"], ["password_digest", "$2a$04$kMpLKkgFFJgLzeT1ICsrqe1ep.VlENmuUTBULx5QmrxerMd29aXzq"], ["created_at", "2021-02-08 20:22:53.119711"], ["updated_at", "2021-02-08 20:22:53.119711"], ["referral_code", "SLTuM9Wbg6yGzXQJajMycDWr"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email5@gmail.com"], ["id", 236], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:22:53.121970"], ["referrer_id", 237], ["id", 236]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email6@gmail.com"], ["id", 237], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:22:53.124409"], ["referral_points", 5], ["id", 237]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 237], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email7@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email7@gmail.com"], ["password_digest", "$2a$04$aJ2YKQfN9NLKfXNp72neL.hgcywgzG0DzSLsvDtkl4KiAnVvHmyxS"], ["created_at", "2021-02-08 20:22:53.131142"], ["updated_at", "2021-02-08 20:22:53.131142"], ["referral_code", "BcP4URoVprcMagqh6RyUK99c"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email8@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email8@gmail.com"], ["password_digest", "$2a$04$r/DZk8B8uV6baaXYUJKCOeZqpmJnECEvQUfFA3l2elTxD/7NQBeX."], ["created_at", "2021-02-08 20:22:53.137422"], ["updated_at", "2021-02-08 20:22:53.137422"], ["referral_code", "Tcaeudsu4EHHySrMwTffwUTm"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email7@gmail.com"], ["id", 238], ["LIMIT", 1]]
  [1m[36mUser Update (1.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:22:53.141877"], ["referrer_id", 239], ["id", 238]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email8@gmail.com"], ["id", 239], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:22:53.148286"], ["referral_points", 5], ["id", 239]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 239], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 239], ["LIMIT", 1]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 238]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 239]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 239]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 239]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 239], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email9@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email9@gmail.com"], ["password_digest", "$2a$04$CFR04c7Jrm3CfjpYWQjBoexJUe4AHggHYOqDFhoGYevbsebbeErZ."], ["created_at", "2021-02-08 20:22:53.185574"], ["updated_at", "2021-02-08 20:22:53.185574"], ["referral_code", "dCrUA4WEjzKSRbrExZF9ECE7"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email10@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email10@gmail.com"], ["password_digest", "$2a$04$HZzpIfYRTJmp.53tvwf1xe9KczQ8xVC/Ml8rTWF9dQFfhAwfMqIaW"], ["created_at", "2021-02-08 20:22:53.189950"], ["updated_at", "2021-02-08 20:22:53.189950"], ["referral_code", "X5EbiBEM7gAkWLg5CtSF3T5s"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email9@gmail.com"], ["id", 240], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:22:53.193191"], ["referrer_id", 241], ["id", 240]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email11@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email11@gmail.com"], ["password_digest", "$2a$04$8b5XuT0iqpf6s5OfErOkbOe1iARATDifho.la5vt2ORVDho2.Vuou"], ["created_at", "2021-02-08 20:22:53.198775"], ["updated_at", "2021-02-08 20:22:53.198775"], ["referral_code", "z1hna39oSkWihN4F4iecqXoe"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email12@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email12@gmail.com"], ["password_digest", "$2a$04$CYG3v3bCgNSgbkdQmF/ScOS3nxyBo57hn.vk20rzola3PpflRvb/y"], ["created_at", "2021-02-08 20:22:53.206107"], ["updated_at", "2021-02-08 20:22:53.206107"], ["referral_code", "RAFHdd8aZCTZaAB8pGwBnLWN"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email11@gmail.com"], ["id", 242], ["LIMIT", 1]]
  [1m[36mUser Update (1.0ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:22:53.210792"], ["referrer_id", 243], ["id", 242]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$sfx02EV.XBnnNUUq4zNr..W6z.zAqg3h5i/o1BGIs98GKKBVLTFaa"], ["created_at", "2021-02-08 20:23:26.535487"], ["updated_at", "2021-02-08 20:23:26.535487"], ["referral_code", "ghdCbU3s6ayVFbxGUmZosvnF"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$W.RQOEktqXmuhBo.cTmliuKTFZ7DnDQK0sxg61JCh9//kCUZB777K"], ["created_at", "2021-02-08 20:23:26.540208"], ["updated_at", "2021-02-08 20:23:26.540208"], ["referral_code", "eHgzzBMYYNNLogNYmB1fn3x1"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email1@gmail.com"], ["id", 244], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:23:26.545844"], ["referrer_id", 245], ["id", 244]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email2@gmail.com"], ["id", 245], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:23:26.549255"], ["referral_points", 5], ["id", 245]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 245], ["LIMIT", 1]]
  [1m[36mUser Update All (0.9ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 244]]
  [1m[36mUser Update All (0.7ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 245]]
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 245]]
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 245]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 245], ["LIMIT", 1]]
  [1m[36mUser Update All (1.0ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 244]]
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 245]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 245], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$Jp2p0Sfavl7Hvf9um.HISeVzzLOXC5/si4XB1kFQl1jMUX2b2TWve"], ["created_at", "2021-02-08 20:25:37.712718"], ["updated_at", "2021-02-08 20:25:37.712718"], ["referral_code", "dhSo5YTpF1TQciBDbURJpsNf"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$HvMS5CIKxu0B1XU5QJ7TEeG46pY3cA1WPGqm0GR0Fg.n0/c82tYP6"], ["created_at", "2021-02-08 20:25:37.716864"], ["updated_at", "2021-02-08 20:25:37.716864"], ["referral_code", "B1N21tqaFEQ8BAGzR2PRrHTD"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email1@gmail.com"], ["id", 246], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:25:37.722097"], ["referrer_id", 247], ["id", 246]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email2@gmail.com"], ["id", 247], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:25:37.725074"], ["referral_points", 5], ["id", 247]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 247], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 247], ["LIMIT", 1]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 246]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 247]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 247]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 247]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 247], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$IWn5L4tKwogZJ5a/h7KPXOH0UrqFwcKQNgIb5V621929FXi3JXazC"], ["created_at", "2021-02-08 20:27:27.615680"], ["updated_at", "2021-02-08 20:27:27.615680"], ["referral_code", "BZDDUbFrJRnoJ4RcxBDdwhSn"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$znkdeM7ItdxbvNkKe5yRVOqDdzDF7glNN972wE1qSpV3i06uLkNNK"], ["created_at", "2021-02-08 20:27:27.620255"], ["updated_at", "2021-02-08 20:27:27.620255"], ["referral_code", "shCPBaNDf3QbnSk4ZMG93Ptf"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email1@gmail.com"], ["id", 248], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:27:27.625805"], ["referrer_id", 249], ["id", 248]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 249], ["LIMIT", 1]]
  [1m[36mUser Update All (1.0ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 248]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 249]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 249], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email3@gmail.com"], ["password_digest", "$2a$04$PO30BwWisneabdBB2ynOEelpmhVEenatNRrzDjNfuSYFmvby1Y6W2"], ["created_at", "2021-02-08 20:27:27.687068"], ["updated_at", "2021-02-08 20:27:27.687068"], ["referral_code", "JkEpU8L46ksXBPtxd1SLMpYM"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email4@gmail.com"], ["password_digest", "$2a$04$/V3JDpegbY1tkm1aZWQL9ONKKKH2NSb4eq5qZ1z/xQQhGUvHro8uO"], ["created_at", "2021-02-08 20:27:27.690569"], ["updated_at", "2021-02-08 20:27:27.690569"], ["referral_code", "TKysWmuigo37cQjVcVkmg5m1"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email3@gmail.com"], ["id", 250], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:27:27.692759"], ["referrer_id", 251], ["id", 250]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 250], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 251], ["LIMIT", 1]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 250]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 251]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 250], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email5@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email5@gmail.com"], ["password_digest", "$2a$04$BJ4/DjSiAd.YVBbc1E19pehvCjbrKcLdG2B/7jHWZfn3aFPLwvoMq"], ["created_at", "2021-02-08 20:27:27.703646"], ["updated_at", "2021-02-08 20:27:27.703646"], ["referral_code", "3FYNt6RSPi7xo6EQSnm5WUKt"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email6@gmail.com"], ["password_digest", "$2a$04$dT6/2h//Jv9nGFtwCPX40.q4TZyf0LjhNlMJa6MqMOboU8iRZ24D6"], ["created_at", "2021-02-08 20:27:27.707454"], ["updated_at", "2021-02-08 20:27:27.707454"], ["referral_code", "yjP6wsv3Zz2QSTW7oTNworzv"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email5@gmail.com"], ["id", 252], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:27:27.709865"], ["referrer_id", 253], ["id", 252]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 253], ["LIMIT", 1]]
  [1m[36mUser Update All (0.6ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 252]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 253]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 253], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email7@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email7@gmail.com"], ["password_digest", "$2a$04$dAMYJYVJdgFRKrBihOpLJOotItKA95SQIrxCEl7OUmabCcHxUQKb."], ["created_at", "2021-02-08 20:27:27.741563"], ["updated_at", "2021-02-08 20:27:27.741563"], ["referral_code", "3aehkcAYx1ZHbt5dF8QmoJrH"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email8@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email8@gmail.com"], ["password_digest", "$2a$04$KyTU//.WHJIIPNhN.ROP5ub4q79vdCoT.GZ.g9Ok7Ug2Uur.9kpAG"], ["created_at", "2021-02-08 20:27:27.749903"], ["updated_at", "2021-02-08 20:27:27.749903"], ["referral_code", "PwFJgGTfqjcxSqZmgaHzRm3j"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email7@gmail.com"], ["id", 254], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:27:27.753947"], ["referrer_id", 255], ["id", 254]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 255], ["LIMIT", 1]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 254]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 255]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 255], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email9@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email9@gmail.com"], ["password_digest", "$2a$04$l28OJT7zFyD.zHYTChRmguUMv//vwwbxe8/jgVYvSElEFsWh4dr8W"], ["created_at", "2021-02-08 20:27:27.765705"], ["updated_at", "2021-02-08 20:27:27.765705"], ["referral_code", "KXWittobBswLq2GZR4g9emRv"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email10@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email10@gmail.com"], ["password_digest", "$2a$04$R46Yqz7hD56KkjwD/z6FteYepITXh.RGqdvvg5UDEoJ5e40qXgz3."], ["created_at", "2021-02-08 20:27:27.772745"], ["updated_at", "2021-02-08 20:27:27.772745"], ["referral_code", "Hry8wJQrAbyQGqwud95PrZvi"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email9@gmail.com"], ["id", 256], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:27:27.775475"], ["referrer_id", 257], ["id", 256]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email10@gmail.com"], ["id", 257], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:27:27.777809"], ["referral_points", 4], ["id", 257]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 257], ["LIMIT", 1]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 256]]
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 257]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 257]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 257]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 257], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email11@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email11@gmail.com"], ["password_digest", "$2a$04$k8EJVrO.oFC3lMC7ifDcY.FOrAZdmB.1pSKQqAXLwaJDGnNIQoqrm"], ["created_at", "2021-02-08 20:27:27.789783"], ["updated_at", "2021-02-08 20:27:27.789783"], ["referral_code", "Dt4HGnrVx7QKEvdjSuJoXzVV"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email12@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email12@gmail.com"], ["password_digest", "$2a$04$qaSKJP4JVvMuTDAJVD9gauN.Qsee.tJXiSBX2YQAnOztydwqrXBhy"], ["created_at", "2021-02-08 20:27:27.796431"], ["updated_at", "2021-02-08 20:27:27.796431"], ["referral_code", "fLTgdhjYaoRp2uDU1PeWXw8U"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email11@gmail.com"], ["id", 258], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:27:27.804858"], ["referrer_id", 259], ["id", 258]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email12@gmail.com"], ["id", 259], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:27:27.807900"], ["referral_points", 4], ["id", 259]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 259], ["LIMIT", 1]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 258]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 259]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 259]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 259]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 259], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$Crn9CYIBeI5LKId.Jx34buo0yoU.VYknOGdS2NkuEbWPOY9r02Vsm"], ["created_at", "2021-02-08 20:31:37.934230"], ["updated_at", "2021-02-08 20:31:37.934230"], ["referral_code", "LYu2dsUNPHPBerfdS8Jk2xTb"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$OVcKz/cnM4RyLFgLN8UHj.uVqE9gi69uY5k7GULNy6wZAZeD8H7/C"], ["created_at", "2021-02-08 20:31:37.938960"], ["updated_at", "2021-02-08 20:31:37.938960"], ["referral_code", "dm5hpi53CFGqMhYyTneQowiM"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email1@gmail.com"], ["id", 260], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:31:37.944097"], ["referrer_id", 261], ["id", 260]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 261], ["LIMIT", 1]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 260]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 261]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 261], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email3@gmail.com"], ["password_digest", "$2a$04$03MqbnqrFkgFQk.eGCCOtuoT1IARIpkbFtz5RhHVe77C7SnZA3YPS"], ["created_at", "2021-02-08 20:31:38.006630"], ["updated_at", "2021-02-08 20:31:38.006630"], ["referral_code", "x7i3V4e3fRttTxM5Nf7UJBvy"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email4@gmail.com"], ["password_digest", "$2a$04$KImYuUc.4QSXNj4ZM65tG.x3XIvDEP8z1vpbkLS.OzSiICMLkiRIi"], ["created_at", "2021-02-08 20:31:38.010507"], ["updated_at", "2021-02-08 20:31:38.010507"], ["referral_code", "T23hvs7woNdtxSHQyMJLhUCF"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email3@gmail.com"], ["id", 262], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:31:38.012448"], ["referrer_id", 263], ["id", 262]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 262], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 263], ["LIMIT", 1]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 262]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 263]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 262], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email5@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email5@gmail.com"], ["password_digest", "$2a$04$U/Lvbw.IdNRwACJf5CF7zuq7AA4af4kaUpZSr2fl0DO11XDKJaRtG"], ["created_at", "2021-02-08 20:31:38.022856"], ["updated_at", "2021-02-08 20:31:38.022856"], ["referral_code", "bDqcbJdm9BijzC8H6ukDHKAS"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email6@gmail.com"], ["password_digest", "$2a$04$EEuCkmAhrAG29ZPFTL54j.14Aj2CYn/I/ngcSttb754tLOcIwDLRS"], ["created_at", "2021-02-08 20:31:38.027251"], ["updated_at", "2021-02-08 20:31:38.027251"], ["referral_code", "AnBLiVjhTWFBTi1D9wSwousY"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email5@gmail.com"], ["id", 264], ["LIMIT", 1]]
  [1m[36mUser Update (1.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:31:38.031008"], ["referrer_id", 265], ["id", 264]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email6@gmail.com"], ["id", 265], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:31:38.035182"], ["referral_points", 5], ["id", 265]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 265], ["LIMIT", 1]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 264]]
  [1m[36mUser Update All (1.1ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 265]]
  [1m[36mUser Update All (0.8ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 265]]
  [1m[36mUser Update All (0.8ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 265]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 265], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email7@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email7@gmail.com"], ["password_digest", "$2a$04$/5yyyEX3BYuHtADAumNsGOk5onj5IO.0EvKP4OFqiEA1WKY005yl."], ["created_at", "2021-02-08 20:31:38.051817"], ["updated_at", "2021-02-08 20:31:38.051817"], ["referral_code", "kggPjzrt7upjXhND8dbu6TZU"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email8@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email8@gmail.com"], ["password_digest", "$2a$04$X7XY7q27wWqJkgl/Owr5EuGI2SJb2LUzZyCwMPnTzO0AH.32ekQ4S"], ["created_at", "2021-02-08 20:31:38.057102"], ["updated_at", "2021-02-08 20:31:38.057102"], ["referral_code", "8Ay8znPaPSe3qHfBRgd31UiX"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email7@gmail.com"], ["id", 266], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:31:38.059675"], ["referrer_id", 267], ["id", 266]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email8@gmail.com"], ["id", 267], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:31:38.062351"], ["referral_points", 5], ["id", 267]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 267], ["LIMIT", 1]]
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 266]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 267]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 267]]
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 267]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 267], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email9@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email9@gmail.com"], ["password_digest", "$2a$04$.ZHvhXktDE8FO9rnMF3IvO6BYXNc4TVVHEyxsCfzH2P1f/k6o1/NK"], ["created_at", "2021-02-08 20:31:38.076680"], ["updated_at", "2021-02-08 20:31:38.076680"], ["referral_code", "zkQunLD1iWZ7iRfvnYjXxVgm"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email10@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email10@gmail.com"], ["password_digest", "$2a$04$KrnlMsTuW.vZfTRppvY0mOlCkWyQthgypPRfsR.ZCJ6hFBzxRuJuS"], ["created_at", "2021-02-08 20:31:38.082101"], ["updated_at", "2021-02-08 20:31:38.082101"], ["referral_code", "Z6Ywg1tvqPWsSmcJ5AbMeafN"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email9@gmail.com"], ["id", 268], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:31:38.087949"], ["referrer_id", 269], ["id", 268]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 269], ["LIMIT", 1]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 268]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 269]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 269], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email11@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email11@gmail.com"], ["password_digest", "$2a$04$MNQoPZ4WQsYt6qoceFmPnuQKLHxPzkyaNj1RQlOShu3jZ3y0HlfnS"], ["created_at", "2021-02-08 20:31:38.096842"], ["updated_at", "2021-02-08 20:31:38.096842"], ["referral_code", "47n37nSDY9E8uEeePTBSxjEp"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email12@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email12@gmail.com"], ["password_digest", "$2a$04$pQqdeYZYiFGOWXU88gux4Owv1KoB9TSf7F4SddqvknJoZQuCsu1Lu"], ["created_at", "2021-02-08 20:31:38.101024"], ["updated_at", "2021-02-08 20:31:38.101024"], ["referral_code", "79WWZLc35khC6bRX8CZj8CnV"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email11@gmail.com"], ["id", 270], ["LIMIT", 1]]
  [1m[36mUser Update (1.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:31:38.104684"], ["referrer_id", 271], ["id", 270]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "referral_code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2021-02-08 20:35:27.408611"], ["updated_at", "2021-02-08 20:35:27.408611"], ["referral_code", "JLn6g213NgA26V2yq5bEKQgK"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "dummy value"], ["updated_at", "2021-02-08 20:35:27.411137"], ["id", 272]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "dummy value"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "DUMMY VALUE"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 23:35:27 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$IlN14CuBO37Q/SaTASrVBulAXSUWx4ZhD6hqBX8jkBbLeWFUYFVzu"], ["created_at", "2021-02-08 20:35:27.476494"], ["updated_at", "2021-02-08 20:35:27.476494"], ["referral_code", "eutLrXRW4wBTrA9WphYS6rUV"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 273], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 273], ["LIMIT", 1]]
Completed 200 OK in 10ms (Views: 0.4ms | ActiveRecord: 2.3ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 23:35:27 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$DHlMUqdroV8cNnIywf2xZ.yGnTZBhODZfUbcOIRlXko/S0ryvalt2"], ["created_at", "2021-02-08 20:35:27.498993"], ["updated_at", "2021-02-08 20:35:27.498993"], ["referral_code", "BSTrBejwQ7nMqALCn2BfBU4t"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 274], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 274], ["LIMIT", 1]]
Completed 200 OK in 13ms (Views: 0.3ms | ActiveRecord: 3.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$wZBHJqJ2W1o2NjvVbqkxHu.HJ3qcklkfX54ZANqNwZbFZkGovkD2K"], ["created_at", "2021-02-08 20:35:27.510908"], ["updated_at", "2021-02-08 20:35:27.510908"], ["referral_code", "1yLr6Mca3F5zHr5A5otWFmQ1"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 23:35:27 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]", "referred_by"=>"1yLr6Mca3F5zHr5A5otWFmQ1"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$PmhsQZTPk4AbaIKIRlh57eIV95pE3DrcvLY60UgDicRTpeyvi1cmi"], ["created_at", "2021-02-08 20:35:27.531260"], ["updated_at", "2021-02-08 20:35:27.531260"], ["referral_code", "o2YqT2deqctPSrG7PSuPGBjL"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 276], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "1yLr6Mca3F5zHr5A5otWFmQ1"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 276], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:35:27.539951"], ["referrer_id", 275], ["id", 276]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 276], ["LIMIT", 1]]
Completed 200 OK in 17ms (Views: 0.4ms | ActiveRecord: 4.4ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$4MvqzmBr32ePltutih6g..zdXJgaJYH4Ibrb72J/dTo6j2m6K.tY2"], ["created_at", "2021-02-08 20:35:27.549717"], ["updated_at", "2021-02-08 20:35:27.549717"], ["referral_code", "v1bv5UoEdy7yKPciLP4JLUm3"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 23:35:27 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email2@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 12ms (Views: 0.7ms | ActiveRecord: 2.0ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email3@gmail.com"], ["password_digest", "$2a$04$qkMq/IAi8rh7hbIy4QITQejgf9icbbbQljyfNQ4tUgGuaJ8U8rrym"], ["created_at", "2021-02-08 20:35:27.571904"], ["updated_at", "2021-02-08 20:35:27.571904"], ["referral_code", "wbAqs4uWtcGaEmFHGrdyvJHJ"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 23:35:27 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email3@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 7ms (Views: 0.3ms | ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email4@gmail.com"], ["password_digest", "$2a$04$Qz6UtCiWWwc1fCjX.2fP/.zjQFVPx0UkEq65eZCHtA3aMR/birCTC"], ["created_at", "2021-02-08 20:35:27.589329"], ["updated_at", "2021-02-08 20:35:27.589329"], ["referral_code", "VXn2AFZMN1aLeiU3PF3V7xb8"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email5@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email5@gmail.com"], ["password_digest", "$2a$04$aZCGGyW5U6wWS2N3kk4JvOG59iMrHht.mKIUtRzD3fpTc51XBtZPm"], ["created_at", "2021-02-08 20:35:27.596763"], ["updated_at", "2021-02-08 20:35:27.596763"], ["referral_code", "9XpWYduGqXnTZHReGZZWuC8n"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 23:35:27 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email4@gmail.com", "password"=>"[FILTERED]", "referred_by"=>"9XpWYduGqXnTZHReGZZWuC8n"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 6ms (Views: 0.3ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email6@gmail.com"], ["password_digest", "$2a$04$EX/TobyK8RyEWrDCisyLu.ALZTzjymV1eubtsp6iEFmjAU/i0QZci"], ["created_at", "2021-02-08 20:35:27.616063"], ["updated_at", "2021-02-08 20:35:27.616063"], ["referral_code", "t3fm6mvV4acg343RQ12Q6spW"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 23:35:27 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email6@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 0.6ms)
Started GET "/users" for 127.0.0.1 at 2021-02-08 23:35:27 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 281], ["LIMIT", 1]]
Completed 200 OK in 6ms (Views: 0.4ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email7@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email7@gmail.com"], ["password_digest", "$2a$04$.81Jdh2NbKQsNDNbLNqt0ukFDIsL/OKwaRSI3VtOsdP0pgsPZ7n16"], ["created_at", "2021-02-08 20:35:27.641714"], ["updated_at", "2021-02-08 20:35:27.641714"], ["referral_code", "kRkpVMmxGypbNfhQb6L4go7x"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 23:35:27 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email7@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email7@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.3ms)
Started GET "/users" for 127.0.0.1 at 2021-02-08 23:35:27 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 282], ["LIMIT", 1]]
Completed 200 OK in 1ms (Views: 0.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/users" for 127.0.0.1 at 2021-02-08 23:35:27 +0300
Processing by UsersController#index as HTML
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email8@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email8@gmail.com"], ["password_digest", "$2a$04$swTzyZQJfpJwVuvWFSMtSe0uMiYaRjpGzG3uWo2SvNIzZclvGgg26"], ["created_at", "2021-02-08 20:35:27.665553"], ["updated_at", "2021-02-08 20:35:27.665553"], ["referral_code", "yXShMmmJmLAsUZyTv1jf4PKm"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email9@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email9@gmail.com"], ["password_digest", "$2a$04$Ve5DZ57PpAcvdhraM8noYeW9hNDSq4DZPQ5EQBIynfphhmwkv4cji"], ["created_at", "2021-02-08 20:35:27.671778"], ["updated_at", "2021-02-08 20:35:27.671778"], ["referral_code", "QBdrNfsySjLavosLAuUUeQkV"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email8@gmail.com"], ["id", 283], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:35:27.674381"], ["referrer_id", 284], ["id", 283]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 283], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 284], ["LIMIT", 1]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 283]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 284]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 283], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email10@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email10@gmail.com"], ["password_digest", "$2a$04$E0BbPQEWLrAhItDISsh3vuRTTffUIvXOBuelbTvYu024jQcqw.YNq"], ["created_at", "2021-02-08 20:35:27.692097"], ["updated_at", "2021-02-08 20:35:27.692097"], ["referral_code", "XPvPyYLqxUNRheadhJb4gdK9"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email11@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email11@gmail.com"], ["password_digest", "$2a$04$PzpVJdCX59ZwAI8oo7Sw.ORXSka011KIP/ctme1vF9Flv.nkbmxl6"], ["created_at", "2021-02-08 20:35:27.697985"], ["updated_at", "2021-02-08 20:35:27.697985"], ["referral_code", "1iQ7Z9NUeAZEnqwR2wzKPjCs"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email10@gmail.com"], ["id", 285], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:35:27.703191"], ["referrer_id", 286], ["id", 285]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 286], ["LIMIT", 1]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 285]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 286]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 286], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email12@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email12@gmail.com"], ["password_digest", "$2a$04$z3XVAAoIezUr99pBuK2HnOiYOSF34P0OFjaX2ZEG7RYPu.Ro14oBS"], ["created_at", "2021-02-08 20:35:27.712858"], ["updated_at", "2021-02-08 20:35:27.712858"], ["referral_code", "LJVQCFhzkwW1j3drqG5xWFET"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email13@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email13@gmail.com"], ["password_digest", "$2a$04$pYPsEC4fHxTfd1Buomv6We.TWC2oHJloQytd7.1sf/jli6PNOgieq"], ["created_at", "2021-02-08 20:35:27.718604"], ["updated_at", "2021-02-08 20:35:27.718604"], ["referral_code", "PQVRpxjfAowsAqHqP7rzmMUo"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email12@gmail.com"], ["id", 287], ["LIMIT", 1]]
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:35:27.722264"], ["referrer_id", 288], ["id", 287]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email13@gmail.com"], ["id", 288], ["LIMIT", 1]]
  [1m[36mUser Update (0.9ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:35:27.727326"], ["referral_points", 5], ["id", 288]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 288], ["LIMIT", 1]]
  [1m[36mUser Update All (0.9ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 287]]
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 288]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 288]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 288]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 288], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email14@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email14@gmail.com"], ["password_digest", "$2a$04$7Bnc5LRuiYRct1E6DB/ZkOc4VBOCjBuEV0CRHgU3ScR3iPZfrYley"], ["created_at", "2021-02-08 20:35:27.741291"], ["updated_at", "2021-02-08 20:35:27.741291"], ["referral_code", "MorSz2obX5qutbmN8ua8bGVx"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email15@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email15@gmail.com"], ["password_digest", "$2a$04$uyEDHjUsEKf..tvTI6WJ/erWhAK1w7OlIZymSP58cX0wvqvkVtraS"], ["created_at", "2021-02-08 20:35:27.746022"], ["updated_at", "2021-02-08 20:35:27.746022"], ["referral_code", "rxfjYXmcirwM8CzDjAQkf1R8"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email14@gmail.com"], ["id", 289], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:35:27.772594"], ["referrer_id", 290], ["id", 289]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email15@gmail.com"], ["id", 290], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:35:27.775569"], ["referral_points", 5], ["id", 290]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 290], ["LIMIT", 1]]
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 289]]
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 290]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 290]]
  [1m[36mUser Update All (0.7ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 290]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 290], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email16@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email16@gmail.com"], ["password_digest", "$2a$04$jD16ydicy9s17p08avWo5exYaakuYKhzSwewEQR3hpD.CP6PdNlNa"], ["created_at", "2021-02-08 20:35:27.793982"], ["updated_at", "2021-02-08 20:35:27.793982"], ["referral_code", "nvL4bzeFHpX6zNdHXV8vwiFt"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email17@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email17@gmail.com"], ["password_digest", "$2a$04$0LmxQf2pOdkLaLpwwj6jL.O5RmlNAoFlmPjSSYbP1rzTrEmOWn65u"], ["created_at", "2021-02-08 20:35:27.802182"], ["updated_at", "2021-02-08 20:35:27.802182"], ["referral_code", "tK1nGKyt4bw287MarLCcYLaR"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email16@gmail.com"], ["id", 291], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:35:27.804920"], ["referrer_id", 292], ["id", 291]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 292], ["LIMIT", 1]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 291]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 292]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 292], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 23:35:27 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.4ms | ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 23:35:27 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email18@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email18@gmail.com"], ["password_digest", "$2a$04$EVk/FEz4qCqEsiKcpae7BevX5mTzev3uR33Sqcd9vDSKqB.8VXoSK"], ["created_at", "2021-02-08 20:35:27.829222"], ["updated_at", "2021-02-08 20:35:27.829222"], ["referral_code", "Jpnqf5dMNkkfhpKmcXbBC8RG"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 23:35:27 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email18@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email18@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email19@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email19@gmail.com"], ["password_digest", "$2a$04$p9umhe6gVngYFEu3RJhQ9u06/vEHQ7oVxnHg07DwLlllERktKXtA."], ["created_at", "2021-02-08 20:35:27.843070"], ["updated_at", "2021-02-08 20:35:27.843070"], ["referral_code", "JvH8pP5U3CYitEsEP9dfrMw5"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 23:35:27 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email19@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email19@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.4ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$OtfZ1/m1P4IrdUP8JnyMiuwf/ocEhm/n2ZCc4PuVXcrGHSOxshNhO"], ["created_at", "2021-02-08 20:47:10.309283"], ["updated_at", "2021-02-08 20:47:10.309283"], ["referral_code", "MvQh6Dge8UNAzKueyTuM66vW"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 295], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$frVSF6UxmFb/Vz1UDlyPKe8cVyia5pnBT63Giac.Xu9fAlJdpZGd6"], ["created_at", "2021-02-08 20:48:51.367142"], ["updated_at", "2021-02-08 20:48:51.367142"], ["referral_code", "NPpCW43BW9uMjayhWCKBNC3F"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 296], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$O/2I.GsnD3mp1NWmTNCxTuaTiHHDtrC4S.w/bcImkw0vFqVqVOLEK"], ["created_at", "2021-02-08 20:48:51.421733"], ["updated_at", "2021-02-08 20:48:51.421733"], ["referral_code", "gLPUhe94Lfid1fR2wtnAHDAs"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$nOf2RoP56tFWsFjbOw0Ytek3n7rjW7yx0Y1RK5Liy4ggn8j5NHBLG"], ["created_at", "2021-02-08 20:49:15.239998"], ["updated_at", "2021-02-08 20:49:15.239998"], ["referral_code", "UJFndAqUGqPmWxPdrPSJSCzQ"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 298], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$jRIXZwSC3KWrUhrRnoYmnOAw7jGvbbYpKdZgGJV1SYWL000xQCG42"], ["created_at", "2021-02-08 20:49:15.294201"], ["updated_at", "2021-02-08 20:49:15.294201"], ["referral_code", "msmVD9eAoEuv558wWurjAPn6"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$DKibzAGV1oOojfjx7r8fR.YDJgEEGY13iRALZVkyX2fOFLP3mADia"], ["created_at", "2021-02-08 20:49:38.316122"], ["updated_at", "2021-02-08 20:49:38.316122"], ["referral_code", "nmTsiNRKUUUjHzX7w8LNgSfx"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 300], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$J9ZqeRiEUE7Njpvz/wMEO.9pFKPFaBigye.EyIlmRw/9tDp8Bm7Je"], ["created_at", "2021-02-08 20:49:38.364551"], ["updated_at", "2021-02-08 20:49:38.364551"], ["referral_code", "Fsr1wHa5DEZ4wZys3NYoovh6"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$EbimFt750IixlYHyFPwqVeFgKPt5MJH5ABjbg1bFSJDBnQl2dJJ5C"], ["created_at", "2021-02-08 20:49:57.738531"], ["updated_at", "2021-02-08 20:49:57.738531"], ["referral_code", "Fr1VWRXuVVDWARVLdudRSbai"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 302], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$DYa8agyTWyJuFGNfCU/17eFXNAuYwaKuysKJWtuhsuCAJp0Hccn7i"], ["created_at", "2021-02-08 20:49:57.791218"], ["updated_at", "2021-02-08 20:49:57.791218"], ["referral_code", "qB7Zf8r23SfibNbKQCK93jA6"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$XgYPuYy2CU/MD9aNbjmmKukJTdrMAIV4J2hag0Ie4zAGJQN4pWMT."], ["created_at", "2021-02-08 20:49:57.796372"], ["updated_at", "2021-02-08 20:49:57.796372"], ["referral_code", "pP2AGJqhf8h2Zb3yNF13VjSf"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 304], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "qB7Zf8r23SfibNbKQCK93jA6"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 304], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:49:57.803392"], ["referrer_id", 303], ["id", 304]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$JEZny8Cz45bNaRmKLOByx.9kEtfrvdOJoDPrGvppEGoAUNfaPuKlW"], ["created_at", "2021-02-08 20:50:37.182537"], ["updated_at", "2021-02-08 20:50:37.182537"], ["referral_code", "F3ehwdwC8TPTF2aigqNDSC15"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 305], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$b6jxOYB3pPTUQyC8QbBD.uG.eixrs6wzlT5TbkXVnMOoIzXOAekf."], ["created_at", "2021-02-08 20:50:37.231909"], ["updated_at", "2021-02-08 20:50:37.231909"], ["referral_code", "QK3qgragJFxXtw9BSQDN6Kem"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$d.AmbKWayE5codTfeD7/c.rqpzinKb7idTha1785MnUS1VBUMHlc."], ["created_at", "2021-02-08 20:50:37.237336"], ["updated_at", "2021-02-08 20:50:37.237336"], ["referral_code", "zp3mQvERyrwBChWK4RZq5oX7"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 307], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "QK3qgragJFxXtw9BSQDN6Kem"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 307], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:50:37.243870"], ["referrer_id", 306], ["id", 307]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$6.nkcKvlYunp6YVWWNaFd.m2hN9n2rDM7CZbZ8I2Bu8gribDvixHi"], ["created_at", "2021-02-08 20:50:37.269569"], ["updated_at", "2021-02-08 20:50:37.269569"], ["referral_code", "V9m8ewriypsKzmEb6vbm28vz"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$Xwe6L/arF5Kb8PD0q2GkGOw.hV9Ts6HV8YFcwhKlYnU6EwWtOo6Fe"], ["created_at", "2021-02-08 20:50:37.276348"], ["updated_at", "2021-02-08 20:50:37.276348"], ["referral_code", "2eABKeDAhF2S5ozC6nYBXPXu"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 309], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "V9m8ewriypsKzmEb6vbm28vz"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 309], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:50:37.281356"], ["referrer_id", 308], ["id", 309]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$Zpiv3E1xoT.9Jsv/J1TC0uCm8kAFAvizcifsh9D7oK3UQsGaBKTRm"], ["created_at", "2021-02-08 20:51:05.414710"], ["updated_at", "2021-02-08 20:51:05.414710"], ["referral_code", "LtszBZceC89GyaamC8UV6FNE"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 310], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$5thmmCAtNQs0hdqBC.haXO.al.w1KKC9Uys3.FWUeQzqEw/ycMV0e"], ["created_at", "2021-02-08 20:51:05.431013"], ["updated_at", "2021-02-08 20:51:05.431013"], ["referral_code", "jA2B1ime4y5cSAN2NXs74C6Y"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$vnWSkFwzxFaqYQBvmqzqOOq8IrG4OmkVi5sQAZwTUmjVAIZpNaLRG"], ["created_at", "2021-02-08 20:51:05.437849"], ["updated_at", "2021-02-08 20:51:05.437849"], ["referral_code", "cq11EFCwTJ4Pdg2mzn5sZiRp"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 312], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "jA2B1ime4y5cSAN2NXs74C6Y"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 312], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:51:05.445545"], ["referrer_id", 311], ["id", 312]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$GuzuW7rWr0RUd/RoHGa1keQ2Eakdu777pFwgjA7pYOpC9lyT3DKRu"], ["created_at", "2021-02-08 20:51:05.454816"], ["updated_at", "2021-02-08 20:51:05.454816"], ["referral_code", "u2aJRJYfqzZaWu5iZetCHMy7"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$6VFZjK8D8KEAZaTHBl4qu.mJLvV9BGMGpTVIzQgtfTnsXX2mRkoE6"], ["created_at", "2021-02-08 20:51:05.460796"], ["updated_at", "2021-02-08 20:51:05.460796"], ["referral_code", "gHdtuB37XdKS5cPYjBFXCBsG"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 314], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$d2h1uMsgW3XawtXaqVzDF.MPrw5zUr3H0mXBQbwg0cHWcPC00ySsS"], ["created_at", "2021-02-08 20:51:22.336115"], ["updated_at", "2021-02-08 20:51:22.336115"], ["referral_code", "vMEuzUHH29fxWUVN4SCSJzzE"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 315], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$purv476iKDgGsuT8SNBQ.OV0LsDg7lJoSD6MoMpeCWLMSOh2Ud0/u"], ["created_at", "2021-02-08 20:51:22.345157"], ["updated_at", "2021-02-08 20:51:22.345157"], ["referral_code", "SvoFT6Jnk3tiavVApseNsH7R"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$yJtkxrXb3BZCiIpQ5waZAubn79QxfNN2h8sykyA4ksTy0/d9h.f6."], ["created_at", "2021-02-08 20:51:22.350865"], ["updated_at", "2021-02-08 20:51:22.350865"], ["referral_code", "BNFiwyQsQTfBToL1sorFuaWN"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 317], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "SvoFT6Jnk3tiavVApseNsH7R"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 317], ["LIMIT", 1]]
  [1m[36mUser Update (1.0ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:51:22.364205"], ["referrer_id", 316], ["id", 317]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$I7o98U9AIEq1lmeDa5AufuMkoorS772IAI7NxYowfHclEEBf4YMlS"], ["created_at", "2021-02-08 20:51:22.373136"], ["updated_at", "2021-02-08 20:51:22.373136"], ["referral_code", "SHX7meSftBVnJomMaVmdsSwX"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$G3MMwPCIfzVVERhnHWoxg./FfVtEQv9IdwvJlwL4U9KP4YPFWLVoO"], ["created_at", "2021-02-08 20:51:22.377829"], ["updated_at", "2021-02-08 20:51:22.377829"], ["referral_code", "8hQcfqNrLLbXfQB3fhmXBvvK"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 319], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$aQl1IwLygJ7x4dKK8Os21e8GDJbm9ztigbFj9ckQhYNaqTBK9alji"], ["created_at", "2021-02-08 20:51:35.005756"], ["updated_at", "2021-02-08 20:51:35.005756"], ["referral_code", "ACZjYgVrgZpkcXa8cWveWUXn"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 320], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$72o1DfGD4B3HUPIApYM1SuE106tgasSPNU46LQUpM.gbpKk5ZZzju"], ["created_at", "2021-02-08 20:51:35.014651"], ["updated_at", "2021-02-08 20:51:35.014651"], ["referral_code", "74LVqXDEXKjwoXAJh1A8Uzgt"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$dmBLfkymSMjSDoqi.PqQGuy/iRJpT12nguUUXgYu93nD.TWf5sap6"], ["created_at", "2021-02-08 20:51:35.020161"], ["updated_at", "2021-02-08 20:51:35.020161"], ["referral_code", "qRp3RQgPpQuoB2tuJNtPJoGf"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 322], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$mDGbEyILL//fAIB0vEa4FO6tNyex8xNe/OlC9JS0XkLi1a.avmSte"], ["created_at", "2021-02-08 20:51:35.033108"], ["updated_at", "2021-02-08 20:51:35.033108"], ["referral_code", "sgqbzCbyTq6yAfQF7WiY3imL"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$vIZphrO4gqkwlNXfACBhROpc6sM2Llvz4XUn6/zwPHBI1ahhijvCa"], ["created_at", "2021-02-08 20:51:35.040493"], ["updated_at", "2021-02-08 20:51:35.040493"], ["referral_code", "EBB6Y4vFbRn5TuA2e4dvVq53"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 324], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "sgqbzCbyTq6yAfQF7WiY3imL"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 324], ["LIMIT", 1]]
  [1m[36mUser Update (1.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:51:35.049334"], ["referrer_id", 323], ["id", 324]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$imanj7YV779Jn9hsUQYVW.tehHYq8D7DX.lXso8rLyNtIWKXC8yke"], ["created_at", "2021-02-08 20:56:55.035459"], ["updated_at", "2021-02-08 20:56:55.035459"], ["referral_code", "y8kvjRK9UiCrUJE1uJvKkTfd"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$OkYUCqM7RdPhYsaWtjhi5es72tGISpSfbBkUNLyXBILzjBuSue4Gi"], ["created_at", "2021-02-08 20:56:55.040523"], ["updated_at", "2021-02-08 20:56:55.040523"], ["referral_code", "NrTYxCMWanzVmt2ad81w5dQQ"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email1@gmail.com"], ["id", 325], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:56:55.045650"], ["referrer_id", 326], ["id", 325]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 326], ["LIMIT", 1]]
  [1m[36mUser Update All (1.1ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 325]]
  [1m[36mUser Update All (0.6ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 326]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 326], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email3@gmail.com"], ["password_digest", "$2a$04$AZJbkb8m0M/iprMwpkfBluYAN4NklpoZawj1Jv1ret79YOM4EGi46"], ["created_at", "2021-02-08 20:56:55.109159"], ["updated_at", "2021-02-08 20:56:55.109159"], ["referral_code", "RKEzUMT5Ubh6HWQd2BwqrNkm"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email4@gmail.com"], ["password_digest", "$2a$04$O7JYvTwEcDznyz9RV2QPvOT4L/fhsE/x2fzpgzxZijnW5TtX.oHCu"], ["created_at", "2021-02-08 20:56:55.112480"], ["updated_at", "2021-02-08 20:56:55.112480"], ["referral_code", "g3rhqCC8avA3qCfeHdUEsRei"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email3@gmail.com"], ["id", 327], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:56:55.114629"], ["referrer_id", 328], ["id", 327]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 327], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 328], ["LIMIT", 1]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 327]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 328]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 327], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email5@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email5@gmail.com"], ["password_digest", "$2a$04$jYDbMfRL/eTkZESsDSFrleIiOn6PQFhRwN7EP0HMdaIikLgj9OY32"], ["created_at", "2021-02-08 20:56:55.125421"], ["updated_at", "2021-02-08 20:56:55.125421"], ["referral_code", "Q2CfmZMG7fKkgWQWZdFWk4MC"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email6@gmail.com"], ["password_digest", "$2a$04$kLW4pOeDKt7ucljjg94T.e2tlEILJa60Tz6qpKVVzkeOIzwum5WuK"], ["created_at", "2021-02-08 20:56:55.129155"], ["updated_at", "2021-02-08 20:56:55.129155"], ["referral_code", "TGJD68RdAvrQQfx2g7rPRncx"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email5@gmail.com"], ["id", 329], ["LIMIT", 1]]
  [1m[36mUser Update (1.0ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:56:55.132064"], ["referrer_id", 330], ["id", 329]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email6@gmail.com"], ["id", 330], ["LIMIT", 1]]
  [1m[36mUser Update (1.0ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:56:55.139422"], ["referral_points", 5], ["id", 330]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 330], ["LIMIT", 1]]
  [1m[36mUser Update All (0.9ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 329]]
  [1m[36mUser Update All (1.1ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 330]]
  [1m[36mUser Update All (0.6ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 330]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 330]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 330], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email7@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email7@gmail.com"], ["password_digest", "$2a$04$.zrVGVejNRfHtoeaBazQQ.NU0yRJ49h6FJEwuXA.arWeOP08mUGda"], ["created_at", "2021-02-08 20:56:55.156311"], ["updated_at", "2021-02-08 20:56:55.156311"], ["referral_code", "ZR45RixPdXqkZSW1tcD2HS7o"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email8@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email8@gmail.com"], ["password_digest", "$2a$04$OhULCYa7/DMeuCFLTn91u.d8zpE0XRIcuckIdDaoBnxc2iLIhuZvK"], ["created_at", "2021-02-08 20:56:55.160709"], ["updated_at", "2021-02-08 20:56:55.160709"], ["referral_code", "XExAhkWS56Yc4gWm7CXyu2Vh"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email7@gmail.com"], ["id", 331], ["LIMIT", 1]]
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:56:55.164441"], ["referrer_id", 332], ["id", 331]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email8@gmail.com"], ["id", 332], ["LIMIT", 1]]
  [1m[36mUser Update (1.0ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:56:55.168921"], ["referral_points", 5], ["id", 332]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 332], ["LIMIT", 1]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 331]]
  [1m[36mUser Update All (0.6ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 332]]
  [1m[36mUser Update All (0.8ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 332]]
  [1m[36mUser Update All (0.9ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 332]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 332], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email9@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email9@gmail.com"], ["password_digest", "$2a$04$AuHs0CwrRbX4tJ4VtYhVTeWASerM5hvJb4XBmnfdLZuAT9TuZIPGm"], ["created_at", "2021-02-08 20:56:55.186417"], ["updated_at", "2021-02-08 20:56:55.186417"], ["referral_code", "a2grD64uvEe4XkE1fz6aWBbD"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email10@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email10@gmail.com"], ["password_digest", "$2a$04$o5OpbO42RfBpKq5PPpZh5O3v6NLumK6PTCxhZEmrYh0FKdLwes7Pq"], ["created_at", "2021-02-08 20:56:55.190408"], ["updated_at", "2021-02-08 20:56:55.190408"], ["referral_code", "DvdvEti9MDTPbRiFBHZKp9Tn"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email9@gmail.com"], ["id", 333], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:56:55.193367"], ["referrer_id", 334], ["id", 333]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 334], ["LIMIT", 1]]
  [1m[36mUser Update All (0.6ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 333]]
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 334]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 334], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$bE9iXQCWhL61iQ6ZGwawWuwtF1aYZZpJY067NpTkvlqbjVUpaLZmS"], ["created_at", "2021-02-08 20:56:55.222051"], ["updated_at", "2021-02-08 20:56:55.222051"], ["referral_code", "njbDwpEgcV7nXbGPDmN8oXoo"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 335], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email11@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email11@gmail.com"], ["password_digest", "$2a$04$2orPN4VOH9PfqyPIurYwvuwH6NPNGYWsIWuStUhLLGOn1OkgWF50O"], ["created_at", "2021-02-08 20:56:55.231778"], ["updated_at", "2021-02-08 20:56:55.231778"], ["referral_code", "UBxsBUsX9Aka1cGD56KFx1gE"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$aUlv3/lFWI7JLuC8yo4KguwpRhyPP3PzHUHC2cfN8NZj./6N8IEdO"], ["created_at", "2021-02-08 20:56:55.239890"], ["updated_at", "2021-02-08 20:56:55.239890"], ["referral_code", "Bfh4TSxpEULZi24s3fRgRgZg"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 337], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email12@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email12@gmail.com"], ["password_digest", "$2a$04$qU2kSZevuDXcuODsi78GdO6NKqK2sPKrtnvhLysN/FM8M7M5NnShi"], ["created_at", "2021-02-08 20:56:55.253087"], ["updated_at", "2021-02-08 20:56:55.253087"], ["referral_code", "94FEcVURtnpNrcvaaiXYiVj8"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$XNt2vPgw.qshouThFw9KLeVKBe64qVka/nT.OOt0C0bb84gB6dKgm"], ["created_at", "2021-02-08 20:56:55.258040"], ["updated_at", "2021-02-08 20:56:55.258040"], ["referral_code", "NYR5sUaSmJ6zJryiC5oCHQrt"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 339], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "94FEcVURtnpNrcvaaiXYiVj8"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 339], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:56:55.264940"], ["referrer_id", 338], ["id", 339]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "referral_code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2021-02-08 20:56:55.320887"], ["updated_at", "2021-02-08 20:56:55.320887"], ["referral_code", "V3DLzPmpL6tCmvNEyLKLMQ3w"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "dummy value"], ["updated_at", "2021-02-08 20:56:55.322549"], ["id", 340]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "dummy value"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "DUMMY VALUE"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email13@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email13@gmail.com"], ["password_digest", "$2a$04$eJ.r0Po0/BpZLUpR6fmjrexFJHI8ucfcRUcyFZNM0pqws.Sxe7ZES"], ["created_at", "2021-02-08 20:56:55.341925"], ["updated_at", "2021-02-08 20:56:55.341925"], ["referral_code", "1XpT7SBYXcx4An7LD3LxJDAs"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 23:56:55 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email13@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email13@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email13@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email13@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 13ms (Views: 0.5ms | ActiveRecord: 1.9ms)
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email14@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email14@gmail.com"], ["password_digest", "$2a$04$YSNFTI9K0B5cNQ2Cdt8ynOc1wMosww.0hs6gKxGtB8yVkYnW1luYC"], ["created_at", "2021-02-08 20:56:55.385762"], ["updated_at", "2021-02-08 20:56:55.385762"], ["referral_code", "6FGjgPm6dTMQhjaEeeqqgQSw"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 23:56:55 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email14@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email14@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email14@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email14@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 7ms (Views: 0.3ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email15@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email15@gmail.com"], ["password_digest", "$2a$04$7FAggd1jByFV5vjgeQEeZepnUcHtXcQ0adyRPs/FHqlCqOdQa0IaS"], ["created_at", "2021-02-08 20:56:55.406207"], ["updated_at", "2021-02-08 20:56:55.406207"], ["referral_code", "Cb37Vy2hiibMDKJR4SWfPexa"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email16@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email16@gmail.com"], ["password_digest", "$2a$04$yuNvV8.93vJGoFAROXZvEOKbQVRz2lut1WAZoLBbv4Na/9qw.72MC"], ["created_at", "2021-02-08 20:56:55.414877"], ["updated_at", "2021-02-08 20:56:55.414877"], ["referral_code", "7ZMHMGa1KiaxhcC2gniS77q6"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 23:56:55 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email15@gmail.com", "password"=>"[FILTERED]", "referred_by"=>"7ZMHMGa1KiaxhcC2gniS77q6"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email15@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email15@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email15@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 10ms (Views: 0.4ms | ActiveRecord: 1.8ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 23:56:55 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$k1ZHHGQcshQY1bS5V3XTBOVzVCmEaqtB7Tjw5qTQkO0bLhkLqlWOO"], ["created_at", "2021-02-08 20:56:55.448394"], ["updated_at", "2021-02-08 20:56:55.448394"], ["referral_code", "Lamp3z2CLQtRMMSHZ5aiYEdm"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 345], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 345], ["LIMIT", 1]]
Completed 200 OK in 22ms (Views: 0.7ms | ActiveRecord: 1.5ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 23:56:55 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$TUzhvr/7zjgpra7F49ASHeu8Y.LpWh5RuVtJbU0KasryPIxNQI77O"], ["created_at", "2021-02-08 20:56:55.478455"], ["updated_at", "2021-02-08 20:56:55.478455"], ["referral_code", "EhAogYAuTsd9b5EKiJ29fpas"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 346], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 346], ["LIMIT", 1]]
Completed 200 OK in 11ms (Views: 0.8ms | ActiveRecord: 2.7ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email17@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email17@gmail.com"], ["password_digest", "$2a$04$m6BufYrBUQfHz4eI9aheU.n8IClDnL7Dpv0nIgcFWyHOxf7Mi8wj6"], ["created_at", "2021-02-08 20:56:55.490778"], ["updated_at", "2021-02-08 20:56:55.490778"], ["referral_code", "FLagrw4T7Y7a5dkx1XH4AAUH"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-08 23:56:55 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]", "referred_by"=>"FLagrw4T7Y7a5dkx1XH4AAUH"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$fnEnW3dATNrnnhdUbUDB9eKOvymYV9biriNtM9IykbBCvo6MHgw9C"], ["created_at", "2021-02-08 20:56:55.498088"], ["updated_at", "2021-02-08 20:56:55.498088"], ["referral_code", "7wawtL2AeaVwLtuXxB8G8P9e"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 348], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "FLagrw4T7Y7a5dkx1XH4AAUH"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 348], ["LIMIT", 1]]
  [1m[36mUser Update (1.1ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 20:56:55.506445"], ["referrer_id", 347], ["id", 348]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 348], ["LIMIT", 1]]
Completed 200 OK in 19ms (Views: 0.5ms | ActiveRecord: 5.9ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 23:56:55 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 23:56:55 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email18@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email18@gmail.com"], ["password_digest", "$2a$04$03TgUhuS/3nntWrfheU0q.Gj.sqQ8vqZN9fy/77FsfZjeAAXj3G7C"], ["created_at", "2021-02-08 20:56:55.542054"], ["updated_at", "2021-02-08 20:56:55.542054"], ["referral_code", "j6PQ4yuRgKuzAx5CKHA7ra3C"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 23:56:55 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email18@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email18@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 6ms (Views: 0.4ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email19@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email19@gmail.com"], ["password_digest", "$2a$04$W45A/1kz0z7A1oz3Sm8crug3sQLSGp2kyGpQjRhIWvp9J77FFoyE."], ["created_at", "2021-02-08 20:56:55.558205"], ["updated_at", "2021-02-08 20:56:55.558205"], ["referral_code", "JF4eRKqCU8QjmqVAnHQLDkdS"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 23:56:55 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email19@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email19@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/users" for 127.0.0.1 at 2021-02-08 23:56:55 +0300
Processing by UsersController#index as HTML
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email20@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email20@gmail.com"], ["password_digest", "$2a$04$.9LT0AEM03nj3FXwY1DiWuJzxL2q5gov43no5OA/7dYVfK9JczNxq"], ["created_at", "2021-02-08 20:56:55.582449"], ["updated_at", "2021-02-08 20:56:55.582449"], ["referral_code", "hVCecVbmpCt3St6CVzzLCnoM"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 23:56:55 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email20@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email20@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.3ms)
Started GET "/users" for 127.0.0.1 at 2021-02-08 23:56:55 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 351], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.5ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email21@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email21@gmail.com"], ["password_digest", "$2a$04$jvK6GTJjGz7bz88y9Pdm.eQJjgBunrawcsVpDzMIeyi7dl5h/CtBi"], ["created_at", "2021-02-08 20:56:55.600995"], ["updated_at", "2021-02-08 20:56:55.600995"], ["referral_code", "T6EWiHohDHvR4gXGS5VETdLB"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-08 23:56:55 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email21@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email21@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.3ms)
Started GET "/users" for 127.0.0.1 at 2021-02-08 23:56:55 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 352], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "referral_code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2021-02-08 21:03:00.956954"], ["updated_at", "2021-02-08 21:03:00.956954"], ["referral_code", "2t4Y5TqrPMngv4Q8udGeXcGd"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "dummy value"], ["updated_at", "2021-02-08 21:03:00.960038"], ["id", 353]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "dummy value"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "DUMMY VALUE"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/users" for 127.0.0.1 at 2021-02-09 00:03:01 +0300
Processing by UsersController#index as HTML
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$bFAdXEV/GdWwRKdAeudd0.SPAV.lLQP9pyCxPg71bEVcJlQ2ZhXdu"], ["created_at", "2021-02-08 21:03:01.052862"], ["updated_at", "2021-02-08 21:03:01.052862"], ["referral_code", "JgXh8VCwvfnGLM1D1fJ2a6vb"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 00:03:01 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email1@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.3ms)
Started GET "/users" for 127.0.0.1 at 2021-02-09 00:03:01 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 354], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$9JyHTmIsRJeLeCPw7kv8p.buz3aGXaSDeCGFDdgfo9hB.PmR8JkUS"], ["created_at", "2021-02-08 21:03:01.073350"], ["updated_at", "2021-02-08 21:03:01.073350"], ["referral_code", "rTiUzYsUkZVBK7SGmDErmcKE"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 00:03:01 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email2@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.3ms)
Started GET "/users" for 127.0.0.1 at 2021-02-09 00:03:01 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 355], ["LIMIT", 1]]
Completed 200 OK in 1ms (Views: 0.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email3@gmail.com"], ["password_digest", "$2a$04$KK1L6UDbEU0ONiVw7SHu5egKGVtp6sYN2Ew0VBJgEJ0i41tZm/4/."], ["created_at", "2021-02-08 21:03:01.084215"], ["updated_at", "2021-02-08 21:03:01.084215"], ["referral_code", "gPJHvXdn1khiY31GBqtPrZzd"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email4@gmail.com"], ["password_digest", "$2a$04$UwYaBQW9BsFvRbt.NwiE.eDomgSbN8TjXkuNETU83Joyw2isW8yq."], ["created_at", "2021-02-08 21:03:01.087649"], ["updated_at", "2021-02-08 21:03:01.087649"], ["referral_code", "Dw9wj9Q48D65Qi3Af1DkAdLy"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email3@gmail.com"], ["id", 356], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:03:01.089776"], ["referrer_id", 357], ["id", 356]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 357], ["LIMIT", 1]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 356]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 357]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 357], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email5@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email5@gmail.com"], ["password_digest", "$2a$04$6qR1w4LH3lS4mnKz7/DezeDvEyXOWfuD5By6gH5VBtq1TLX28ZoAC"], ["created_at", "2021-02-08 21:03:01.098956"], ["updated_at", "2021-02-08 21:03:01.098956"], ["referral_code", "MrgySs5hBXvZJES3bNaDihAd"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email6@gmail.com"], ["password_digest", "$2a$04$4g02mupKOVJgagIeXmKL8.aWDoAVq43unumezsF.61MzN8sC2TLfm"], ["created_at", "2021-02-08 21:03:01.102082"], ["updated_at", "2021-02-08 21:03:01.102082"], ["referral_code", "5vvidsenzSar3Cxu9Au35N2p"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email5@gmail.com"], ["id", 358], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:03:01.104011"], ["referrer_id", 359], ["id", 358]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 359], ["LIMIT", 1]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 358]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 359]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email7@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email7@gmail.com"], ["password_digest", "$2a$04$xfC.3F.3PqwDQ2waepYZk.J1Fp3q4uRdf8WKYxxtZrSI4g7/OHjK6"], ["created_at", "2021-02-08 21:03:01.113646"], ["updated_at", "2021-02-08 21:03:01.113646"], ["referral_code", "ugC18i2DjnB6wm5yABLxFFsh"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email8@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email8@gmail.com"], ["password_digest", "$2a$04$vG5gTYnGohcOPDSTu62Tnujh82QCyobArfBgt2c5NTkD8FlG4wVi6"], ["created_at", "2021-02-08 21:03:01.117060"], ["updated_at", "2021-02-08 21:03:01.117060"], ["referral_code", "Xu8gTUtcJwJZBu6KBbqUhQLr"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email7@gmail.com"], ["id", 360], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:03:01.119098"], ["referrer_id", 361], ["id", 360]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 361], ["LIMIT", 1]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 360]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 361]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 361], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email9@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email9@gmail.com"], ["password_digest", "$2a$04$LRYKONxt5hiM19fgS0xHT.68CuiA3D6PSkJkdKOXIcAI6Zkso75Bm"], ["created_at", "2021-02-08 21:03:01.126058"], ["updated_at", "2021-02-08 21:03:01.126058"], ["referral_code", "tnLfB73cCkvn463cgU65CboS"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email10@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email10@gmail.com"], ["password_digest", "$2a$04$WW.S3G.ASyNA.xbWAEdT9eHa/EcxuijBjS8fytZlugvTpi.zFItPC"], ["created_at", "2021-02-08 21:03:01.129761"], ["updated_at", "2021-02-08 21:03:01.129761"], ["referral_code", "4eSzA2nc3s1FW9XmwhzACmfT"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email9@gmail.com"], ["id", 362], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:03:01.131765"], ["referrer_id", 363], ["id", 362]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email10@gmail.com"], ["id", 363], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:03:01.133545"], ["referral_points", 5], ["id", 363]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 363], ["LIMIT", 1]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 362]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 363]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 363]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 363]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 363], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email11@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email11@gmail.com"], ["password_digest", "$2a$04$zUP.unwqKFzlEmYXaSB.buSrhF2x/kQuUxsS0m6gLWH5QO/MLLp0m"], ["created_at", "2021-02-08 21:03:01.141090"], ["updated_at", "2021-02-08 21:03:01.141090"], ["referral_code", "7Rav49Ubytdyo72CrD7tk4ip"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email12@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email12@gmail.com"], ["password_digest", "$2a$04$ggkrM0GAjuTmd2ItDuisCO7bWOWnGaIn2X8xMkj2hdD2NXOjHu43e"], ["created_at", "2021-02-08 21:03:01.144237"], ["updated_at", "2021-02-08 21:03:01.144237"], ["referral_code", "aHkaQaMSPHzB2Qipz9WA1osH"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email11@gmail.com"], ["id", 364], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:03:01.147412"], ["referrer_id", 365], ["id", 364]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email12@gmail.com"], ["id", 365], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:03:01.149728"], ["referral_points", 5], ["id", 365]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 365], ["LIMIT", 1]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 364]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 365]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 365]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 365]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 365], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$ZufXEqqChLuyV9PBp9hH7uJZwNVGyz/tB5xQ4CZbjkzd9ICdlvqw2"], ["created_at", "2021-02-08 21:03:01.169070"], ["updated_at", "2021-02-08 21:03:01.169070"], ["referral_code", "AcUiegEfb69tqg3PDYbVxTuH"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 366], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email13@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email13@gmail.com"], ["password_digest", "$2a$04$ha69EgE9FjS18hjfivm7SuwW5qMZk3tq5tOKI6h5.p8/BFbSAK7fG"], ["created_at", "2021-02-08 21:03:01.175873"], ["updated_at", "2021-02-08 21:03:01.175873"], ["referral_code", "fgmKKbKFAFisdyXaVRW6BftB"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$0nMftBtug5TP9s35lrsetuUmo7boDS5GVDCHGGZTvZrHPQSsRtWZe"], ["created_at", "2021-02-08 21:03:01.180702"], ["updated_at", "2021-02-08 21:03:01.180702"], ["referral_code", "YW3dLoPQUyvFSZ5DyzgWfLAM"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 368], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "fgmKKbKFAFisdyXaVRW6BftB"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 368], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:03:01.184347"], ["referrer_id", 367], ["id", 368]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email14@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email14@gmail.com"], ["password_digest", "$2a$04$9.Va0R9GO9rqkTpSSmfw/O5xgUXTjxlCefg3.d9NpieSdq6FI/rwK"], ["created_at", "2021-02-08 21:03:01.189848"], ["updated_at", "2021-02-08 21:03:01.189848"], ["referral_code", "Thk1KdVHopup6Fsup4LCjfWZ"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$RfBkeT562CyNd57oh0VJ/.lzBCFSLcXshEK79d414bNFSwir7w4wW"], ["created_at", "2021-02-08 21:03:01.193719"], ["updated_at", "2021-02-08 21:03:01.193719"], ["referral_code", "iyjBptbDFcaJuibpWBVgbae7"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 370], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email15@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email15@gmail.com"], ["password_digest", "$2a$04$HsDtev3k6JRB3vhbLUJr4ema8/eeiJ5L7FGVy4CYfdFy3n/Qc21Fu"], ["created_at", "2021-02-08 21:03:01.199920"], ["updated_at", "2021-02-08 21:03:01.199920"], ["referral_code", "U8kZuDRj6h9kq8RCbNNAZ7WK"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 00:03:01 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email15@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email15@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email15@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email15@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 5ms (Views: 0.2ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email16@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email16@gmail.com"], ["password_digest", "$2a$04$e6jIBHieJ7Q4zabWgz/w7eJhqHnU3LZBMFIc79Tbpu6AEEemvMd9i"], ["created_at", "2021-02-08 21:03:01.211496"], ["updated_at", "2021-02-08 21:03:01.211496"], ["referral_code", "GkdLFAUHdJydUNNn8zEz4L1x"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 00:03:01 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email16@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email16@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email16@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email16@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 5ms (Views: 0.1ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email17@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email17@gmail.com"], ["password_digest", "$2a$04$mv3zDcnfMUi.kFRzL/Cf/.EPpQwP.0bTtUH3mxkRjSTYjpPPtRNte"], ["created_at", "2021-02-08 21:03:01.232625"], ["updated_at", "2021-02-08 21:03:01.232625"], ["referral_code", "o2xELGSvM8jFktM9xPzhNGiJ"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email18@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email18@gmail.com"], ["password_digest", "$2a$04$BR7ui1JelHUfOsKttxlTreCCFFe45tB7maOPVC3SZ.4/fbCrsIj5G"], ["created_at", "2021-02-08 21:03:01.235960"], ["updated_at", "2021-02-08 21:03:01.235960"], ["referral_code", "9CdMdAwdfCw9wjYGizB12THW"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 00:03:01 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email17@gmail.com", "password"=>"[FILTERED]", "referred_by"=>"9CdMdAwdfCw9wjYGizB12THW"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email17@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email17@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email17@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 7ms (Views: 0.2ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 00:03:01 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$X3Vj2pl.JlI9qmVmLYOW1uNyqjNiwgbTHxMBAm5Ku9VZUHqQo16a6"], ["created_at", "2021-02-08 21:03:01.255530"], ["updated_at", "2021-02-08 21:03:01.255530"], ["referral_code", "kCAvaGFocw14vt6h6CxYjm7D"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 375], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 375], ["LIMIT", 1]]
Completed 200 OK in 6ms (Views: 0.3ms | ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 00:03:01 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$N2//COAMF1MaAp48aiS/0OC2jecROSKyzqedg6sdsxXIQ6tKKHm0m"], ["created_at", "2021-02-08 21:03:01.265226"], ["updated_at", "2021-02-08 21:03:01.265226"], ["referral_code", "WWMjCSuTcML8gKsFz4robWdY"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 376], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 376], ["LIMIT", 1]]
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 1.4ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email19@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email19@gmail.com"], ["password_digest", "$2a$04$V9tYwMKz/Gjj99pe5b11Ce5WrJKRZovlF9Wy2bcuwgpg5Bn9H0oB."], ["created_at", "2021-02-08 21:03:01.271926"], ["updated_at", "2021-02-08 21:03:01.271926"], ["referral_code", "cY4To9dc6vHta3E9wyXA1UgN"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 00:03:01 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]", "referred_by"=>"cY4To9dc6vHta3E9wyXA1UgN"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$4897P8rFL/.ZagySYPC.6e78gmhzQQqSh9yHETDwpO9g0iPvnnqFK"], ["created_at", "2021-02-08 21:03:01.277772"], ["updated_at", "2021-02-08 21:03:01.277772"], ["referral_code", "cvVRkYjdmUgyfQ8Mb81YzjfL"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 378], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "cY4To9dc6vHta3E9wyXA1UgN"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 378], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:03:01.281720"], ["referrer_id", 377], ["id", 378]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 378], ["LIMIT", 1]]
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 2.5ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 00:03:01 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 00:03:01 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email20@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email20@gmail.com"], ["password_digest", "$2a$04$cuXaSR9l.74gxZ9hCAEVzOgSzDYQ7xZrjvBjo3SX5SW5dy8LNBxs."], ["created_at", "2021-02-08 21:03:01.294518"], ["updated_at", "2021-02-08 21:03:01.294518"], ["referral_code", "jsjVXAm5zgb2kEztKdqQ1QRr"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 00:03:01 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email20@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email20@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email21@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email21@gmail.com"], ["password_digest", "$2a$04$Nf7KBbaKyvyHgW0TlVgXKuWzRCPgfUty7XdRiJgJXVyq9DKUCdpW6"], ["created_at", "2021-02-08 21:03:01.302896"], ["updated_at", "2021-02-08 21:03:01.302896"], ["referral_code", "zfFV8mQAW5TyXKTX8jX9Gfz7"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 00:03:01 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email21@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email21@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$t/vvk8AlgVxmztGHe0R6lOOSv79wmne4MJ55vrncBTs4fIS6bcgaG"], ["created_at", "2021-02-08 21:05:30.129026"], ["updated_at", "2021-02-08 21:05:30.129026"], ["referral_code", "FicTPj3TYHnPUubj6NBLeGY5"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$GixR.rWjlYJGbrwvUrKOUuzo7lltlX/dPVyWQ2nxVcdB45n6E/cQS"], ["created_at", "2021-02-08 21:05:30.134038"], ["updated_at", "2021-02-08 21:05:30.134038"], ["referral_code", "KhWPwAkkZRbkDZw2degaHVdP"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email1@gmail.com"], ["id", 381], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:05:30.138977"], ["referrer_id", 382], ["id", 381]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 382], ["LIMIT", 1]]
  [1m[36mUser Update All (0.6ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 381]]
  [1m[36mUser Update All (1.2ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 382]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 382], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email3@gmail.com"], ["password_digest", "$2a$04$H3CADdPhkywZ/ABiG6T9w.Qqnh4KrWYGEaLJSd9.6nTfObFoLRlOW"], ["created_at", "2021-02-08 21:05:30.210534"], ["updated_at", "2021-02-08 21:05:30.210534"], ["referral_code", "76W5GqWUYoUCRxzcVhhApXow"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email4@gmail.com"], ["password_digest", "$2a$04$aVu1Hylp7XhnhgNulvzWueE.BG9hGjse/WvF85/LqeFifI8Pf9r8i"], ["created_at", "2021-02-08 21:05:30.215213"], ["updated_at", "2021-02-08 21:05:30.215213"], ["referral_code", "93DvwP84BHjQd3hskYHPHxBd"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email3@gmail.com"], ["id", 383], ["LIMIT", 1]]
  [1m[36mUser Update (1.1ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:05:30.219793"], ["referrer_id", 384], ["id", 383]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 383], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 384], ["LIMIT", 1]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 383]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 384]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 383], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email5@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email5@gmail.com"], ["password_digest", "$2a$04$RGa6u2wrqOB7YptuQ.lRAebrqWveE16I.58nkn0QC/.JWLbFNfTX6"], ["created_at", "2021-02-08 21:05:30.236075"], ["updated_at", "2021-02-08 21:05:30.236075"], ["referral_code", "X4G7arFF4hx4dN4cdiZwLhaT"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email6@gmail.com"], ["password_digest", "$2a$04$mIMtA1i78oZGYt2itp2jF.0M4z8RuX7cs7Ru4O/L7Z1I9SGiHMG4y"], ["created_at", "2021-02-08 21:05:30.240492"], ["updated_at", "2021-02-08 21:05:30.240492"], ["referral_code", "GgAFbWYeE5zNccoyWX6XJLhi"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email5@gmail.com"], ["id", 385], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:05:30.244380"], ["referrer_id", 386], ["id", 385]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email6@gmail.com"], ["id", 386], ["LIMIT", 1]]
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:05:30.250604"], ["referral_points", 5], ["id", 386]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 386], ["LIMIT", 1]]
  [1m[36mUser Update All (1.1ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 385]]
  [1m[36mUser Update All (1.1ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 386]]
  [1m[36mUser Update All (0.9ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 386]]
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 386]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 386], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email7@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email7@gmail.com"], ["password_digest", "$2a$04$p3ojrl3RHBqXgSpGaSsIBOX2Gl9OaxjNTt2phtg5.pmW6hp3eW2Ya"], ["created_at", "2021-02-08 21:05:30.267484"], ["updated_at", "2021-02-08 21:05:30.267484"], ["referral_code", "E4LYMG1C76wFAwgWEVaPZ8mh"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email8@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email8@gmail.com"], ["password_digest", "$2a$04$IDCJtp9GI3q4QECG564Om.DxkJs7863kraU7Uzwh2I8eD2HwHNmR2"], ["created_at", "2021-02-08 21:05:30.272094"], ["updated_at", "2021-02-08 21:05:30.272094"], ["referral_code", "pbDk7svEog4fPskDMABEKzcJ"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email7@gmail.com"], ["id", 387], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:05:30.276251"], ["referrer_id", 388], ["id", 387]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email8@gmail.com"], ["id", 388], ["LIMIT", 1]]
  [1m[36mUser Update (1.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:05:30.278597"], ["referral_points", 5], ["id", 388]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 388], ["LIMIT", 1]]
  [1m[36mUser Update All (0.6ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 387]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 388]]
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 388]]
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 388]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 388], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email9@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email9@gmail.com"], ["password_digest", "$2a$04$8mH.lvhGw8YRLVwQ28x2ue0T2WSQLlOeP3gXDTepI7jM0n1Vqd7vO"], ["created_at", "2021-02-08 21:05:30.297626"], ["updated_at", "2021-02-08 21:05:30.297626"], ["referral_code", "vDvmxJpWot2ZfSCgGLDoD94h"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email10@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email10@gmail.com"], ["password_digest", "$2a$04$OAHsL2fbdpmm9atmONg7R.zOmZ/InCO7nWYb89PEcuk5CpQeInwIO"], ["created_at", "2021-02-08 21:05:30.301518"], ["updated_at", "2021-02-08 21:05:30.301518"], ["referral_code", "DSWtuL3wvKNdNjxoHagJtFwz"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email9@gmail.com"], ["id", 389], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:05:30.305360"], ["referrer_id", 390], ["id", 389]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 390], ["LIMIT", 1]]
  [1m[36mUser Update All (0.6ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 389]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 390]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 390], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 00:05:30 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 3ms (Views: 0.3ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 00:05:30 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email11@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email11@gmail.com"], ["password_digest", "$2a$04$TIRfb9LGBS6EPIvDb4AnIeQaKWKRMl3X/Bv0/9PevP0sJcROIXBiK"], ["created_at", "2021-02-08 21:05:30.350497"], ["updated_at", "2021-02-08 21:05:30.350497"], ["referral_code", "FiBAWwqc9Rpohy58iKYU25Jn"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 00:05:30 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email11@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email11@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 6ms (Views: 0.5ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email12@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email12@gmail.com"], ["password_digest", "$2a$04$DsQiFzgxD295Ldor0Q07bu8Hz9MVea7Ht.BS5ZbUc1/Gb.ZBw2Yri"], ["created_at", "2021-02-08 21:05:30.366168"], ["updated_at", "2021-02-08 21:05:30.366168"], ["referral_code", "hzsBN6d6uwkAWLo5FV9M8hWi"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 00:05:30 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email12@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email12@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email13@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email13@gmail.com"], ["password_digest", "$2a$04$rhtn2iNa/.C3UU7g9bMgdewxxeJ5tUp4Nyk.RyhnxtFhMuLkOatdq"], ["created_at", "2021-02-08 21:05:30.378482"], ["updated_at", "2021-02-08 21:05:30.378482"], ["referral_code", "Yzs4ugkVPoAGptwKRXNZxJRV"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 00:05:30 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email13@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email13@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.6ms)
Started GET "/users" for 127.0.0.1 at 2021-02-09 00:05:30 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 393], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email14@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email14@gmail.com"], ["password_digest", "$2a$04$0Bd5hKmHeAWllkweqTSroudsB6GhrI.LeuV.BIn/VpP6ac.KPtCIm"], ["created_at", "2021-02-08 21:05:30.403570"], ["updated_at", "2021-02-08 21:05:30.403570"], ["referral_code", "p4B9LbTPNn2655rba8hGPQ4z"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 00:05:30 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email14@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email14@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.5ms)
Started GET "/users" for 127.0.0.1 at 2021-02-09 00:05:30 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 394], ["LIMIT", 1]]
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/users" for 127.0.0.1 at 2021-02-09 00:05:30 +0300
Processing by UsersController#index as HTML
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$s8OFvuupjXzDycTJNWlJ6O/J5Aj6DaKDsF8MPAadHrWrSPcYrWlna"], ["created_at", "2021-02-08 21:05:30.441718"], ["updated_at", "2021-02-08 21:05:30.441718"], ["referral_code", "kUhes4BqBjGo3asM4mHUXQZR"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 395], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email15@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email15@gmail.com"], ["password_digest", "$2a$04$IObaFtKetd8xNRM07PJMKeXj27R5gGQWwjbl9CWpsEGDaPChuZ/fi"], ["created_at", "2021-02-08 21:05:30.458618"], ["updated_at", "2021-02-08 21:05:30.458618"], ["referral_code", "Vj2eKmREvwCkwYyTfHAb52Hn"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$0/lqTceBM.ZKwhPSdabZGu3MEgZPi42geaHArJ2nhF2lyLY1.z2oW"], ["created_at", "2021-02-08 21:05:30.465591"], ["updated_at", "2021-02-08 21:05:30.465591"], ["referral_code", "cThsSoApEMpnWLtLhi4JK1KU"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 397], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "Vj2eKmREvwCkwYyTfHAb52Hn"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 397], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:05:30.470646"], ["referrer_id", 396], ["id", 397]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email16@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email16@gmail.com"], ["password_digest", "$2a$04$0WBwpHxM8t7EHxEFr5iTuOmFeiwjPmUsOSs2gvyCFoUaCXZFpPmBy"], ["created_at", "2021-02-08 21:05:30.480346"], ["updated_at", "2021-02-08 21:05:30.480346"], ["referral_code", "hBmSyhzaX7CM9DxWBW6vvert"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$6NWNFcU2Sb3zJmQL8RJeeuoBvWporxpWXgGtueP3z9tONHbhnLcQm"], ["created_at", "2021-02-08 21:05:30.490403"], ["updated_at", "2021-02-08 21:05:30.490403"], ["referral_code", "Nf4fTzZ55j1YbADS8j9pzegA"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 399], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "referral_code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2021-02-08 21:05:30.505112"], ["updated_at", "2021-02-08 21:05:30.505112"], ["referral_code", "hjuxnvxLid3SLDqXYuh1xKQk"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "dummy value"], ["updated_at", "2021-02-08 21:05:30.508022"], ["id", 400]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "dummy value"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "DUMMY VALUE"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email17@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email17@gmail.com"], ["password_digest", "$2a$04$hjYYSEqzsm2n.Ih3HeLNl.4GHq/3qc4aLpIgqqmKUDFyqu4aTpH02"], ["created_at", "2021-02-08 21:05:30.570549"], ["updated_at", "2021-02-08 21:05:30.570549"], ["referral_code", "kWossmzJeSGuU8tm2ufpTzqu"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 00:05:30 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email17@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email17@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email17@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email17@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 6ms (Views: 0.2ms | ActiveRecord: 0.9ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email18@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email18@gmail.com"], ["password_digest", "$2a$04$whGN8LULKLN0OtGPiiNB7Oggqu/W6bUvksPdAVL1NdM/jCERkd2aa"], ["created_at", "2021-02-08 21:05:30.609563"], ["updated_at", "2021-02-08 21:05:30.609563"], ["referral_code", "GvJ1f1HU2mb7wnMUXwKoqZ2x"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 00:05:30 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email18@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email18@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email18@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email18@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 10ms (Views: 0.4ms | ActiveRecord: 1.7ms)
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email19@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email19@gmail.com"], ["password_digest", "$2a$04$2x7VivgU.HlyLPkBxZgInumD078ZGFS/C5pMdLCV/KXLfY3GTOFUS"], ["created_at", "2021-02-08 21:05:30.630454"], ["updated_at", "2021-02-08 21:05:30.630454"], ["referral_code", "CRvD1YzaqUj42Z6duXHBUQvY"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email20@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email20@gmail.com"], ["password_digest", "$2a$04$Clkq/o5UP6ZPop9utHBY/OIC4C2qEaqbd4sVtjPL797DfFuMVtcHa"], ["created_at", "2021-02-08 21:05:30.634531"], ["updated_at", "2021-02-08 21:05:30.634531"], ["referral_code", "uAoKKqpyq3m2vkfSKA9biFrm"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 00:05:30 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email19@gmail.com", "password"=>"[FILTERED]", "referred_by"=>"uAoKKqpyq3m2vkfSKA9biFrm"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email19@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email19@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email19@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 12ms (Views: 0.4ms | ActiveRecord: 2.2ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 00:05:30 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$ZUzJw9Cl9WK6HZe4cGZuYeezH13xvP3W.JyqoBz1dswpbDGuQ.xzW"], ["created_at", "2021-02-08 21:05:30.666508"], ["updated_at", "2021-02-08 21:05:30.666508"], ["referral_code", "BVeo8abpwKisyHg2SWDkFaJJ"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 405], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 405], ["LIMIT", 1]]
Completed 200 OK in 9ms (Views: 0.8ms | ActiveRecord: 2.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 00:05:30 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$eyAy6lsrI.9m3vysCP0V3ON2qriqmJuywa.fS3.7VXx3XvwYRQSqa"], ["created_at", "2021-02-08 21:05:30.684037"], ["updated_at", "2021-02-08 21:05:30.684037"], ["referral_code", "ifp6dorhZTPGvQr8TuNfsc4C"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 406], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 406], ["LIMIT", 1]]
Completed 200 OK in 15ms (Views: 1.0ms | ActiveRecord: 3.8ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email21@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email21@gmail.com"], ["password_digest", "$2a$04$nZhB0r0PsR5cPKBQ4VBfI.V6TFrzV/7/j9GrmuetMBn.J824ZmgYm"], ["created_at", "2021-02-08 21:05:30.698472"], ["updated_at", "2021-02-08 21:05:30.698472"], ["referral_code", "o99kx47JtB4bt3MDeh78tXCM"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 00:05:30 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]", "referred_by"=>"o99kx47JtB4bt3MDeh78tXCM"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$x0EJ/91AeI3BkD.WtI2sLuNdvnYfDz7cRqSYYYT4ca88VLnYO3rW6"], ["created_at", "2021-02-08 21:05:30.707849"], ["updated_at", "2021-02-08 21:05:30.707849"], ["referral_code", "8h5WR8MR38U511cLUTFMQb79"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 408], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "o99kx47JtB4bt3MDeh78tXCM"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 408], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:05:30.711750"], ["referrer_id", 407], ["id", 408]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 408], ["LIMIT", 1]]
Completed 200 OK in 15ms (Views: 0.8ms | ActiveRecord: 4.1ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$er4bRGagY576sqCvSK5ik.ebIvLldt2.3dEbbSM.Dj217Bko.DhqC"], ["created_at", "2021-02-08 21:12:27.655344"], ["updated_at", "2021-02-08 21:12:27.655344"], ["referral_code", "6taP75Tsa9jtTA2Rcwiet52o"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$yn3vNpHLNxS/p.afja5z6ORdYIQv84a60fitbCTzwCm0N2QAyzgZO"], ["created_at", "2021-02-08 21:12:27.660416"], ["updated_at", "2021-02-08 21:12:27.660416"], ["referral_code", "n6R11NuLrVXhXCz6MTjUktJt"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email1@gmail.com"], ["id", 409], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:12:27.665387"], ["referrer_id", 410], ["id", 409]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 409], ["LIMIT", 1]]
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 410], ["LIMIT", 1]]
  [1m[36mUser Update All (1.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 409]]
  [1m[36mUser Update All (1.1ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 410]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 409], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email3@gmail.com"], ["password_digest", "$2a$04$Q3Q0eJOOc1GeuxmFP3yDKO2ffsn4sxlRPJzuRPEzoAG.jrJ3krwB."], ["created_at", "2021-02-08 21:12:27.742087"], ["updated_at", "2021-02-08 21:12:27.742087"], ["referral_code", "Sa7uhpa3q8ipymgXCbHtKTAn"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email4@gmail.com"], ["password_digest", "$2a$04$yvqLaaei1XWG26koIa7r3uJJxddESHvuFDm.QyFkKjElKypuLEQV2"], ["created_at", "2021-02-08 21:12:27.750125"], ["updated_at", "2021-02-08 21:12:27.750125"], ["referral_code", "dvdX5LhuaVG2nHmGTa1kgdya"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email3@gmail.com"], ["id", 411], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:12:27.755378"], ["referrer_id", 412], ["id", 411]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 412], ["LIMIT", 1]]
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 411]]
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 412]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 412], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email5@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email5@gmail.com"], ["password_digest", "$2a$04$m0GdPMjMGpSEIZ7EfwvyFOf9r.9XQw65sRNJEcaCDEyXOueazdcHu"], ["created_at", "2021-02-08 21:12:27.766784"], ["updated_at", "2021-02-08 21:12:27.766784"], ["referral_code", "J79apiuCfbFhvMMsgG3mYASA"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email6@gmail.com"], ["password_digest", "$2a$04$XEs1DcJ4sSOWtG6KOqlPEua31VLEIphsymwOhIQR39jgUwCpwwwDe"], ["created_at", "2021-02-08 21:12:27.773201"], ["updated_at", "2021-02-08 21:12:27.773201"], ["referral_code", "zrYMT9ZzivCkKAJpHQRBYHzc"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email5@gmail.com"], ["id", 413], ["LIMIT", 1]]
  [1m[36mUser Update (0.9ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:12:27.780916"], ["referrer_id", 414], ["id", 413]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 414], ["LIMIT", 1]]
  [1m[36mUser Update All (0.7ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 413]]
  [1m[36mUser Update All (0.6ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 414]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 414], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email7@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email7@gmail.com"], ["password_digest", "$2a$04$LA9N4EudsVZRUMHe.nhqi.KYoriKHdDr7Y6m9VYDru9Xai.KiMj8i"], ["created_at", "2021-02-08 21:12:27.793426"], ["updated_at", "2021-02-08 21:12:27.793426"], ["referral_code", "cNueWKwkjVEsTzk4wkmhHZHU"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email8@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email8@gmail.com"], ["password_digest", "$2a$04$1JzoknddrFA9F09EKvr3zuot8qMwqCwjC9X/RkGQQ9fu8sjK7r.oe"], ["created_at", "2021-02-08 21:12:27.797723"], ["updated_at", "2021-02-08 21:12:27.797723"], ["referral_code", "xfPBgDEEULBB4u7oUKkaqR9d"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email7@gmail.com"], ["id", 415], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:12:27.800747"], ["referrer_id", 416], ["id", 415]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email8@gmail.com"], ["id", 416], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:12:27.804352"], ["referral_points", 5], ["id", 416]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 416], ["LIMIT", 1]]
  [1m[36mUser Update All (1.5ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 415]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 416]]
  [1m[36mUser Update All (0.8ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 416]]
  [1m[36mUser Update All (0.8ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 416]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 416], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email9@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email9@gmail.com"], ["password_digest", "$2a$04$5QmuPEYi2ZZOpzvUWwTlge7DCxg8.W3s7AblRknL3kSJslCzpBUnu"], ["created_at", "2021-02-08 21:12:27.824450"], ["updated_at", "2021-02-08 21:12:27.824450"], ["referral_code", "tEb51QFRd1h44sjZd11jpzR5"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email10@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email10@gmail.com"], ["password_digest", "$2a$04$KuOoM2lt1E.l0YPrT7uV8eGRbErMnYbYUCrXnLxd1gb8XA.7NHGe."], ["created_at", "2021-02-08 21:12:27.828680"], ["updated_at", "2021-02-08 21:12:27.828680"], ["referral_code", "sCPJvFJAtuysAATwQFuUVgNd"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email9@gmail.com"], ["id", 417], ["LIMIT", 1]]
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:12:27.832365"], ["referrer_id", 418], ["id", 417]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email10@gmail.com"], ["id", 418], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:12:27.836534"], ["referral_points", 5], ["id", 418]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 418], ["LIMIT", 1]]
  [1m[36mUser Update All (1.1ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 417]]
  [1m[36mUser Update All (0.9ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 418]]
  [1m[36mUser Update All (0.6ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 418]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 418]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 418], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$Y/BBajc4usmKUVvHRIOWN.enBPH5O9uGcG4bgnEHJCrFWCCn/cX1e"], ["created_at", "2021-02-08 21:12:27.855272"], ["updated_at", "2021-02-08 21:12:27.855272"], ["referral_code", "emyLdHU5VFGjDgZEj4hT5bAJ"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 419], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email11@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email11@gmail.com"], ["password_digest", "$2a$04$vwXCRhldWhjy7g7A6Y1gBu4ioOsqLUdHN389GNYgjjVI7odRsVnEi"], ["created_at", "2021-02-08 21:12:27.863412"], ["updated_at", "2021-02-08 21:12:27.863412"], ["referral_code", "6SnsrSh4K6U93VwQADvNmEJd"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$0UT.yzgcnKX9yVUieYI3TOFIs/Pb1AoKNTIa3tm5XYPbLcK/PIKlK"], ["created_at", "2021-02-08 21:12:27.870019"], ["updated_at", "2021-02-08 21:12:27.870019"], ["referral_code", "h6xzs7BnrhvZ52Der3K667tX"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 421], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "6SnsrSh4K6U93VwQADvNmEJd"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 421], ["LIMIT", 1]]
  [1m[36mUser Update (1.0ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:12:27.878643"], ["referrer_id", 420], ["id", 421]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email12@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email12@gmail.com"], ["password_digest", "$2a$04$GglrCybij4LbB1NH6r9LGOIHrBfMTeslXC0VygbPooXKr.yolAI6K"], ["created_at", "2021-02-08 21:12:27.890217"], ["updated_at", "2021-02-08 21:12:27.890217"], ["referral_code", "RUTh5GkYRxGEoW8ZDg36WaJG"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$yqgAhWH7Wh/VH4Rn9AIp0O.euEvFNuBq4vtDcv2G5pNOz1OCl/I4W"], ["created_at", "2021-02-08 21:12:27.895440"], ["updated_at", "2021-02-08 21:12:27.895440"], ["referral_code", "ML2mqHZdd7ueM4eY2sJK4s4W"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 423], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 00:12:27 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$61wOCGitzkaE9AHbYrzAe.uM3NZ7lOa7BpDOyU/rf2B3Yuk5ifki2"], ["created_at", "2021-02-08 21:12:27.949845"], ["updated_at", "2021-02-08 21:12:27.949845"], ["referral_code", "nYu5J5jYScQht7CN8FMtMxhC"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 424], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 424], ["LIMIT", 1]]
Completed 201 Created in 18ms (Views: 0.8ms | ActiveRecord: 4.4ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 00:12:27 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$9RE.T50kC9zgwnU/uUSRNu5f2krbjr7E/SO2292niI330r8VTwxr6"], ["created_at", "2021-02-08 21:12:27.980925"], ["updated_at", "2021-02-08 21:12:27.980925"], ["referral_code", "JwsnhTNk8QJecpv19qZTPDDe"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 425], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 425], ["LIMIT", 1]]
Completed 201 Created in 17ms (Views: 0.3ms | ActiveRecord: 5.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email13@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email13@gmail.com"], ["password_digest", "$2a$04$s7/VhnV/6cI5i6jyIUjYpO10hKDZytRKwpiOf0PyetS4c1ZVIsAzO"], ["created_at", "2021-02-08 21:12:27.995994"], ["updated_at", "2021-02-08 21:12:27.995994"], ["referral_code", "wooCbBzbdBStYY8QQYkJPdeR"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 00:12:28 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]", "referred_by"=>"wooCbBzbdBStYY8QQYkJPdeR"}
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$3GWHCJVZ7ScgdZ0Jw8Ts3uLVD8EyWyamAx74FCHXfdNiZjn4anibi"], ["created_at", "2021-02-08 21:12:28.023923"], ["updated_at", "2021-02-08 21:12:28.023923"], ["referral_code", "q4GyVc9Uc6xWZEVUhVxhcPe4"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 427], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "wooCbBzbdBStYY8QQYkJPdeR"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 427], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:12:28.031751"], ["referrer_id", 426], ["id", 427]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 427], ["LIMIT", 1]]
Completed 201 Created in 19ms (Views: 0.3ms | ActiveRecord: 5.8ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email14@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email14@gmail.com"], ["password_digest", "$2a$04$BeBkzyzK26uCDEJraKEOSuBK5ePL3idOwcIp0eRZzbWTTLlMEsmUq"], ["created_at", "2021-02-08 21:12:28.045988"], ["updated_at", "2021-02-08 21:12:28.045988"], ["referral_code", "RAgZUQEGaqKhKjjNr4grhaqW"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 00:12:28 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email14@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email14@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email14@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email14@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 24ms (Views: 0.4ms | ActiveRecord: 2.5ms)
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email15@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email15@gmail.com"], ["password_digest", "$2a$04$RbldcyG68eKInwDRSAYULeOZGfeJhNtsF.VZbh/XK3Nd0wVGeyMvm"], ["created_at", "2021-02-08 21:12:28.087215"], ["updated_at", "2021-02-08 21:12:28.087215"], ["referral_code", "ok4PfJBb8vCUQwQwLiphpemK"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 00:12:28 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email15@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email15@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email15@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email15@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 6ms (Views: 0.1ms | ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email16@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email16@gmail.com"], ["password_digest", "$2a$04$II6B5rQv61XSJ01ZkfQdvOedn8BvYNHWqiZtIhJcO0t7PZb7WE4YS"], ["created_at", "2021-02-08 21:12:28.104167"], ["updated_at", "2021-02-08 21:12:28.104167"], ["referral_code", "ryN3Z8U21w1qt56Ti5VWK4x7"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email17@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email17@gmail.com"], ["password_digest", "$2a$04$wSe4vhJpIkoHtyvCEdC45Ot/Zaed5K3h.KJ80sB1i8.R37nsOWuTi"], ["created_at", "2021-02-08 21:12:28.111452"], ["updated_at", "2021-02-08 21:12:28.111452"], ["referral_code", "nKGaNHty6Z5YR9CxiT89UHxb"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 00:12:28 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email16@gmail.com", "password"=>"[FILTERED]", "referred_by"=>"nKGaNHty6Z5YR9CxiT89UHxb"}
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email16@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email16@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email16@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 10ms (Views: 0.1ms | ActiveRecord: 2.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "referral_code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2021-02-08 21:12:28.159481"], ["updated_at", "2021-02-08 21:12:28.159481"], ["referral_code", "7T9bC8sbSG1tRxJtVgJczrHv"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "dummy value"], ["updated_at", "2021-02-08 21:12:28.161527"], ["id", 432]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "dummy value"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "DUMMY VALUE"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email18@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email18@gmail.com"], ["password_digest", "$2a$04$qGxzICbUEQtR30bUcVcvx.87RnesdGv2eNgWAsiFQLg/jWT.ZFvAC"], ["created_at", "2021-02-08 21:12:28.228438"], ["updated_at", "2021-02-08 21:12:28.228438"], ["referral_code", "NyhxjD5susHU6Gr8BqZfJTKh"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 00:12:28 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email18@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email18@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 6ms (Views: 0.7ms | ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email19@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email19@gmail.com"], ["password_digest", "$2a$04$HbbpswhES36vK9habd..x.e.GtV6mKpGbRUMsmDxfqeWf0ssGeF7q"], ["created_at", "2021-02-08 21:12:28.250311"], ["updated_at", "2021-02-08 21:12:28.250311"], ["referral_code", "UXqNq5Y3Et4vQ56KSWR1y3QH"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 00:12:28 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email19@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email19@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 00:12:28 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 00:12:28 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/users" for 127.0.0.1 at 2021-02-09 00:12:28 +0300
Processing by UsersController#index as HTML
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email20@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email20@gmail.com"], ["password_digest", "$2a$04$DntFLMUdLJ9AlR7iBzo4OeUZw9yC7YdiOJX0idVA79V6N7daA/sf."], ["created_at", "2021-02-08 21:12:28.281324"], ["updated_at", "2021-02-08 21:12:28.281324"], ["referral_code", "gPuR22PRFNvhF8MS13aeCtBZ"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 00:12:28 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email20@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email20@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.4ms)
Started GET "/users" for 127.0.0.1 at 2021-02-09 00:12:28 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 435], ["LIMIT", 1]]
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email21@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email21@gmail.com"], ["password_digest", "$2a$04$N5IJ.W08DCtG5WjBNZ9r/upOF0lS9KX/NmGQZZtGfkkND46HDE6AG"], ["created_at", "2021-02-08 21:12:28.298962"], ["updated_at", "2021-02-08 21:12:28.298962"], ["referral_code", "rxziL4drXBTgazp8oQSu6uRp"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 00:12:28 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email21@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email21@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms)
Started GET "/users" for 127.0.0.1 at 2021-02-09 00:12:28 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 436], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.5ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$gEjT0KjxPCXVuwBE/2nW5uf6tLsmbPz2CDIgi0OY1dTVdP7fvv9a."], ["created_at", "2021-02-08 21:17:04.558334"], ["updated_at", "2021-02-08 21:17:04.558334"], ["referral_code", "rpAx5GWmmMPvtBW3ahdFrAM5"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$YcKftuImmO7HVCXeiKkbFu0HiYvuJoXwcnSKnXqdZWhyQF1gkrghK"], ["created_at", "2021-02-08 21:17:04.563411"], ["updated_at", "2021-02-08 21:17:04.563411"], ["referral_code", "gEA412MJmZFje2Ex5uqm9RSg"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email1@gmail.com"], ["id", 437], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:17:04.568798"], ["referrer_id", 438], ["id", 437]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 438], ["LIMIT", 1]]
  [1m[36mUser Update All (0.8ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 437]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 438]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 438], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email3@gmail.com"], ["password_digest", "$2a$04$ka5osk7avKd7Y7EirGm.Lu4CYfP70NEwN4fBghKWeLdHyEeJyJely"], ["created_at", "2021-02-08 21:17:04.632790"], ["updated_at", "2021-02-08 21:17:04.632790"], ["referral_code", "da2Ji4ugv4SJi6hARBwTeYhj"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email4@gmail.com"], ["password_digest", "$2a$04$ml9uRHtm2cyAt78sdq/XBupBLZECliUw41fCx7I1NpM66wKeXRIw6"], ["created_at", "2021-02-08 21:17:04.636078"], ["updated_at", "2021-02-08 21:17:04.636078"], ["referral_code", "AFKdCV5DrAJLm9FkREwe8tPz"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email3@gmail.com"], ["id", 439], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:17:04.637999"], ["referrer_id", 440], ["id", 439]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 439], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 440], ["LIMIT", 1]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 439]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 440]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 439], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email5@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email5@gmail.com"], ["password_digest", "$2a$04$rKSHzCZkN6x4kV5tpsY7G.ea5PuNR3htudjCR5XHO8FAEoatyEPSC"], ["created_at", "2021-02-08 21:17:04.649185"], ["updated_at", "2021-02-08 21:17:04.649185"], ["referral_code", "uMJtnqmaDfLGmugHLxrbARoA"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email6@gmail.com"], ["password_digest", "$2a$04$xpf0f2xTJqjZNVu/2Ue/WuA8lWfQeCEbVvMFeD9dgRBdC8qOQ7JU6"], ["created_at", "2021-02-08 21:17:04.652929"], ["updated_at", "2021-02-08 21:17:04.652929"], ["referral_code", "WQUtwtCqnDUYRJmSB3afttDV"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email5@gmail.com"], ["id", 441], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:17:04.655739"], ["referrer_id", 442], ["id", 441]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email6@gmail.com"], ["id", 442], ["LIMIT", 1]]
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:17:04.659293"], ["referral_points", 5], ["id", 442]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 442], ["LIMIT", 1]]
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 441]]
  [1m[36mUser Update All (1.1ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 442]]
  [1m[36mUser Update All (1.3ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 442]]
  [1m[36mUser Update All (1.4ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 442]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 442], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email7@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email7@gmail.com"], ["password_digest", "$2a$04$bs93NB92WfdYQdNKiWj06efu5s9N1gYVlIpXds2MjtoJ8UuczAhCS"], ["created_at", "2021-02-08 21:17:04.683818"], ["updated_at", "2021-02-08 21:17:04.683818"], ["referral_code", "tVwspBjj1m4EGMMEgdSiG3Ve"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email8@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email8@gmail.com"], ["password_digest", "$2a$04$8OpB.Yw1AqS8AvlkJdTelOZGNGHTDMcwwx2Bt7r1xiJUfzwca1moS"], ["created_at", "2021-02-08 21:17:04.688244"], ["updated_at", "2021-02-08 21:17:04.688244"], ["referral_code", "unDgVaAqUAU6XevwX5WDbRPX"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email7@gmail.com"], ["id", 443], ["LIMIT", 1]]
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:17:04.692145"], ["referrer_id", 444], ["id", 443]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email8@gmail.com"], ["id", 444], ["LIMIT", 1]]
  [1m[36mUser Update (1.1ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:17:04.696429"], ["referral_points", 5], ["id", 444]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 444], ["LIMIT", 1]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 443]]
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 444]]
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 444]]
  [1m[36mUser Update All (1.0ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 444]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 444], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email9@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email9@gmail.com"], ["password_digest", "$2a$04$mw.ZiyC.2BweMCFUMtrWM.rvGxoQpoj31xxwtYLmyawVCurW3wwCa"], ["created_at", "2021-02-08 21:17:04.714577"], ["updated_at", "2021-02-08 21:17:04.714577"], ["referral_code", "YTjQftciy21n3Vbuhy2EeHN8"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email10@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email10@gmail.com"], ["password_digest", "$2a$04$QsVTrDj3SVb6039xAXognOOZ8pK5qp8SvKyTwFBf8mPLwEDCTcJAi"], ["created_at", "2021-02-08 21:17:04.718799"], ["updated_at", "2021-02-08 21:17:04.718799"], ["referral_code", "byDknjMpQA1rD7XFfPzUR4KX"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email9@gmail.com"], ["id", 445], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:17:04.721630"], ["referrer_id", 446], ["id", 445]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 446], ["LIMIT", 1]]
  [1m[36mUser Update All (0.6ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 445]]
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 446]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 446], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$Vw3qOpnY6MGBSlc/f94pCeOvH89fEH.QsDBhUJCYepyv00fiPqRbK"], ["created_at", "2021-02-08 21:17:04.736712"], ["updated_at", "2021-02-08 21:17:04.736712"], ["referral_code", "qWE9shEdgd4Wf1n5xHUry47h"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 447], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email11@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email11@gmail.com"], ["password_digest", "$2a$04$BfJRNzDZpeBBsE..Ds/F/.US.J5GxIYfK3Er366YtXdfunWNGPogq"], ["created_at", "2021-02-08 21:17:04.749320"], ["updated_at", "2021-02-08 21:17:04.749320"], ["referral_code", "SLAkYcFigME9fbqthcMAmwGM"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$I2mWqpGbbqzEI18ICWcdxutmTWmEmsMv1BvQlZbrtE4jo6K2POdJy"], ["created_at", "2021-02-08 21:17:04.755404"], ["updated_at", "2021-02-08 21:17:04.755404"], ["referral_code", "c2rMjeB3UxqpvrpS1S8f5WZA"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 449], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "SLAkYcFigME9fbqthcMAmwGM"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 449], ["LIMIT", 1]]
  [1m[36mUser Update (1.1ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:17:04.761731"], ["referrer_id", 448], ["id", 449]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email12@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email12@gmail.com"], ["password_digest", "$2a$04$sjTpZO.gLeXFRYZwx9xFV.SpvGkiY6oiYQwGfmPg122RrGB3dHBPS"], ["created_at", "2021-02-08 21:17:04.774150"], ["updated_at", "2021-02-08 21:17:04.774150"], ["referral_code", "ppgFdmFcexTmbvMw5oozC6uY"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$OKwZHiRcyFJC2AbP6LwnTeKS0TEFJuoaL7Wu1Qlcz1njkh63opMqm"], ["created_at", "2021-02-08 21:17:04.780606"], ["updated_at", "2021-02-08 21:17:04.780606"], ["referral_code", "8Zpr4myBKKKttEo7MK51mPPm"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 451], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email13@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email13@gmail.com"], ["password_digest", "$2a$04$8zMRTjXYldVcYPqJ1j8yZOB.PHT6w4sBIVKxXDahGq6.5AQw1ZsIu"], ["created_at", "2021-02-08 21:17:04.803789"], ["updated_at", "2021-02-08 21:17:04.803789"], ["referral_code", "GNYYeu1KWSpEKqJzxCNgD7kQ"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 00:17:04 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email13@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email13@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email13@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email13@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 9ms (Views: 0.4ms | ActiveRecord: 2.2ms)
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email14@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email14@gmail.com"], ["password_digest", "$2a$04$i5YpEMe7IyPcE63K0109debpaBNL4jPoXqUZ1T//s5pZ0XEAUvUwq"], ["created_at", "2021-02-08 21:17:04.838990"], ["updated_at", "2021-02-08 21:17:04.838990"], ["referral_code", "NAz1yevvBxA8k3dieLpAUpr9"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 00:17:04 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email14@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email14@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email14@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email14@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 6ms (Views: 0.1ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email15@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email15@gmail.com"], ["password_digest", "$2a$04$cZ0KWvStPSAuI706HbuuweUoJmgu49EuRDMefHZ3KEAFjAAwfmVMK"], ["created_at", "2021-02-08 21:17:04.855701"], ["updated_at", "2021-02-08 21:17:04.855701"], ["referral_code", "drgCdRcXWtHtLAQEi1cx4wJa"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email16@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email16@gmail.com"], ["password_digest", "$2a$04$.SoYpVfYTXIo4J9ygn/8luAJR1Pw2/22T2P5yXvE8UB6b/zy20cLi"], ["created_at", "2021-02-08 21:17:04.861172"], ["updated_at", "2021-02-08 21:17:04.861172"], ["referral_code", "W3F6q1No8khKdacwR4bMJEjr"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 00:17:04 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email15@gmail.com", "password"=>"[FILTERED]", "referred_by"=>"W3F6q1No8khKdacwR4bMJEjr"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email15@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email15@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email15@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 6ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 00:17:04 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$AEyMPp5FOIzUzXyYYIhExOCLUCqRvg6pmM5ck70Gt/OKDeacit8A."], ["created_at", "2021-02-08 21:17:04.895195"], ["updated_at", "2021-02-08 21:17:04.895195"], ["referral_code", "y6j8K9it3JCNU5pdYewbYsHQ"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 456], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 456], ["LIMIT", 1]]
Completed 201 Created in 12ms (Views: 0.7ms | ActiveRecord: 2.8ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 00:17:04 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$f68l00rnkBFc7vEvL6lOkeTyTGuQSzLMVPRgynTauJUBUziGnLMMK"], ["created_at", "2021-02-08 21:17:04.913719"], ["updated_at", "2021-02-08 21:17:04.913719"], ["referral_code", "1vUtfX6b2o7Z72GFHRhZwaV8"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 457], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 457], ["LIMIT", 1]]
Completed 201 Created in 8ms (Views: 0.6ms | ActiveRecord: 1.9ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email17@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email17@gmail.com"], ["password_digest", "$2a$04$BSToqf.bdB3VdTkBlkb0JuhbBYwj1qdrl0k1VP49aTvmGmgQOvjdq"], ["created_at", "2021-02-08 21:17:04.926357"], ["updated_at", "2021-02-08 21:17:04.926357"], ["referral_code", "V4EAys8e3wqPoU9u1Kxo5X39"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 00:17:04 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]", "referred_by"=>"V4EAys8e3wqPoU9u1Kxo5X39"}
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$HmQgtg5E1jlVYBnubZzRHOznDC3qpmX6XsHSvMv9YFf8bG7TZk/NG"], ["created_at", "2021-02-08 21:17:04.941387"], ["updated_at", "2021-02-08 21:17:04.941387"], ["referral_code", "XGZNUBa7Cu8VXXrbEa6pHjnS"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 459], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "V4EAys8e3wqPoU9u1Kxo5X39"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 459], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:17:04.948483"], ["referrer_id", 458], ["id", 459]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 459], ["LIMIT", 1]]
Completed 201 Created in 16ms (Views: 0.4ms | ActiveRecord: 4.5ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/users" for 127.0.0.1 at 2021-02-09 00:17:04 +0300
Processing by UsersController#index as HTML
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email18@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email18@gmail.com"], ["password_digest", "$2a$04$a2ntCtxzYj2h.Sks64a80OMQWuziv64LxIIm5sx5A12zcOsP.FxUi"], ["created_at", "2021-02-08 21:17:04.969712"], ["updated_at", "2021-02-08 21:17:04.969712"], ["referral_code", "11oLHoRjhKwwRHTzyqYPE2if"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 00:17:04 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email18@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email18@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.3ms)
Started GET "/users" for 127.0.0.1 at 2021-02-09 00:17:04 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 460], ["LIMIT", 1]]
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.3ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email19@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email19@gmail.com"], ["password_digest", "$2a$04$nK0UdWYlSWKvfoAfWB4spOn0b7CuqU4pTwHy3g4bMNjJJbZtAdAN."], ["created_at", "2021-02-08 21:17:05.000918"], ["updated_at", "2021-02-08 21:17:05.000918"], ["referral_code", "A7URRGTAuXt9Gcrc4Yt5D5Ea"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 00:17:05 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email19@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email19@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.9ms)
Started GET "/users" for 127.0.0.1 at 2021-02-09 00:17:05 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 461], ["LIMIT", 1]]
Completed 500 Internal Server Error in 23ms (ActiveRecord: 0.2ms)
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 00:17:05 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 00:17:05 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email20@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email20@gmail.com"], ["password_digest", "$2a$04$t0kB6D3J.JzXupcKs8TPgOw.Inc8IdWEQ/EZFpzLHJ77HrbUNCKTC"], ["created_at", "2021-02-08 21:17:05.058523"], ["updated_at", "2021-02-08 21:17:05.058523"], ["referral_code", "qCtFpLuTMhEbiqRAXB11qVva"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 00:17:05 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email20@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email20@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email21@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email21@gmail.com"], ["password_digest", "$2a$04$.SFSK3TnRInUmywrFgtnxO7YAckLMUmA7Fit1EmPUUW2ehyHMasA6"], ["created_at", "2021-02-08 21:17:05.073626"], ["updated_at", "2021-02-08 21:17:05.073626"], ["referral_code", "4muHKfYxfMhLANUJhZQvzrWG"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 00:17:05 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email21@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email21@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "referral_code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2021-02-08 21:17:05.090158"], ["updated_at", "2021-02-08 21:17:05.090158"], ["referral_code", "JZCHbysQjLi5kRoAjrH9pfQ5"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "dummy value"], ["updated_at", "2021-02-08 21:17:05.093031"], ["id", 464]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "dummy value"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "DUMMY VALUE"], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$nP.CE.wwOcp/bpdTRQjDBes6GjvO6kFo1jqkakbf21IS3kweduMeO"], ["created_at", "2021-02-08 21:17:16.155474"], ["updated_at", "2021-02-08 21:17:16.155474"], ["referral_code", "gdYXQ1fXsbLy7pvaz7f4E8gS"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 00:17:16 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email1@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 0.5ms)
Started GET "/users" for 127.0.0.1 at 2021-02-09 00:17:16 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 465], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$ET6QueBWquJ3gFi2Vgc6UehfjozFeYXC/8UIQzyY9nfje4SBGMhI2"], ["created_at", "2021-02-08 21:17:16.180553"], ["updated_at", "2021-02-08 21:17:16.180553"], ["referral_code", "2N1tHWgqWBj5RfCc3qAMJc7K"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 00:17:16 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email2@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms)
Started GET "/users" for 127.0.0.1 at 2021-02-09 00:17:16 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 466], ["LIMIT", 1]]
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/users" for 127.0.0.1 at 2021-02-09 00:17:16 +0300
Processing by UsersController#index as HTML
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "referral_code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2021-02-08 21:17:16.193585"], ["updated_at", "2021-02-08 21:17:16.193585"], ["referral_code", "kMkpWDcJgrozv3U27tZCTzLa"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "dummy value"], ["updated_at", "2021-02-08 21:17:16.195291"], ["id", 467]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "dummy value"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "DUMMY VALUE"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email3@gmail.com"], ["password_digest", "$2a$04$c.X6ZFx8xOYc6nHcxoVs3.oSRy4dpVw7LAtu3q2.CB4rMOrdkrBV."], ["created_at", "2021-02-08 21:17:16.273734"], ["updated_at", "2021-02-08 21:17:16.273734"], ["referral_code", "R6EGVqj1NpE7fUpxAauKqy2i"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 00:17:16 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email3@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email4@gmail.com"], ["password_digest", "$2a$04$TQK2jKp0DKdS2J1yIHkgs.tzfi2QlWkO.Z96MiTCC4NewR.Zaczj2"], ["created_at", "2021-02-08 21:17:16.287954"], ["updated_at", "2021-02-08 21:17:16.287954"], ["referral_code", "bH9XUJb6tnBsqcnMxk5k8wuu"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 00:17:16 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email4@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 00:17:16 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 3ms (Views: 0.4ms | ActiveRecord: 0.8ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 00:17:16 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 3ms (Views: 0.4ms | ActiveRecord: 0.9ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email5@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email5@gmail.com"], ["password_digest", "$2a$04$key1tEt3a3LVjRYrT.uvJezbrmJ8YbfgvzDkOdKieLNnPveh2zLle"], ["created_at", "2021-02-08 21:17:16.319181"], ["updated_at", "2021-02-08 21:17:16.319181"], ["referral_code", "qctq52FyZ7NhGxup3CffpS15"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email6@gmail.com"], ["password_digest", "$2a$04$1KE5aoj1VkXSOG2aJCwdmeXlHEHI0LpGT2lzqxVX1csdZ/9x0rl1O"], ["created_at", "2021-02-08 21:17:16.323442"], ["updated_at", "2021-02-08 21:17:16.323442"], ["referral_code", "w8GWv3qtdeqCGjdY4HV6kPws"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email5@gmail.com"], ["id", 470], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:17:16.326801"], ["referrer_id", 471], ["id", 470]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 470], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 471], ["LIMIT", 1]]
  [1m[36mUser Update All (0.8ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 470]]
  [1m[36mUser Update All (1.2ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 471]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 470], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email7@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email7@gmail.com"], ["password_digest", "$2a$04$b2Q3vOaoq8Mbdj.onkFbIe7nte50yf520pfCSqSyLKmmrQJMhQM6."], ["created_at", "2021-02-08 21:17:16.351619"], ["updated_at", "2021-02-08 21:17:16.351619"], ["referral_code", "J1UjdJLFcEcFQLJx5eWRWwtE"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email8@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email8@gmail.com"], ["password_digest", "$2a$04$D.KP5Rnqi2CCZsfFUxHfq.HYC4fTl7F5dLmZOgYHy.r1TzWL1j6Iq"], ["created_at", "2021-02-08 21:17:16.355861"], ["updated_at", "2021-02-08 21:17:16.355861"], ["referral_code", "xEQpyLfRdTbHJiELEZS1P4HD"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email7@gmail.com"], ["id", 472], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:17:16.358994"], ["referrer_id", 473], ["id", 472]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 473], ["LIMIT", 1]]
  [1m[36mUser Update All (1.2ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 472]]
  [1m[36mUser Update All (1.0ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 473]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 473], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email9@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email9@gmail.com"], ["password_digest", "$2a$04$VPOb87ffRW7JnUr6eaq2xeCB7PegtHbaTG5zC7cHx5QZxCsVKI1Ya"], ["created_at", "2021-02-08 21:17:16.376837"], ["updated_at", "2021-02-08 21:17:16.376837"], ["referral_code", "Sb6UHdkXWaxK4hVaGnC9SZTh"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email10@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email10@gmail.com"], ["password_digest", "$2a$04$5v9mM2jpOed6lLkPrdNKv.FBEGMTSKkrriuywMJ7k6l4HGsunEd2e"], ["created_at", "2021-02-08 21:17:16.383882"], ["updated_at", "2021-02-08 21:17:16.383882"], ["referral_code", "W5AJhktryoRSDuCMCGmoCRDh"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email9@gmail.com"], ["id", 474], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:17:16.386242"], ["referrer_id", 475], ["id", 474]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email10@gmail.com"], ["id", 475], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:17:16.389216"], ["referral_points", 5], ["id", 475]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 475], ["LIMIT", 1]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 474]]
  [1m[36mUser Update All (0.8ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 475]]
  [1m[36mUser Update All (1.0ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 475]]
  [1m[36mUser Update All (1.4ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 475]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 475], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email11@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email11@gmail.com"], ["password_digest", "$2a$04$Wd.rxyoPvyFjWAiu1XpFP.1vTp92oHhv2cJWYL/xh4E2YYUxRBAJi"], ["created_at", "2021-02-08 21:17:16.409553"], ["updated_at", "2021-02-08 21:17:16.409553"], ["referral_code", "AT7XBTHnzFKher2J8VDKNbAt"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email12@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email12@gmail.com"], ["password_digest", "$2a$04$to4t7E7JBbff9zi.yRBNTOfk84S5TWP6QrczyDf/7iO.xfJewwlaO"], ["created_at", "2021-02-08 21:17:16.415935"], ["updated_at", "2021-02-08 21:17:16.415935"], ["referral_code", "pfN9nMPFXJxTZHTQGVABXz2q"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email11@gmail.com"], ["id", 476], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:17:16.418443"], ["referrer_id", 477], ["id", 476]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email12@gmail.com"], ["id", 477], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:17:16.421785"], ["referral_points", 5], ["id", 477]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 477], ["LIMIT", 1]]
  [1m[36mUser Update All (0.9ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 476]]
  [1m[36mUser Update All (0.7ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 477]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 477]]
  [1m[36mUser Update All (0.7ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 477]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 477], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email13@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email13@gmail.com"], ["password_digest", "$2a$04$7ivnLzhLrP7PtJzIEsPmFOBq3c7UlC.00uqf2ZrsqCIy0KDLZug12"], ["created_at", "2021-02-08 21:17:16.443316"], ["updated_at", "2021-02-08 21:17:16.443316"], ["referral_code", "tfdCdGn2BtAnQGmLVXBFWb7S"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email14@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email14@gmail.com"], ["password_digest", "$2a$04$wxj4nvesH/v1WFnk463sauvggCk/PMmv1WNTYjuFMoyOUhqxxKMuq"], ["created_at", "2021-02-08 21:17:16.449206"], ["updated_at", "2021-02-08 21:17:16.449206"], ["referral_code", "tefuvheGU5iyAzNNhDNDayp5"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email13@gmail.com"], ["id", 478], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:17:16.452334"], ["referrer_id", 479], ["id", 478]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 479], ["LIMIT", 1]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 478]]
  [1m[36mUser Update All (0.8ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 479]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 479], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$0903ouCxJ2fvbj6w1kfLu.pEkI3CyKCgDxSIH5faS6SWV1ylluBxm"], ["created_at", "2021-02-08 21:17:16.468839"], ["updated_at", "2021-02-08 21:17:16.468839"], ["referral_code", "W9yL3Hy8UHUjPupznfAUqWgS"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 480], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email15@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email15@gmail.com"], ["password_digest", "$2a$04$EsPaG/YTWjlYDLDu.ZsDCOlw/0aDLaY/KUVk.5wtLm5.pDFkSiqNa"], ["created_at", "2021-02-08 21:17:16.482473"], ["updated_at", "2021-02-08 21:17:16.482473"], ["referral_code", "ZQfYDCfnZrKg4Zn7VGV6f18i"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$I/sjgZPO/e/k/QC9kizwi.tQTr/6/IqpG4Qc2QacMXy4XSF3LscM6"], ["created_at", "2021-02-08 21:17:16.487950"], ["updated_at", "2021-02-08 21:17:16.487950"], ["referral_code", "VY13ASojMF61dBSUxm3wTDJv"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 482], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email16@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email16@gmail.com"], ["password_digest", "$2a$04$vt0yzKWxjtM9o8HX6d6iN.7tpiL1Ezd76Mc6OB28Ou26360vruWSe"], ["created_at", "2021-02-08 21:17:16.501987"], ["updated_at", "2021-02-08 21:17:16.501987"], ["referral_code", "puoi2cMAiiURn1UcdB4mueN8"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$BqSFllkd7cpz1JMQgGWWbO3AiBbH3tVEsXGq.aSK3Be4Lo0D.GBve"], ["created_at", "2021-02-08 21:17:16.511768"], ["updated_at", "2021-02-08 21:17:16.511768"], ["referral_code", "JAeaR3c6uF2T5TNxCjmK7jZ2"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 484], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "puoi2cMAiiURn1UcdB4mueN8"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 484], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:17:16.517163"], ["referrer_id", 483], ["id", 484]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 00:17:16 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$rVnKmqt6w4jjyUcEsRq49.7m6SJCc68SpbtvhFI4JK5hy0EkLGYfG"], ["created_at", "2021-02-08 21:17:16.562797"], ["updated_at", "2021-02-08 21:17:16.562797"], ["referral_code", "MroyyZqjpvGpjAnLtGza7vxY"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 485], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 485], ["LIMIT", 1]]
Completed 201 Created in 29ms (Views: 1.1ms | ActiveRecord: 3.0ms)
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 00:17:16 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$ZsRGFiJqEg6p2h4MUU12UenMH1aNs3XAKAebnQpYJvJuVvgmFaUGO"], ["created_at", "2021-02-08 21:17:16.582712"], ["updated_at", "2021-02-08 21:17:16.582712"], ["referral_code", "U1DZUacgYGsyk6EuhQFF7GPJ"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 486], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 486], ["LIMIT", 1]]
Completed 201 Created in 7ms (Views: 0.6ms | ActiveRecord: 1.6ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email17@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email17@gmail.com"], ["password_digest", "$2a$04$0tfF/y8KQhoiq.nxLp8Ihez770O05Sbr7/bPGZk8oldA0kK/2Apc2"], ["created_at", "2021-02-08 21:17:16.594412"], ["updated_at", "2021-02-08 21:17:16.594412"], ["referral_code", "6r9SmVQrPdFu55g342C7yydp"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 00:17:16 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]", "referred_by"=>"6r9SmVQrPdFu55g342C7yydp"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$/h1om7To6tYvGg5Z6Keow.DBvTQXvK9Ix5YA6bmY04JnZSe1n9vT."], ["created_at", "2021-02-08 21:17:16.616993"], ["updated_at", "2021-02-08 21:17:16.616993"], ["referral_code", "rZkLBoTMw47YfJ9q9nmuuoAh"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 488], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "6r9SmVQrPdFu55g342C7yydp"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 488], ["LIMIT", 1]]
  [1m[36mUser Update (1.0ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:17:16.622911"], ["referrer_id", 487], ["id", 488]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 488], ["LIMIT", 1]]
Completed 201 Created in 15ms (Views: 0.3ms | ActiveRecord: 4.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email18@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email18@gmail.com"], ["password_digest", "$2a$04$XxAcEqndanOnCZANnrBZMOIUkuSywu61KHJ61LPjYMKnZAnwshjcK"], ["created_at", "2021-02-08 21:17:16.639246"], ["updated_at", "2021-02-08 21:17:16.639246"], ["referral_code", "6Jbpw82bMtvcxBnvME6jLbTi"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 00:17:16 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email18@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email18@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email18@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email18@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 7ms (Views: 0.2ms | ActiveRecord: 0.9ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email19@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email19@gmail.com"], ["password_digest", "$2a$04$HoI.GK3QFdLlpONefACluOf3U.vTd.ELpJcC7raAih9uuwtp5UFoG"], ["created_at", "2021-02-08 21:17:16.660227"], ["updated_at", "2021-02-08 21:17:16.660227"], ["referral_code", "drCVBkwP24TvTZ5PTbTfUmPR"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 00:17:16 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email19@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email19@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email19@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email19@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 13ms (Views: 0.5ms | ActiveRecord: 2.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email20@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email20@gmail.com"], ["password_digest", "$2a$04$D8rbPJN9nqbRkeZyFmmQieMSvA4E2SgJ53EP0E8DQeOwkSVDGxDAW"], ["created_at", "2021-02-08 21:17:16.682875"], ["updated_at", "2021-02-08 21:17:16.682875"], ["referral_code", "mdAPuprNLS4t99gs8creNHN7"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email21@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email21@gmail.com"], ["password_digest", "$2a$04$0Uwqms8SpUhRKPreVcQjJemxr/lEhF2U3SGskDVdCXTQNe30Mp1h2"], ["created_at", "2021-02-08 21:17:16.687354"], ["updated_at", "2021-02-08 21:17:16.687354"], ["referral_code", "bxmYKW81yKEkfgGWYafLtGGz"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 00:17:16 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email20@gmail.com", "password"=>"[FILTERED]", "referred_by"=>"bxmYKW81yKEkfgGWYafLtGGz"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email20@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email20@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email20@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 8ms (Views: 0.4ms | ActiveRecord: 0.9ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$iUPh6QuhhoNiltegYmWMSuRe7yd4VMf4zVxwjJrhPpy8RfwTMpZuy"], ["created_at", "2021-02-08 21:23:27.882371"], ["updated_at", "2021-02-08 21:23:27.882371"], ["referral_code", "sewCRvYtiSri63g43vCFLmAN"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$jugFeOpjBmOnEhrQSnBKuOY/d0/dNPpt.rC8GDmj6uTg0rURsFyQq"], ["created_at", "2021-02-08 21:23:33.639861"], ["updated_at", "2021-02-08 21:23:33.639861"], ["referral_code", "o9Zv57bn8Ld1YCigjsGLibwu"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$.MjVP83Co0BLA5NEmCDUhut2k99NedBDi0eVslM0EVya2U49bVL02"], ["created_at", "2021-02-08 21:24:02.521974"], ["updated_at", "2021-02-08 21:24:02.521974"], ["referral_code", "DFvFkFL5PMh4LVm1bgoqLsJi"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$hL6Pd4u06yIXJm5U23hrc.a2SqR2xLNDhEBLE7U6isEsLLDSa4iG2"], ["created_at", "2021-02-08 21:24:02.526813"], ["updated_at", "2021-02-08 21:24:02.526813"], ["referral_code", "vvv4AgfSHmyt2YXVVyUUaJRk"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email1@gmail.com"], ["id", 495], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:24:02.531710"], ["referrer_id", 496], ["id", 495]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 496], ["LIMIT", 1]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 495]]
  [1m[36mUser Update All (1.0ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 496]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 496], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email3@gmail.com"], ["password_digest", "$2a$04$xGasQvejIBoQSuQObmTviOPFbZJ1RHi57P2EaTFrE6QWXqEcZTEZK"], ["created_at", "2021-02-08 21:24:02.600298"], ["updated_at", "2021-02-08 21:24:02.600298"], ["referral_code", "295w6ekY2Ms9iCxUw5vgSM53"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email4@gmail.com"], ["password_digest", "$2a$04$9pypaRhA4mXgLxwBoSy7JuXVgJ7EYmqKWupyesuCcZ5uQGA.Eflle"], ["created_at", "2021-02-08 21:24:02.606658"], ["updated_at", "2021-02-08 21:24:02.606658"], ["referral_code", "ogspT57SqEtaUaic6qTwmMsf"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email3@gmail.com"], ["id", 497], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:24:02.612241"], ["referrer_id", 498], ["id", 497]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 497], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 498], ["LIMIT", 1]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 497]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 498]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 497], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email5@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email5@gmail.com"], ["password_digest", "$2a$04$38fbNBUAmwORTn8zCnmP9..ZaRXLxNge3b753Mb/CLI6cIZYRoLhy"], ["created_at", "2021-02-08 21:24:02.627749"], ["updated_at", "2021-02-08 21:24:02.627749"], ["referral_code", "Vy7MRnJ6PdhbP81Ubye3huVW"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email6@gmail.com"], ["password_digest", "$2a$04$y9r7MiwaQVHHKdXs6kBgpe0b3d75JYySF8qilv9F8fRdgWVZcS9zq"], ["created_at", "2021-02-08 21:24:02.631992"], ["updated_at", "2021-02-08 21:24:02.631992"], ["referral_code", "tWkgqhyXjwegp1ty5x6L7rcQ"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email5@gmail.com"], ["id", 499], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:24:02.635237"], ["referrer_id", 500], ["id", 499]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email6@gmail.com"], ["id", 500], ["LIMIT", 1]]
  [1m[36mUser Update (1.0ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:24:02.641490"], ["referral_points", 5], ["id", 500]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 500], ["LIMIT", 1]]
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 499]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 500]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 500]]
  [1m[36mUser Update All (0.6ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 500]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 500], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email7@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email7@gmail.com"], ["password_digest", "$2a$04$uk5Tf88A032Fe2Ln2N4bxOcM9SWQsrdU2Zi7MmiV6Z/vfIQb2D7ye"], ["created_at", "2021-02-08 21:24:02.659590"], ["updated_at", "2021-02-08 21:24:02.659590"], ["referral_code", "qd8btUAieYonanAZzzJ7Djqm"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email8@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email8@gmail.com"], ["password_digest", "$2a$04$uWC7opVVOG2B9Y.I3kM1jeycpnqzYApaLdcXefHEgOC/Zgkz.RQGe"], ["created_at", "2021-02-08 21:24:02.663459"], ["updated_at", "2021-02-08 21:24:02.663459"], ["referral_code", "fqWiqVAgC2hkK6U2d3EPkSDP"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email7@gmail.com"], ["id", 501], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:24:02.665812"], ["referrer_id", 502], ["id", 501]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email8@gmail.com"], ["id", 502], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:24:02.668714"], ["referral_points", 5], ["id", 502]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 502], ["LIMIT", 1]]
  [1m[36mUser Update All (1.0ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 501]]
  [1m[36mUser Update All (0.7ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 502]]
  [1m[36mUser Update All (0.6ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 502]]
  [1m[36mUser Update All (0.6ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 502]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 502], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email9@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email9@gmail.com"], ["password_digest", "$2a$04$GitIGDfdka7XyKaARhWRHeBRoVwuRIQH.6WUy8XX9yWobisPtvdJK"], ["created_at", "2021-02-08 21:24:02.687947"], ["updated_at", "2021-02-08 21:24:02.687947"], ["referral_code", "w6BfsFhruBr85xwxZJnhzR1x"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email10@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email10@gmail.com"], ["password_digest", "$2a$04$nqAm2/NKwde/UGodtiEi7OQvd11jeHh9RWq6tGtUYT0dE8SrxJdBe"], ["created_at", "2021-02-08 21:24:02.694710"], ["updated_at", "2021-02-08 21:24:02.694710"], ["referral_code", "RcYxrdtnU5NhMv6prYauv3As"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email9@gmail.com"], ["id", 503], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:24:02.697369"], ["referrer_id", 504], ["id", 503]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 504], ["LIMIT", 1]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 503]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 504]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 504], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 00:24:02 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 00:24:02 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email11@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email11@gmail.com"], ["password_digest", "$2a$04$0VNUtTzEWlQFTKTKRjDZNe98Unp./7sz7/PkueAAnG6HzpLuMLveC"], ["created_at", "2021-02-08 21:24:02.737986"], ["updated_at", "2021-02-08 21:24:02.737986"], ["referral_code", "qKJw22BL65riZrWwTHTouXga"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 00:24:02 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email11@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email11@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 0.7ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email12@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email12@gmail.com"], ["password_digest", "$2a$04$54MOEEW2sBUMWI7dTxSMneewjT2BUce43UpEzcRgKxxt/GIAYf1KO"], ["created_at", "2021-02-08 21:24:02.759672"], ["updated_at", "2021-02-08 21:24:02.759672"], ["referral_code", "WHoRboZ3DkMkBoh2RGMrUcRp"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 00:24:02 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email12@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email12@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email13@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email13@gmail.com"], ["password_digest", "$2a$04$MzKT62..OXfJa0lgJEM/wubbSwgyjYFx.X.ofLDMj4EcHCR7XQLt."], ["created_at", "2021-02-08 21:24:02.769991"], ["updated_at", "2021-02-08 21:24:02.769991"], ["referral_code", "N45uGhwGY7gFC1TjpLNAc5QC"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$hcsi4BdCnwb9MaNLh/givOAF8dnnpt8UNsB6E9pse1UWKUHkblMyq"], ["created_at", "2021-02-08 21:24:02.799286"], ["updated_at", "2021-02-08 21:24:02.799286"], ["referral_code", "N8tGLafB1j5Bb7gUvfdWHdot"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 508], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email14@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email14@gmail.com"], ["password_digest", "$2a$04$E4owbYURle6m2g5y8zOIH.ZgMjZ1yR9nxCaMfcF4ojYOIC2212Rw2"], ["created_at", "2021-02-08 21:24:02.810625"], ["updated_at", "2021-02-08 21:24:02.810625"], ["referral_code", "BPgN8fobrhCYC5pVoES7TieZ"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$uO2l5cYCdk8xUwNV/j9AUe9S2UHJjvs4LzhiCqlLbNy9PR0RpahMK"], ["created_at", "2021-02-08 21:24:02.820501"], ["updated_at", "2021-02-08 21:24:02.820501"], ["referral_code", "KrFanapGAq63dTdzQxC9R8cR"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 510], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "BPgN8fobrhCYC5pVoES7TieZ"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 510], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:24:02.826439"], ["referrer_id", 509], ["id", 510]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email15@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email15@gmail.com"], ["password_digest", "$2a$04$brA24sAQzMX1AdbkpMn1Ye6AEstFnf6/nwWetOCmUJ/3vfH1o/102"], ["created_at", "2021-02-08 21:24:02.832139"], ["updated_at", "2021-02-08 21:24:02.832139"], ["referral_code", "FKp9VEYQNYKJMabscrx4rarb"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$jjM4Svgo7JevuPmuNPaouesxsmpNNllTGYO1UPRlpmGTiMSfPL4pi"], ["created_at", "2021-02-08 21:24:02.840346"], ["updated_at", "2021-02-08 21:24:02.840346"], ["referral_code", "L3DxrpfxvcAwb49DAGXqmte4"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 512], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "referral_code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2021-02-08 21:24:02.869894"], ["updated_at", "2021-02-08 21:24:02.869894"], ["referral_code", "1Dk56R5QtevS24D5cNqHRF9C"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (1.1ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "dummy value"], ["updated_at", "2021-02-08 21:24:02.874673"], ["id", 513]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "dummy value"], ["LIMIT", 1]]
  [1m[36mUser Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "DUMMY VALUE"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/users" for 127.0.0.1 at 2021-02-09 00:24:02 +0300
Processing by UsersController#index as HTML
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email16@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email16@gmail.com"], ["password_digest", "$2a$04$6Km0ai25kCToj3jG8HdhX.aXVsPJJt8rVZjY0TTGscLzOT6tUnkzi"], ["created_at", "2021-02-08 21:24:02.947929"], ["updated_at", "2021-02-08 21:24:02.947929"], ["referral_code", "Zs34qwm71QaRW4Yb67cMkasA"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 00:24:02 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email16@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email16@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 1.1ms)
Started GET "/users" for 127.0.0.1 at 2021-02-09 00:24:02 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 514], ["LIMIT", 1]]
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email17@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email17@gmail.com"], ["password_digest", "$2a$04$QHkuaoRu8JqA/aFLlOU.POpsSmynuUT/IFRS9ugX.k3fjVO2.9jgG"], ["created_at", "2021-02-08 21:24:02.966339"], ["updated_at", "2021-02-08 21:24:02.966339"], ["referral_code", "ieiqdJhPL3GMUFDnaVwZ4V58"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 00:24:02 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email17@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email17@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 5ms (Views: 0.5ms | ActiveRecord: 0.6ms)
Started GET "/users" for 127.0.0.1 at 2021-02-09 00:24:02 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 515], ["LIMIT", 1]]
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email18@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email18@gmail.com"], ["password_digest", "$2a$04$Ie5EolrO8NzpigMfr9iIw.WHVnJyjO.NAvp0ZGO3orvMXqoIbbU9K"], ["created_at", "2021-02-08 21:24:03.008375"], ["updated_at", "2021-02-08 21:24:03.008375"], ["referral_code", "QcExo98vw6spT45AjrEp22Ss"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 00:24:03 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email18@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email18@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email18@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email18@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 12ms (Views: 0.2ms | ActiveRecord: 2.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email19@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email19@gmail.com"], ["password_digest", "$2a$04$OZfzbKp9SllJvB3TOkttt.4CPTihQHOm6mwEb5WDyxBR2/6bcA8/6"], ["created_at", "2021-02-08 21:24:03.032349"], ["updated_at", "2021-02-08 21:24:03.032349"], ["referral_code", "EAZnGUcSsdGJBthVRdZEFhNX"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 00:24:03 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email19@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email19@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email19@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email19@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 12ms (Views: 0.4ms | ActiveRecord: 2.5ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email20@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email20@gmail.com"], ["password_digest", "$2a$04$cZwLcuN//R7RxoNG0NDB9O7g5ZTMXNly3JXksx2g1LUdFG0eJAKQu"], ["created_at", "2021-02-08 21:24:03.055681"], ["updated_at", "2021-02-08 21:24:03.055681"], ["referral_code", "AASqE6yhuQsj2niCBJDtvNg5"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email21@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email21@gmail.com"], ["password_digest", "$2a$04$uBlsZ0Ki0GgS.s3CLWjk6ONLPQEnSPiADJaDTyYNnL65NbLCtifR6"], ["created_at", "2021-02-08 21:24:03.062718"], ["updated_at", "2021-02-08 21:24:03.062718"], ["referral_code", "CbHjuLuL7KeJgpxFWyyCYDcU"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 00:24:03 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email20@gmail.com", "password"=>"[FILTERED]", "referred_by"=>"CbHjuLuL7KeJgpxFWyyCYDcU"}
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email20@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email20@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email20@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 16ms (Views: 0.6ms | ActiveRecord: 2.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 00:24:03 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$xVNw5RbUl6pAg8UJ9RJgHO3mPD558LmkU0bUTVWgItgX2niM9diGy"], ["created_at", "2021-02-08 21:24:03.099018"], ["updated_at", "2021-02-08 21:24:03.099018"], ["referral_code", "DLAwmxMRsJvL5BSJ4RtNihjs"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 520], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 520], ["LIMIT", 1]]
Completed 201 Created in 12ms (Views: 1.0ms | ActiveRecord: 2.7ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 00:24:03 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$6U73GUUb8C0EnXwBZpqAMewEs32g3JSg1O7h1QqT7Vvrz27CqnDtu"], ["created_at", "2021-02-08 21:24:03.124404"], ["updated_at", "2021-02-08 21:24:03.124404"], ["referral_code", "WARzUfKk5fgS1bHZdmSWDduW"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 521], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 521], ["LIMIT", 1]]
Completed 201 Created in 11ms (Views: 0.4ms | ActiveRecord: 2.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email22@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email22@gmail.com"], ["password_digest", "$2a$04$IdbpuqLIrvcnPJMC3OGOn.FnvIZK0fYfSYkAqYtv1fH0b9E1AqNJK"], ["created_at", "2021-02-08 21:24:03.133008"], ["updated_at", "2021-02-08 21:24:03.133008"], ["referral_code", "XmUnSnf6FXCEWDLNpfvqvRzt"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 00:24:03 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]", "referred_by"=>"XmUnSnf6FXCEWDLNpfvqvRzt"}
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$zFI3V67N9W77Q/sXdYqsIuhBuFAHdIcqdpwmKEuSivzacoAs/1A3e"], ["created_at", "2021-02-08 21:24:03.144758"], ["updated_at", "2021-02-08 21:24:03.144758"], ["referral_code", "4XiW9ZLd61R6FeYKKaG6K7qp"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 523], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "XmUnSnf6FXCEWDLNpfvqvRzt"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 523], ["LIMIT", 1]]
  [1m[36mUser Update (1.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-08 21:24:03.152607"], ["referrer_id", 522], ["id", 523]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 523], ["LIMIT", 1]]
Completed 201 Created in 20ms (Views: 0.4ms | ActiveRecord: 6.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$9pzxpMSfrX7Y5fOwA92x/uUvBF4WrntNe/ZlypUfdMgYUrN/9BHzm"], ["created_at", "2021-02-09 07:54:18.520615"], ["updated_at", "2021-02-09 07:54:18.520615"], ["referral_code", "wjo8rmo6FFAhLZrWKfscUEcs"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$5o/i4KRKPkPd/xwEVine1.FUAHy././1MJaOKs7FhD2T9/AVQPluq"], ["created_at", "2021-02-09 07:55:04.873048"], ["updated_at", "2021-02-09 07:55:04.873048"], ["referral_code", "a5YkEaQVED9RG6Y3bB1eB7ho"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$bnBmuAfComv5cq5wDtR1sOEbu8NMhUt.230JgP0/uaUf1RlX2T/WG"], ["created_at", "2021-02-09 07:55:04.889490"], ["updated_at", "2021-02-09 07:55:04.889490"], ["referral_code", "2KqtaWkGnWnEkCjfBhD3DPfp"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$.kQJdJrdmbGawVq94wu9DOqZrX/AyNwa1/GTFxrR0pCsEe67u0p5C"], ["created_at", "2021-02-09 07:55:26.134956"], ["updated_at", "2021-02-09 07:55:26.134956"], ["referral_code", "z6idWyLEZ17wHzaF2Lmy2FpW"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$FgNf4BaI13cV2M27sJd1e.sYjwjrLugrfxlTHUFkz8PTtHsXSVYoa"], ["created_at", "2021-02-09 07:55:26.190067"], ["updated_at", "2021-02-09 07:55:26.190067"], ["referral_code", "jU3w8g6dDtJqkJjtFeeeyysz"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$LezH/aJ/GRTNIn/xe3vbiuzhYMZB.zSFMfyIbLkEZgl/AMRyQQc3m"], ["created_at", "2021-02-09 08:05:18.617794"], ["updated_at", "2021-02-09 08:05:18.617794"], ["referral_code", "mg8pp9Ratf8mMwABi3qwiCNC"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 529], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$CoorOrIt0VQV./FJ2VIeeO3WXnTTQLzlA.M9DODfJJowPpLtKu1de"], ["created_at", "2021-02-09 08:06:22.798794"], ["updated_at", "2021-02-09 08:06:22.798794"], ["referral_code", "cjqErY4kVL6thz2i9eGMkBEE"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (2.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 530]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 530], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$KK5GbBjFce/Rcc1mn80zXeWN3w.qcnH/3uoqRD//n6eH8TB38X2ZW"], ["created_at", "2021-02-09 08:06:35.894092"], ["updated_at", "2021-02-09 08:06:35.894092"], ["referral_code", "wrSQHesPjJu2NJX5kGfHGFhf"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 531], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$wlnmfyW45.I1okVDi3QLP.N0Bksx7uNRtyu2qvEDC.l3MU6eIaO5i"], ["created_at", "2021-02-09 08:08:17.995062"], ["updated_at", "2021-02-09 08:08:17.995062"], ["referral_code", "RZssCAt4J7FhS1MYNxAxVv9N"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 532], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$TVcdo8GJUNozQkw2V9QjreFw7hCxsJ2umT61LRSseAJKVs/9daJGO"], ["created_at", "2021-02-09 08:08:18.008781"], ["updated_at", "2021-02-09 08:08:18.008781"], ["referral_code", "38epNR97qiJmSTMj2UpfMf2G"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 533]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 533], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$4P1XOlYv5oThxHVca1ro6uCLKKD4wNUpRvPqm.oWdk9he3N98cePa"], ["created_at", "2021-02-09 08:08:33.053574"], ["updated_at", "2021-02-09 08:08:33.053574"], ["referral_code", "nGnMtZgpPMUsGVxFiL4Me8Pm"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 534], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$Dx1LW3QkAOqSRTOU/SxPcOvE91ksDEwPlez83aZYLf1Jf/9andfmS"], ["created_at", "2021-02-09 08:08:33.103221"], ["updated_at", "2021-02-09 08:08:33.103221"], ["referral_code", "vHGPCFwCDFEfreeferQq5TNY"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 535]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 535], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$szNnKz1i5F7GrWA0a5J/3.7GGMvZPP2M/dQ4w5BSTZFI49ps2ft6K"], ["created_at", "2021-02-09 08:09:15.557541"], ["updated_at", "2021-02-09 08:09:15.557541"], ["referral_code", "y7v2VD6d9jGmecKztRyShxDs"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 536], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$8uFmfvz7z1ZOaaaQqnTgdesJai/0cNgZpfbHTD7Cr7WTrKEJPcLti"], ["created_at", "2021-02-09 08:09:15.569097"], ["updated_at", "2021-02-09 08:09:15.569097"], ["referral_code", "cB3rAGKjSqXeGqg5Ucpgn4xR"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 537]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 537], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$1yClYSP4FFXg0qU7EZ02t.IF6TPOCC4ndFCJ2NsSVAyDE7tXlQtH."], ["created_at", "2021-02-09 08:09:34.449110"], ["updated_at", "2021-02-09 08:09:34.449110"], ["referral_code", "uy1PMx4fW4NipvmG1MrcMsBN"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 538], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$D2UVFKZGI4IKfWh2O7Z.iOgTmcA9bpeCrbVmUo5tTmk0WMt.az1wq"], ["created_at", "2021-02-09 08:09:36.606115"], ["updated_at", "2021-02-09 08:09:36.606115"], ["referral_code", "ycJYjgKucDV4tKCVFWjsrfrF"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 539]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 539], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 11:09:50 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 6ms (Views: 0.2ms | ActiveRecord: 2.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 11:09:50 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$9LLTe1afz6nVXlePEyEiJehNiljd5kr9FFe3Py8cEsVhAb5o2aJ8a"], ["created_at", "2021-02-09 08:09:50.059795"], ["updated_at", "2021-02-09 08:09:50.059795"], ["referral_code", "34nS2R7CTHYFkDVJmTG94C9o"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 11:09:50 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email1@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$METxu2MmgfcWh4S32L7i3ea9aJUKAYKH5QL/.pA.HIYJ42SkCMabS"], ["created_at", "2021-02-09 08:09:50.074455"], ["updated_at", "2021-02-09 08:09:50.074455"], ["referral_code", "cnZUZovDDjmvYeLXwYvMFpAM"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 11:09:50 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email2@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "referral_code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2021-02-09 08:09:50.115459"], ["updated_at", "2021-02-09 08:09:50.115459"], ["referral_code", "27iiU2BWAGifz2yzWz3pp5xR"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (1.5ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "dummy value"], ["updated_at", "2021-02-09 08:09:50.120321"], ["id", 542]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "dummy value"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "DUMMY VALUE"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 11:09:50 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$lGjBnooFnAS7Rkq/QobRDO4tGmW.tF3zS6XTAm5s5GaT50qDlwJAe"], ["created_at", "2021-02-09 08:09:50.163139"], ["updated_at", "2021-02-09 08:09:50.163139"], ["referral_code", "Gf4ASmiCffpXVmaFiWga7Gc6"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 543], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 543], ["LIMIT", 1]]
Completed 201 Created in 8ms (Views: 0.4ms | ActiveRecord: 2.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 11:09:50 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$KqTVl0JSHYkzoTzSghTHt.SChe6bXHZPlA41oIzCkJZ40OMMwU2/S"], ["created_at", "2021-02-09 08:09:50.177479"], ["updated_at", "2021-02-09 08:09:50.177479"], ["referral_code", "WNGSf5HcmyDEsUNxqwWbGh5y"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 544], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 544], ["LIMIT", 1]]
Completed 201 Created in 12ms (Views: 0.3ms | ActiveRecord: 3.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email3@gmail.com"], ["password_digest", "$2a$04$tprWG5GV1mmaieIydIyCWOwpogZWFb1KxJXGc7WqY70JBFP1dXElS"], ["created_at", "2021-02-09 08:09:50.192238"], ["updated_at", "2021-02-09 08:09:50.192238"], ["referral_code", "d3QyFB97z4uBYmMnPtxWQyrj"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 11:09:50 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]", "referred_by"=>"d3QyFB97z4uBYmMnPtxWQyrj"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$Msawrd0ZgRH2ekfHyxXwp.naF15OS55V/qiodnwgZZkGCYXxKSF4C"], ["created_at", "2021-02-09 08:09:50.219891"], ["updated_at", "2021-02-09 08:09:50.219891"], ["referral_code", "jS6vG9sd4CDUFsT1HT6PkoB8"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 546], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "d3QyFB97z4uBYmMnPtxWQyrj"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 546], ["LIMIT", 1]]
  [1m[36mUser Update (0.9ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:09:50.227424"], ["referrer_id", 545], ["id", 546]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 546], ["LIMIT", 1]]
Completed 201 Created in 33ms (Views: 0.6ms | ActiveRecord: 5.7ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email4@gmail.com"], ["password_digest", "$2a$04$rFdehvwvUg6dNKR87BOam.4iwCknWdepPU.VtaMVfhOpX3YAIuvxW"], ["created_at", "2021-02-09 08:09:50.262183"], ["updated_at", "2021-02-09 08:09:50.262183"], ["referral_code", "Raf4NCY1AxwpDEA19VSNYtwR"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 11:09:50 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email4@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 9ms (Views: 0.2ms | ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email5@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email5@gmail.com"], ["password_digest", "$2a$04$Lpa61xrsUgEYSlXA7FJ2qu/jVkDjsoLGSJvMwSI.cB5IpBknf.lNG"], ["created_at", "2021-02-09 08:09:50.284004"], ["updated_at", "2021-02-09 08:09:50.284004"], ["referral_code", "4DDQZEwTvwpFszwgGkDWs7B8"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 11:09:50 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email5@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email5@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email5@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email5@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 9ms (Views: 0.2ms | ActiveRecord: 1.4ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email6@gmail.com"], ["password_digest", "$2a$04$sO6O6X/5st5WlCxyjnSn4uO1uXVDwRpiOCsq1uKGvmEiAdB2PF9Ou"], ["created_at", "2021-02-09 08:09:50.311575"], ["updated_at", "2021-02-09 08:09:50.311575"], ["referral_code", "V5mJMESJgBycwukhUHKR69eV"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email7@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email7@gmail.com"], ["password_digest", "$2a$04$l1/ZoQWCPUoEyTToYFp0/.mAg08se2M3W8J24mVt4AV3nBjCtKk4u"], ["created_at", "2021-02-09 08:09:50.318438"], ["updated_at", "2021-02-09 08:09:50.318438"], ["referral_code", "9A5VrhiSbdB4ix743m4KmXYv"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 11:09:50 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email6@gmail.com", "password"=>"[FILTERED]", "referred_by"=>"9A5VrhiSbdB4ix743m4KmXYv"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 7ms (Views: 0.2ms | ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email8@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email8@gmail.com"], ["password_digest", "$2a$04$knVnWQ/WNl.AOptkeZ3/QuoTuWQKlSAFzt7FeDKRPhkEOtDLv8bLS"], ["created_at", "2021-02-09 08:09:50.338147"], ["updated_at", "2021-02-09 08:09:50.338147"], ["referral_code", "R4HTFj6AzHS4kqRENqrE1YtF"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email9@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email9@gmail.com"], ["password_digest", "$2a$04$FkBkqcD85vpmVdeALlT5d.Deq69NDAtDw0RNEOfLYCwhyRugLNTd6"], ["created_at", "2021-02-09 08:09:50.342090"], ["updated_at", "2021-02-09 08:09:50.342090"], ["referral_code", "84rfXrnNRUGafAJ5CE54RigL"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email8@gmail.com"], ["id", 551], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:09:50.344326"], ["referrer_id", 552], ["id", 551]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 552], ["LIMIT", 1]]
  [1m[36mUser Update All (0.6ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 551]]
  [1m[36mUser Update All (0.7ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 552]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 552], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email10@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email10@gmail.com"], ["password_digest", "$2a$04$i.x8.FchT63JPVHdAsp1je.Mo1o1cZWjiHZg3V1B2ZzWDZNjbTXKW"], ["created_at", "2021-02-09 08:09:50.355173"], ["updated_at", "2021-02-09 08:09:50.355173"], ["referral_code", "HQPQV16A49i35fDHtdHS8x8X"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email11@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email11@gmail.com"], ["password_digest", "$2a$04$7XvkokJ1ZFaaRbIt9494wOX87Jvub74qA19xe8qTOfJBJIL8SIi.m"], ["created_at", "2021-02-09 08:09:50.360302"], ["updated_at", "2021-02-09 08:09:50.360302"], ["referral_code", "tE7tPvyCeRzmKKgkq9e9ZPRR"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email10@gmail.com"], ["id", 553], ["LIMIT", 1]]
  [1m[36mUser Update (2.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:09:50.365393"], ["referrer_id", 554], ["id", 553]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 553], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 554], ["LIMIT", 1]]
  [1m[36mUser Update All (0.9ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 553]]
  [1m[36mUser Update All (0.6ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 554]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 553], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email12@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email12@gmail.com"], ["password_digest", "$2a$04$rycz0jlTn3cq/iUAWAE24O8wXScaXnMIvgKMUT8bmbQ5nXGE6AEWO"], ["created_at", "2021-02-09 08:09:50.406581"], ["updated_at", "2021-02-09 08:09:50.406581"], ["referral_code", "LJ1FixYUzJJdS1weQzgiJvwJ"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email13@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email13@gmail.com"], ["password_digest", "$2a$04$3KADu7.Jo1GkPo/oCqDGVeUaxio4LC6xbStayOY071s5Ehx1hwYQ2"], ["created_at", "2021-02-09 08:09:50.411524"], ["updated_at", "2021-02-09 08:09:50.411524"], ["referral_code", "uXvF7jDmNXeqnrexi5bMqLu2"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email12@gmail.com"], ["id", 555], ["LIMIT", 1]]
  [1m[36mUser Update (1.1ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:09:50.418645"], ["referrer_id", 556], ["id", 555]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 556], ["LIMIT", 1]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 555]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 556]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 556], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email14@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email14@gmail.com"], ["password_digest", "$2a$04$YLX9PUTdvdEbyz6/JFp9Qu/RBolj5LpbOO/M4nI4K1ViAEUDOrYGm"], ["created_at", "2021-02-09 08:09:50.440865"], ["updated_at", "2021-02-09 08:09:50.440865"], ["referral_code", "Kt7w2votobLQ9rdfMhUqbhmc"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email15@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email15@gmail.com"], ["password_digest", "$2a$04$msq0j61k3/MsBIcREtRaOOqKsCxoUJCIQYb0pl6kqx.3fXRCKCuUS"], ["created_at", "2021-02-09 08:09:50.446046"], ["updated_at", "2021-02-09 08:09:50.446046"], ["referral_code", "yexgnMBYPs5jwz3NbLAcfja3"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email14@gmail.com"], ["id", 557], ["LIMIT", 1]]
  [1m[36mUser Update (1.7ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:09:50.450899"], ["referrer_id", 558], ["id", 557]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email15@gmail.com"], ["id", 558], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:09:50.457329"], ["referral_points", 5], ["id", 558]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 558], ["LIMIT", 1]]
  [1m[36mUser Update All (0.9ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 557]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 558]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 558]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 558]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 558], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email16@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email16@gmail.com"], ["password_digest", "$2a$04$s29niF3WYoHxonswNa3.B./gV.dSkKTVpVfTmsKZEGIm8db031uKO"], ["created_at", "2021-02-09 08:09:50.469212"], ["updated_at", "2021-02-09 08:09:50.469212"], ["referral_code", "rWxohhknoFSLeZ1kV1RxWVW5"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email17@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email17@gmail.com"], ["password_digest", "$2a$04$XjrtCpT1K4HGMUM1TT.sQem16vOib3TmpVVJEj5FlCW79tIDC.J36"], ["created_at", "2021-02-09 08:09:50.473538"], ["updated_at", "2021-02-09 08:09:50.473538"], ["referral_code", "rCRTyBSumAX7wScxRE1177nH"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email16@gmail.com"], ["id", 559], ["LIMIT", 1]]
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:09:50.476051"], ["referrer_id", 560], ["id", 559]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email17@gmail.com"], ["id", 560], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:09:50.480311"], ["referral_points", 5], ["id", 560]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 560], ["LIMIT", 1]]
  [1m[36mUser Update All (1.0ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 559]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 560]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 560]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 560]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 560], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email18@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email18@gmail.com"], ["password_digest", "$2a$04$tzK/fCuyGfT97nPfBIrhv.f14.VBfRzElyrb/Nbpb1LCuLub2kNsm"], ["created_at", "2021-02-09 08:09:50.494406"], ["updated_at", "2021-02-09 08:09:50.494406"], ["referral_code", "RDFscfDUEwUjiBpHe7zvADC7"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$yRlBZXMSvnlXoA2kpmHfFessl3JxJ4OsEhbdqxOnbcsGNyNkAEel."], ["created_at", "2021-02-09 08:09:50.514862"], ["updated_at", "2021-02-09 08:09:50.514862"], ["referral_code", "dNzA2NjxJZ4J4hjuomiem3mN"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 562], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email19@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email19@gmail.com"], ["password_digest", "$2a$04$C2xaAxSeTTMT0mASPRNAj.uViFIMLPHXdFr9CVr2vxaHwRsYVPHTy"], ["created_at", "2021-02-09 08:09:50.527309"], ["updated_at", "2021-02-09 08:09:50.527309"], ["referral_code", "3nEPq623SgtxdaBycETWBx5K"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$8xyQrKjni4ThkP2HVe6Ph.QrKVT2JIaBHcYdypocyvbztHTHxpFW6"], ["created_at", "2021-02-09 08:09:50.531841"], ["updated_at", "2021-02-09 08:09:50.531841"], ["referral_code", "jhrYncJ14Z1KhrG5Zab8QWmv"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 564], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email20@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email20@gmail.com"], ["password_digest", "$2a$04$/6UkRBW9WQ0XYf6WipnbnuqxHGygsy2KvHfyJU37QTBfx58qP1.wm"], ["created_at", "2021-02-09 08:09:50.542164"], ["updated_at", "2021-02-09 08:09:50.542164"], ["referral_code", "brvTxJbgTSgsCHBRDt7Rt8N2"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$/EY/CM3.dg8ovHUgpyK8o.zOLOxyf916gLScvfV7zOyJnDV6aQZsK"], ["created_at", "2021-02-09 08:09:50.549372"], ["updated_at", "2021-02-09 08:09:50.549372"], ["referral_code", "TxNvG6w7qocNtWNdPRSTS6T4"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 566], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "brvTxJbgTSgsCHBRDt7Rt8N2"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 566], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:09:50.557402"], ["referrer_id", 565], ["id", 566]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email21@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email21@gmail.com"], ["password_digest", "$2a$04$5vtmhIOUnCvrIsaQULMjGu8ymU5.dvMuWVRhEXuhnDhARvF53ztoi"], ["created_at", "2021-02-09 08:09:50.563375"], ["updated_at", "2021-02-09 08:09:50.563375"], ["referral_code", "HG34E5C3euh28vw4p3CY9Pd8"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 11:09:50 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email21@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email21@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.5ms)
Started GET "/users" for 127.0.0.1 at 2021-02-09 11:09:50 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 567], ["LIMIT", 1]]
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email22@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email22@gmail.com"], ["password_digest", "$2a$04$RcfVLfJyy1RTlS.VeEkNQeXQ9SyhAK7wlpT9IuTo12VIbxy.Uom4."], ["created_at", "2021-02-09 08:09:50.577881"], ["updated_at", "2021-02-09 08:09:50.577881"], ["referral_code", "9qej98uDrX3isgJNKFkastmZ"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 11:09:50 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email22@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email22@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.4ms)
Started GET "/users" for 127.0.0.1 at 2021-02-09 11:09:50 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 568], ["LIMIT", 1]]
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
Started GET "/users" for 127.0.0.1 at 2021-02-09 11:09:50 +0300
Processing by UsersController#index as HTML
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email23@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email23@gmail.com"], ["password_digest", "$2a$04$5rm7qUUj62Jsh3FsGzh4hOsRQpIAnGVmVOSn.4tWXiLDkQp.Dr.oC"], ["created_at", "2021-02-09 08:09:50.609226"], ["updated_at", "2021-02-09 08:09:50.609226"], ["referral_code", "mcDyC5tK26js56Z62AigPEYo"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email23@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email24@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email24@gmail.com"], ["password_digest", "$2a$04$8Bykr4IpHKCLtfTGU1naCO8E5VeCnjr35jhvwhm6poQDZDgcYCKDO"], ["created_at", "2021-02-09 08:09:50.621985"], ["updated_at", "2021-02-09 08:09:50.621985"], ["referral_code", "fXDCis3fV9N9cmQrCcSY5D31"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email24@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email25@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email25@gmail.com"], ["password_digest", "$2a$04$nBZKIVXcWxqiaXptBPI.x.8ea9UWKVB1fTO.PpYEPg0hLdXbTHnWu"], ["created_at", "2021-02-09 08:09:50.635070"], ["updated_at", "2021-02-09 08:09:50.635070"], ["referral_code", "qcGrm1gQLQDgpYjK5zV12jzE"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 571]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 571], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email26@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email26@gmail.com"], ["password_digest", "$2a$04$xuUGUlEAb4HF2fnJmx5LUuG1wQ1n.OmuiVqyNV5l9bBRjNAQgAhfa"], ["created_at", "2021-02-09 08:09:50.642836"], ["updated_at", "2021-02-09 08:09:50.642836"], ["referral_code", "9GV1DpgS1XiFfENTN4WaKrsY"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 572], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$8gOPebItAp3GsOCUwTOsfeRjmgVrVXFvQqjZTJEjMFoV8IzOdleCO"], ["created_at", "2021-02-09 08:50:17.707265"], ["updated_at", "2021-02-09 08:50:17.707265"], ["referral_code", "W2iRybmbL21k7kdSG3XJXAXJ"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 573], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$7KpZxi6I3be1NoQyI47f0uPERrLhebMH6uirJKrBhgHsKPtxSPb0y"], ["created_at", "2021-02-09 08:50:17.715771"], ["updated_at", "2021-02-09 08:50:17.715771"], ["referral_code", "1MrCjvdmLqUPTHVwy4pAmZiX"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$XC1m9gK1P/X8JG11eEVfFO02Zawg9W0ZEb4j0rWnMz5Gc0QR4XtQq"], ["created_at", "2021-02-09 08:50:17.724168"], ["updated_at", "2021-02-09 08:50:17.724168"], ["referral_code", "t9Nsp6vYKQxB4NCFwBNniEfK"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 575], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$i4T8zAwbSxiQfp8VOB0FRe2rPqBPpXzzl6oeXbqxVu9N0EzJmuV6S"], ["created_at", "2021-02-09 08:50:17.740395"], ["updated_at", "2021-02-09 08:50:17.740395"], ["referral_code", "x4z3bXiUqZCasvfEEfnVZons"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$Ccd7uZgNdf7q44pnRKFpROO0dR.B3E3U5hn455jtuimZ4UTMUmebe"], ["created_at", "2021-02-09 08:50:17.745862"], ["updated_at", "2021-02-09 08:50:17.745862"], ["referral_code", "iZQWLLfQ7jzDaYpfQdtdZBWK"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 577], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "x4z3bXiUqZCasvfEEfnVZons"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 577], ["LIMIT", 1]]
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:50:17.756415"], ["referrer_id", 576], ["id", 577]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 11:50:17 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 11:50:17 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email3@gmail.com"], ["password_digest", "$2a$04$AtAHBYj/Iy.1DM/g6PwAcO45O9U5n0oA0nYnzx63oioNLF0HGYr1S"], ["created_at", "2021-02-09 08:50:17.791423"], ["updated_at", "2021-02-09 08:50:17.791423"], ["referral_code", "5zF3xbPafq9mrKQa4BczrEcs"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 11:50:17 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email3@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email4@gmail.com"], ["password_digest", "$2a$04$V.G1N6Z9xzGj6p4IbXQpEONaNGfCGRUsGld/r5rSMJDqK2NMatj7."], ["created_at", "2021-02-09 08:50:17.809312"], ["updated_at", "2021-02-09 08:50:17.809312"], ["referral_code", "MwQc4PBqnzk95WbnVvzC54Su"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 11:50:17 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email4@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email5@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email5@gmail.com"], ["password_digest", "$2a$04$1wkyVI867OIe8VPG7N1fP.emI.JCw4GlrCuVZySdoe5xmI/OZfkxi"], ["created_at", "2021-02-09 08:50:17.820862"], ["updated_at", "2021-02-09 08:50:17.820862"], ["referral_code", "eauf7mg8wGjFXL5fMGkiQwgP"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email6@gmail.com"], ["password_digest", "$2a$04$2KS209RZYqwdlR/C0lsnb.lpqSGUSqy.wuVec/K7hX2eXFIM..GTa"], ["created_at", "2021-02-09 08:50:17.829263"], ["updated_at", "2021-02-09 08:50:17.829263"], ["referral_code", "DjG3968ffVhQc7BAuHVHepi9"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email5@gmail.com"], ["id", 580], ["LIMIT", 1]]
  [1m[36mUser Update (1.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:50:17.834836"], ["referrer_id", 581], ["id", 580]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 581], ["LIMIT", 1]]
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 580]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 581]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 581], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email7@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email7@gmail.com"], ["password_digest", "$2a$04$PYI1I/wWuRLcZWNtI6txF.RW8i6bQxrXfvNL.Iv.OhOsiSSKGdmdK"], ["created_at", "2021-02-09 08:50:17.845587"], ["updated_at", "2021-02-09 08:50:17.845587"], ["referral_code", "JUHH7NJ8k8jYRR79BumT8TjM"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email8@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email8@gmail.com"], ["password_digest", "$2a$04$OoRs6VOHgghTQcOUdOfYseGE6oTqPEKVU8O9ZT2MO4he9OSCn/nta"], ["created_at", "2021-02-09 08:50:17.850378"], ["updated_at", "2021-02-09 08:50:17.850378"], ["referral_code", "dxqZFZD1CoYExHNENRP7JNVo"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email7@gmail.com"], ["id", 582], ["LIMIT", 1]]
  [1m[36mUser Update (1.0ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:50:17.855959"], ["referrer_id", 583], ["id", 582]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 582], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 583], ["LIMIT", 1]]
  [1m[36mUser Update All (0.9ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 582]]
  [1m[36mUser Update All (0.7ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 583]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 582], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email9@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email9@gmail.com"], ["password_digest", "$2a$04$ueNW4Ey1EJ1uHbAibeaXZeE1JjCRZWIXBzwFlZdt1z0aNszJVF98G"], ["created_at", "2021-02-09 08:50:17.874386"], ["updated_at", "2021-02-09 08:50:17.874386"], ["referral_code", "cvJ6qKr17GuKtXJERF2q4dcx"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email10@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email10@gmail.com"], ["password_digest", "$2a$04$lQBEiqauHciGY1.f7CwvUuYafcRPFQjpOgbFUwA8n6T3ijSdMkr1S"], ["created_at", "2021-02-09 08:50:17.878474"], ["updated_at", "2021-02-09 08:50:17.878474"], ["referral_code", "Azaf7LWm5Vr9prrtE7ar6uJd"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email9@gmail.com"], ["id", 584], ["LIMIT", 1]]
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:50:17.882381"], ["referrer_id", 585], ["id", 584]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email10@gmail.com"], ["id", 585], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:50:17.886415"], ["referral_points", 5], ["id", 585]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 585], ["LIMIT", 1]]
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 584]]
  [1m[36mUser Update All (0.9ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 585]]
  [1m[36mUser Update All (1.1ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 585]]
  [1m[36mUser Update All (0.9ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 585]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 585], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email11@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email11@gmail.com"], ["password_digest", "$2a$04$3hMpCO5OsEkgMiPZ56AUSOXcHYNoqKUZCkvZXe1jnBRFFam72D5Ya"], ["created_at", "2021-02-09 08:50:17.904033"], ["updated_at", "2021-02-09 08:50:17.904033"], ["referral_code", "x2ebLfv8CCuqCU5GpsjMMcSq"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email12@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email12@gmail.com"], ["password_digest", "$2a$04$aOeJmAOS.XKV1TNyNvdK7.WEfiGDA3zyEyRZqYzUUgorcNRrj9Vn6"], ["created_at", "2021-02-09 08:50:17.908416"], ["updated_at", "2021-02-09 08:50:17.908416"], ["referral_code", "yfiVj5AYBxSNG66653cyzESf"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email11@gmail.com"], ["id", 586], ["LIMIT", 1]]
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:50:17.911689"], ["referrer_id", 587], ["id", 586]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email12@gmail.com"], ["id", 587], ["LIMIT", 1]]
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:50:17.916262"], ["referral_points", 5], ["id", 587]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 587], ["LIMIT", 1]]
  [1m[36mUser Update All (1.0ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 586]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 587]]
  [1m[36mUser Update All (1.0ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 587]]
  [1m[36mUser Update All (1.1ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 587]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 587], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email13@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email13@gmail.com"], ["password_digest", "$2a$04$4tqpFXEFbQwvK1YxxzIkv.IJCFUr0cc97gIv91fq/hAPWMNPI7Ipu"], ["created_at", "2021-02-09 08:50:17.935125"], ["updated_at", "2021-02-09 08:50:17.935125"], ["referral_code", "hhcYxpoDTrjn8nxdkAe7mLdr"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email14@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email14@gmail.com"], ["password_digest", "$2a$04$RwS5ICPabGf2b1VQMFoKKOEp0VkMoVimlwm9d.m8FgbPfAq4YNQra"], ["created_at", "2021-02-09 08:50:17.939750"], ["updated_at", "2021-02-09 08:50:17.939750"], ["referral_code", "ChMvfm1Tn1XPhupA1z3zMWZ7"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email13@gmail.com"], ["id", 588], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:50:17.943174"], ["referrer_id", 589], ["id", 588]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 589], ["LIMIT", 1]]
  [1m[36mUser Update All (0.7ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 588]]
  [1m[36mUser Update All (0.8ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 589]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 589], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email15@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email15@gmail.com"], ["password_digest", "$2a$04$XjcUFFt1WyuJPW/DQNk2XO0aGXYboxIfyGisy6snxYN93ifvKPNNu"], ["created_at", "2021-02-09 08:50:17.963840"], ["updated_at", "2021-02-09 08:50:17.963840"], ["referral_code", "ndf9M8CYwNwT6QLXSrrkH5Qi"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email15@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email16@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email16@gmail.com"], ["password_digest", "$2a$04$hOUnhviXd9Fi9mP25tZynOAbd/VsJjKRw5.3pgAk.rtAWRIrKtkFe"], ["created_at", "2021-02-09 08:50:17.971132"], ["updated_at", "2021-02-09 08:50:17.971132"], ["referral_code", "xTuA1awp6iTQCKUsAtugySyN"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email16@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "referral_code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2021-02-09 08:50:18.029250"], ["updated_at", "2021-02-09 08:50:18.029250"], ["referral_code", "7L4RBwAokqZ6edmJwT2EgRFW"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "dummy value"], ["updated_at", "2021-02-09 08:50:18.031068"], ["id", 592]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "dummy value"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "DUMMY VALUE"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email17@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email17@gmail.com"], ["password_digest", "$2a$04$K1jz2HGQ61YLs0kAQ3lCNO3jacNo/lW9TvrfYPQajtlI3DFioq88C"], ["created_at", "2021-02-09 08:50:18.046062"], ["updated_at", "2021-02-09 08:50:18.046062"], ["referral_code", "6oTs1T5S17jaZB9ehXbsbhBc"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 593]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 593], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email18@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email18@gmail.com"], ["password_digest", "$2a$04$lb8CcTbKhSENbM9HH3eEJetRkccqqRuwMT3iOorqqB7gcN9uBCvMa"], ["created_at", "2021-02-09 08:50:18.077606"], ["updated_at", "2021-02-09 08:50:18.077606"], ["referral_code", "7AuyHmQjRkPbbeZbBjKGxpeG"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 594], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 11:50:18 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$xQ2h6h1d/S3AMQBYFQX79.aWZpjtVa78cdmcrTGtkyntCMvg0R7fG"], ["created_at", "2021-02-09 08:50:18.107959"], ["updated_at", "2021-02-09 08:50:18.107959"], ["referral_code", "Pj4kWAtrQYRt5XP4g1AGFFrm"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 595], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 595], ["LIMIT", 1]]
Completed 201 Created in 10ms (Views: 0.6ms | ActiveRecord: 1.9ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 11:50:18 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$wenQyYQuY7D09C9DS.L7re/jpotI3.3K/4mrT8Ib1o6e.y7Ba8JJm"], ["created_at", "2021-02-09 08:50:18.127375"], ["updated_at", "2021-02-09 08:50:18.127375"], ["referral_code", "gfCTAjN3eQEFH96RLwq2uq5B"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 596], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 596], ["LIMIT", 1]]
Completed 201 Created in 16ms (Views: 0.4ms | ActiveRecord: 4.3ms)
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email19@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email19@gmail.com"], ["password_digest", "$2a$04$ZWXUQBnZKxrRMnLsfPXYXOOZXeoTceXJRu2VRTpCAK/cFZpaXkrOS"], ["created_at", "2021-02-09 08:50:18.145647"], ["updated_at", "2021-02-09 08:50:18.145647"], ["referral_code", "abLhqv7zd3t1Jd44MTy8u8H8"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 11:50:18 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]", "referred_by"=>"abLhqv7zd3t1Jd44MTy8u8H8"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$KZgxj2Yvqp3iz36gWGEz5uHiS3aM86gCM1uJex9bGlavlYFkVc5O6"], ["created_at", "2021-02-09 08:50:18.168068"], ["updated_at", "2021-02-09 08:50:18.168068"], ["referral_code", "hEmD5oy3dYdbAJDiTDjY9NTX"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 598], ["LIMIT", 1]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "abLhqv7zd3t1Jd44MTy8u8H8"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 598], ["LIMIT", 1]]
  [1m[36mUser Update (1.7ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:50:18.179520"], ["referrer_id", 597], ["id", 598]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 598], ["LIMIT", 1]]
Completed 201 Created in 28ms (Views: 1.5ms | ActiveRecord: 8.2ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email20@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email20@gmail.com"], ["password_digest", "$2a$04$pKUPnvoL06oOjKJPROKEUOtWpwceG3.Oxb8tV45RhqW4yvKUHhqEC"], ["created_at", "2021-02-09 08:50:18.197516"], ["updated_at", "2021-02-09 08:50:18.197516"], ["referral_code", "S2GpzWcu9A2s6pTQaP3DnBjn"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 11:50:18 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email20@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email20@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email20@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email20@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 15ms (Views: 0.4ms | ActiveRecord: 3.1ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email21@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email21@gmail.com"], ["password_digest", "$2a$04$wWT1s1ArQoN66fdgnEiDZenvUwqBaijEiwxlpPIgd.LeVp.V5LlWy"], ["created_at", "2021-02-09 08:50:18.227878"], ["updated_at", "2021-02-09 08:50:18.227878"], ["referral_code", "4eSqAjLqybCt3FCdQWhiHVuU"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 11:50:18 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email21@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email21@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email21@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email21@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 7ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email22@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email22@gmail.com"], ["password_digest", "$2a$04$ew5KJG5FfcmaBPRgyom8e.JeNdjZzSk7NH3LVjJBZc5FsjwvuuwtS"], ["created_at", "2021-02-09 08:50:18.247506"], ["updated_at", "2021-02-09 08:50:18.247506"], ["referral_code", "ZF9W5jkhfis87oAZDHVrAgDQ"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email23@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email23@gmail.com"], ["password_digest", "$2a$04$t0M/91r6yb5nxNkufmMMFu38jvMwaUS29qJQmQvPn4IeIbYuQxY2q"], ["created_at", "2021-02-09 08:50:18.255458"], ["updated_at", "2021-02-09 08:50:18.255458"], ["referral_code", "gCZimNV8zew8ZkmBtc6iAeQC"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 11:50:18 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email22@gmail.com", "password"=>"[FILTERED]", "referred_by"=>"gCZimNV8zew8ZkmBtc6iAeQC"}
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email22@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email22@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email22@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 10ms (Views: 0.2ms | ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/users" for 127.0.0.1 at 2021-02-09 11:50:18 +0300
Processing by UsersController#index as HTML
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email24@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email24@gmail.com"], ["password_digest", "$2a$04$84IyDHlZFSxw9OLpeeQ3tuuaSUaz8d5Cq8PY01AZ81DaTc06Oy9Ua"], ["created_at", "2021-02-09 08:50:18.282975"], ["updated_at", "2021-02-09 08:50:18.282975"], ["referral_code", "UFhAyTiLHtqEi8jszPxCL4Qi"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 11:50:18 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email24@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email24@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.5ms)
Started GET "/users" for 127.0.0.1 at 2021-02-09 11:50:18 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 603], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email25@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email25@gmail.com"], ["password_digest", "$2a$04$Tqqvud9/QiOdUV.67nJ3WeLlCmTOiIp336EvFh1h2INTaZVHuHCEK"], ["created_at", "2021-02-09 08:50:18.314648"], ["updated_at", "2021-02-09 08:50:18.314648"], ["referral_code", "tvhLf9GozJMSPgf9op462Xps"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 11:50:18 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email25@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email25@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 5ms (Views: 0.4ms | ActiveRecord: 0.5ms)
Started GET "/users" for 127.0.0.1 at 2021-02-09 11:50:18 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 604], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.4ms | ActiveRecord: 0.2ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email26@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email26@gmail.com"], ["password_digest", "$2a$04$tNK/bihSpNrCiimBwOGA4uufINWWNm3awtunrYgVbBPnxZugN7.5K"], ["created_at", "2021-02-09 08:50:18.343532"], ["updated_at", "2021-02-09 08:50:18.343532"], ["referral_code", "TWYLe16HWZo9wxyyNiuzNjFr"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$/Vdr7r.qsNVzMDio8DhY3OSeauttMXcnggmkeNvm9IiGqlWjIu2zy"], ["created_at", "2021-02-09 08:50:55.057142"], ["updated_at", "2021-02-09 08:50:55.057142"], ["referral_code", "RE5L4AF7XQH6bdhxb7RGXCFy"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$Sur3mRyiNHZ4D9q7j2tBTeTD8ozoZA0v63Vnfk3BoeJw1RylklzKm"], ["created_at", "2021-02-09 08:50:55.107031"], ["updated_at", "2021-02-09 08:50:55.107031"], ["referral_code", "fK8PKbEAsyze3JxND7zAWR1h"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email3@gmail.com"], ["password_digest", "$2a$04$xsdAfnH.E7849TvdWJEjkO0GuG0C3CZ8pC8LN8Hk/WulMV1HOntQ."], ["created_at", "2021-02-09 08:50:55.116695"], ["updated_at", "2021-02-09 08:50:55.116695"], ["referral_code", "tnuiAZoXkHyTR3qKKmV2gRD9"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 11:50:55 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email3@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email4@gmail.com"], ["password_digest", "$2a$04$Lou9/V2mTwaYvXMEazADBuLZwdFd6IdZ8mn136e1jwrHsL/TJmgKm"], ["created_at", "2021-02-09 08:50:55.134499"], ["updated_at", "2021-02-09 08:50:55.134499"], ["referral_code", "yDSQbGYuZR1cyxM3tjKLo17H"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 11:50:55 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email4@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.7ms)
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 11:50:55 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.6ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 11:50:55 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 11:50:55 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$HuJhI86gQbSvC7jCWzNGM.rRPFgxEb6oup6vqVoMciRuRyjngL1vK"], ["created_at", "2021-02-09 08:50:55.166370"], ["updated_at", "2021-02-09 08:50:55.166370"], ["referral_code", "FYvuHuJHFcK2aiJq36iA4Lra"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 610], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 610], ["LIMIT", 1]]
Completed 201 Created in 15ms (Views: 1.0ms | ActiveRecord: 2.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 11:50:55 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$z/TtCcwnQUdKEfU9ihcHy.oyVVMCON4xua5sgW2RRwRYw2LAD5/6W"], ["created_at", "2021-02-09 08:50:55.190024"], ["updated_at", "2021-02-09 08:50:55.190024"], ["referral_code", "qNvkEeCbf4YMmxVJLD6vAgoL"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 611], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 611], ["LIMIT", 1]]
Completed 201 Created in 7ms (Views: 0.3ms | ActiveRecord: 1.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email5@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email5@gmail.com"], ["password_digest", "$2a$04$Rj5rlJP02MPx826dY.z3CeXjNQMpELhEiMSLcwZ/VlInaDRYPdLU6"], ["created_at", "2021-02-09 08:50:55.198249"], ["updated_at", "2021-02-09 08:50:55.198249"], ["referral_code", "nKt7CQaiDUAAdoui6wirdKD8"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 11:50:55 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]", "referred_by"=>"nKt7CQaiDUAAdoui6wirdKD8"}
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$ZhKZ2GApDrXXoPWcZuQRfuDr2Mn9aAjj8ZszaV1mmzzZgLqaVkBLC"], ["created_at", "2021-02-09 08:50:55.222395"], ["updated_at", "2021-02-09 08:50:55.222395"], ["referral_code", "dgHTxMHnmVzVYX81TSmm97t8"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 613], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "nKt7CQaiDUAAdoui6wirdKD8"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 613], ["LIMIT", 1]]
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:50:55.226787"], ["referrer_id", 612], ["id", 613]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 613], ["LIMIT", 1]]
Completed 201 Created in 14ms (Views: 0.4ms | ActiveRecord: 3.7ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email6@gmail.com"], ["password_digest", "$2a$04$kOlIk2kjFXZI1TeGeLkU3OlTXl7mlk9Zn76r78LidPhReiIqPOQKy"], ["created_at", "2021-02-09 08:50:55.239613"], ["updated_at", "2021-02-09 08:50:55.239613"], ["referral_code", "cb3v7euHdnCBTwQ83MQa1yVA"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 11:50:55 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email6@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 11ms (Views: 0.1ms | ActiveRecord: 1.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email7@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email7@gmail.com"], ["password_digest", "$2a$04$e.lXWy2bV2hnp4pBXOkIw.Oz8GD/knAyWlOuG/QvBhvuCBIjMeXZe"], ["created_at", "2021-02-09 08:50:55.261376"], ["updated_at", "2021-02-09 08:50:55.261376"], ["referral_code", "L6MhazWzVNaoRAXUDkAj4Qwr"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 11:50:55 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email7@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email7@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email7@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email7@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 11ms (Views: 0.3ms | ActiveRecord: 1.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email8@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email8@gmail.com"], ["password_digest", "$2a$04$tTXp5Of.pS4O8CwVXSui5OpR6UKnhaZez/O1j2199eNO69E9OL0PS"], ["created_at", "2021-02-09 08:50:55.283430"], ["updated_at", "2021-02-09 08:50:55.283430"], ["referral_code", "TnGe6Ko4Jatkpma8wUg1ijRT"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email9@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email9@gmail.com"], ["password_digest", "$2a$04$EmgEuhXkdH2dC692jwquge6krT3eYvlSFV1v.dd/2zNvZWjjxhm2y"], ["created_at", "2021-02-09 08:50:55.288212"], ["updated_at", "2021-02-09 08:50:55.288212"], ["referral_code", "ozu4WXXC2XMHyEGVzEUyGPWf"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 11:50:55 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email8@gmail.com", "password"=>"[FILTERED]", "referred_by"=>"ozu4WXXC2XMHyEGVzEUyGPWf"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email8@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email8@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email8@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 7ms (Views: 0.3ms | ActiveRecord: 1.4ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email10@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email10@gmail.com"], ["password_digest", "$2a$04$xcPv56QWfNcBD9Y15M6lieCSt2s7BtL8IjhF9gYTD9ZwPYL2k9H.K"], ["created_at", "2021-02-09 08:50:55.307658"], ["updated_at", "2021-02-09 08:50:55.307658"], ["referral_code", "gKiLcRTHwDiD4UjkoznnzCd4"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 11:50:55 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email10@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email10@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.4ms)
Started GET "/users" for 127.0.0.1 at 2021-02-09 11:50:55 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 618], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email11@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email11@gmail.com"], ["password_digest", "$2a$04$g6GvV9GnFZ6Qyx7Zg7ZkRu5kuVDbbNXw6V41Z85yAvvXy06MhDCUi"], ["created_at", "2021-02-09 08:50:55.325585"], ["updated_at", "2021-02-09 08:50:55.325585"], ["referral_code", "XpBuKXmeNVJwhBbFoiDZBQkN"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 11:50:55 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email11@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email11@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.2ms)
Started GET "/users" for 127.0.0.1 at 2021-02-09 11:50:55 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 619], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.4ms | ActiveRecord: 0.6ms)
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
Started GET "/users" for 127.0.0.1 at 2021-02-09 11:50:55 +0300
Processing by UsersController#index as HTML
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email12@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email12@gmail.com"], ["password_digest", "$2a$04$JhnCA5Ur7OpnbrWjstRK1u3QIQEhcE5oqDKNoeikPyN6REM8OCp6y"], ["created_at", "2021-02-09 08:50:55.352866"], ["updated_at", "2021-02-09 08:50:55.352866"], ["referral_code", "2pfoEsRhKH1k8iogo2px8VSw"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email13@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email13@gmail.com"], ["password_digest", "$2a$04$BCL0aMWmZw7n.xoxryZmWedh08LfbBXjyXX89sca/QNTIaef8wJ6i"], ["created_at", "2021-02-09 08:50:55.358624"], ["updated_at", "2021-02-09 08:50:55.358624"], ["referral_code", "UjMtPuQ3RgjpC5g2pTZB43KZ"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 621], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email14@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email14@gmail.com"], ["password_digest", "$2a$04$O6ZWzDaFk4YUrnWYkfkErenDNV.5NSwBC7iIr0FY3ga1ni/RHA6Ja"], ["created_at", "2021-02-09 08:50:55.367016"], ["updated_at", "2021-02-09 08:50:55.367016"], ["referral_code", "o73Kde2hx2qYUp5cGUNc8QRY"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 622]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 622], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$IGmVnuPcOTytVUZoyz0MKuh8sRtip0y6nxpy5hF770ERjV6L20JT2"], ["created_at", "2021-02-09 08:50:55.385764"], ["updated_at", "2021-02-09 08:50:55.385764"], ["referral_code", "mgbJyZuEest5aGknbXsLtmLG"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 623], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email15@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email15@gmail.com"], ["password_digest", "$2a$04$ZIezWbmSAMAUJDmToDtafev8n/kKU275Hi8FXXSCRfCUOs9ENvM6m"], ["created_at", "2021-02-09 08:50:55.393135"], ["updated_at", "2021-02-09 08:50:55.393135"], ["referral_code", "8DywE6cvr3f9NdHjEuLgFrGr"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$ov67rcajfZfwjHboJkb83up.IkrWqTrkdfyD03bCBqogCButZO34a"], ["created_at", "2021-02-09 08:50:55.400345"], ["updated_at", "2021-02-09 08:50:55.400345"], ["referral_code", "rBUFwa3rQBMNsMMjyKjioy2Y"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 625], ["LIMIT", 1]]
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "8DywE6cvr3f9NdHjEuLgFrGr"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 625], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:50:55.408799"], ["referrer_id", 624], ["id", 625]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email16@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email16@gmail.com"], ["password_digest", "$2a$04$g5uBpZUpg/QdZczzc75QNOrsVBZeO18YdoSdxfICGO.JpPJecE1gS"], ["created_at", "2021-02-09 08:50:55.420808"], ["updated_at", "2021-02-09 08:50:55.420808"], ["referral_code", "ETHyXDfsj8ZqrdjBdhbhpjbv"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$FFh9.bodCCWXWwfEbc0rues/Zdp5gZcc0iN9EcdkwFNIFDVXeoMpa"], ["created_at", "2021-02-09 08:50:55.426006"], ["updated_at", "2021-02-09 08:50:55.426006"], ["referral_code", "q6dfzf57WG3N2hojnj9DAyDu"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 627], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email17@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email17@gmail.com"], ["password_digest", "$2a$04$NKNI5TNrHkXHHQhjayKQB.WftqyYxQtRtThzTDtmqvXowbdzANIK6"], ["created_at", "2021-02-09 08:50:55.451844"], ["updated_at", "2021-02-09 08:50:55.451844"], ["referral_code", "VKM7wbJTALrHd9yiVX4hFAxE"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email18@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email18@gmail.com"], ["password_digest", "$2a$04$FYxvcmrV0zwpAj9eFC/KaeI4jIu.vG0h/CykVFJtY9UyLjCs/ngSK"], ["created_at", "2021-02-09 08:50:55.474955"], ["updated_at", "2021-02-09 08:50:55.474955"], ["referral_code", "MdQGHKFfJ5SoYvyBUS3v7foD"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email17@gmail.com"], ["id", 628], ["LIMIT", 1]]
  [1m[36mUser Update (1.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:50:55.480213"], ["referrer_id", 629], ["id", 628]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 629], ["LIMIT", 1]]
  [1m[36mUser Update All (0.6ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 628]]
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 629]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 629], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email19@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email19@gmail.com"], ["password_digest", "$2a$04$gJo7nFLRSeJm6xInCmGRZep..RWe8.rXGv1GVImdE6f3/ZRdV/1jS"], ["created_at", "2021-02-09 08:50:55.492546"], ["updated_at", "2021-02-09 08:50:55.492546"], ["referral_code", "QvSvcsitKPmhzkNeFZNL4MXm"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email20@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email20@gmail.com"], ["password_digest", "$2a$04$eIm8taf5MobJmzroU9MCU.iUIMk3IBTS84sKb1ilylQsxx8Vmr66G"], ["created_at", "2021-02-09 08:50:55.498187"], ["updated_at", "2021-02-09 08:50:55.498187"], ["referral_code", "3bdmnTdnjJ9tHCZg56e46dpD"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email19@gmail.com"], ["id", 630], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:50:55.502205"], ["referrer_id", 631], ["id", 630]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 630], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 631], ["LIMIT", 1]]
  [1m[36mUser Update All (0.7ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 630]]
  [1m[36mUser Update All (0.8ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 631]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 630], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email21@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email21@gmail.com"], ["password_digest", "$2a$04$R2y6lP/39MaLMjUWv.iIyeXf7g448XmPeXUGM.XcF1d7WYDcGnjJy"], ["created_at", "2021-02-09 08:50:55.520484"], ["updated_at", "2021-02-09 08:50:55.520484"], ["referral_code", "LrbURWmdoDhUjYiSkEtPNb1c"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email22@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email22@gmail.com"], ["password_digest", "$2a$04$mNstpy8e6YOHtgf9LjBcvOQPhFjeX/d2xP3cyJX79ED2ZWkv5rq/6"], ["created_at", "2021-02-09 08:50:55.524360"], ["updated_at", "2021-02-09 08:50:55.524360"], ["referral_code", "JBXaXWNP2QQc6X8uuPpwZ627"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email21@gmail.com"], ["id", 632], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:50:55.528073"], ["referrer_id", 633], ["id", 632]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 633], ["LIMIT", 1]]
  [1m[36mUser Update All (0.7ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 632]]
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 633]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 633], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email23@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email23@gmail.com"], ["password_digest", "$2a$04$En51wsycP760MGvH7dEvdeqvCOO1a9oH6Udiquk2Gy7I23ktKHcZ2"], ["created_at", "2021-02-09 08:50:55.542944"], ["updated_at", "2021-02-09 08:50:55.542944"], ["referral_code", "sSGaFwE8QhvY4K9ygh6D22UH"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email24@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email24@gmail.com"], ["password_digest", "$2a$04$UEk2ia7xcS4XL/SRt2unm.vfBC51uP7FbXEgJow6U2Hq37mzJ3f82"], ["created_at", "2021-02-09 08:50:55.550777"], ["updated_at", "2021-02-09 08:50:55.550777"], ["referral_code", "GdaH9e5hKLBce2inZrs6jWpU"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email23@gmail.com"], ["id", 634], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:50:55.553388"], ["referrer_id", 635], ["id", 634]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email24@gmail.com"], ["id", 635], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:50:55.555453"], ["referral_points", 5], ["id", 635]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 635], ["LIMIT", 1]]
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 634]]
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 635]]
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 635]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 635]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 635], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email25@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email25@gmail.com"], ["password_digest", "$2a$04$BWivKqxCpfLJKXASIL2wMOjxqCFTkSa09oZ0hrihCwQjiJCq0.uTC"], ["created_at", "2021-02-09 08:50:55.568601"], ["updated_at", "2021-02-09 08:50:55.568601"], ["referral_code", "MgBrXMe7joj7VipxKsddykEm"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email26@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email26@gmail.com"], ["password_digest", "$2a$04$9CwfoKMNypNQEP1B0ooO1OhO8ZEyrm5VVNqECk3PiTXQ.9U1hhDpC"], ["created_at", "2021-02-09 08:50:55.575448"], ["updated_at", "2021-02-09 08:50:55.575448"], ["referral_code", "asQRCFZzhc4vvCMWZ5XAB8yM"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email25@gmail.com"], ["id", 636], ["LIMIT", 1]]
  [1m[36mUser Update (1.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:50:55.580091"], ["referrer_id", 637], ["id", 636]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email26@gmail.com"], ["id", 637], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:50:55.585137"], ["referral_points", 5], ["id", 637]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 637], ["LIMIT", 1]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 636]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 637]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 637]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 637]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 637], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "referral_code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2021-02-09 08:50:55.622446"], ["updated_at", "2021-02-09 08:50:55.622446"], ["referral_code", "Dcjb9kZXFDub2DHqHh5w7Wkz"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "dummy value"], ["updated_at", "2021-02-09 08:50:55.625137"], ["id", 638]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "dummy value"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "DUMMY VALUE"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 11:55:29 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 9ms (Views: 0.2ms | ActiveRecord: 5.2ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 11:55:29 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$V6OkNt33xw1skb.brs3zEuo//Ae5iY1DEyeuvwQ/8N1Z75mT5LS/i"], ["created_at", "2021-02-09 08:55:29.701156"], ["updated_at", "2021-02-09 08:55:29.701156"], ["referral_code", "fyFDRxdgczzvzmnwCMvcVd5n"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 11:55:29 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email1@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$Bxi.AbtUHqD/TeebgzC0o.nApq8GZ/33oO/RT15QFD3kLq0EFKFaq"], ["created_at", "2021-02-09 08:55:29.715161"], ["updated_at", "2021-02-09 08:55:29.715161"], ["referral_code", "pJgKM6gHJdoCr5FWkcYfrJqb"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 11:55:29 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email2@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email3@gmail.com"], ["password_digest", "$2a$04$338NEvPdYewMbYQPWXB2Me9YdjSW/uitrV0lu00Hz74zZO/UCuGfy"], ["created_at", "2021-02-09 08:55:29.728809"], ["updated_at", "2021-02-09 08:55:29.728809"], ["referral_code", "3QcMQ5T57Yre6KJZ71Yct4rv"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email4@gmail.com"], ["password_digest", "$2a$04$zp/.Qu1B3PKias4ZC9/kVOARSQy4iyXt5rgtrdFtANfni4YkZuR7q"], ["created_at", "2021-02-09 08:55:29.732994"], ["updated_at", "2021-02-09 08:55:29.732994"], ["referral_code", "xjUZfhhZnEjUhUkWEFarJMch"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email3@gmail.com"], ["id", 641], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:55:29.738274"], ["referrer_id", 642], ["id", 641]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 641], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 642], ["LIMIT", 1]]
  [1m[36mUser Update All (0.8ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 641]]
  [1m[36mUser Update All (0.6ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 642]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 641], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email5@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email5@gmail.com"], ["password_digest", "$2a$04$SQC8c37QWyADO2.yvAPQWutmakF6MQcKT6woBuAjPerD2ICl5LBJi"], ["created_at", "2021-02-09 08:55:29.756563"], ["updated_at", "2021-02-09 08:55:29.756563"], ["referral_code", "RzFaa2evmS9PQJjBkFDQu1Lq"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email6@gmail.com"], ["password_digest", "$2a$04$rV5urjYB8c1B82jsmtIl5eCVDktJJe2uJlFCc2/JcGoYeVN6Acqou"], ["created_at", "2021-02-09 08:55:29.762714"], ["updated_at", "2021-02-09 08:55:29.762714"], ["referral_code", "TAsKbwaMbD2QimNYrKxv7CcE"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email5@gmail.com"], ["id", 643], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:55:29.765410"], ["referrer_id", 644], ["id", 643]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 644], ["LIMIT", 1]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 643]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 644]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 644], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email7@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email7@gmail.com"], ["password_digest", "$2a$04$hBRUZpHD4dTSwwk6iR0QNeBTywrAeJ1CQhlCY1tqgnxxR/S.Uc0xS"], ["created_at", "2021-02-09 08:55:29.774114"], ["updated_at", "2021-02-09 08:55:29.774114"], ["referral_code", "nNd5wJLXwpzNf23A9Gm6mzxD"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email8@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email8@gmail.com"], ["password_digest", "$2a$04$c9z7eDASE4w6mScsOf9/qOo5R7zkhUYHYfCjVOPKNq3Tg32BZO1.C"], ["created_at", "2021-02-09 08:55:29.781052"], ["updated_at", "2021-02-09 08:55:29.781052"], ["referral_code", "mLJA8iTqW48rYxQs26obQW5N"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email7@gmail.com"], ["id", 645], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:55:29.787310"], ["referrer_id", 646], ["id", 645]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 646], ["LIMIT", 1]]
  [1m[36mUser Update All (1.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 645]]
  [1m[36mUser Update All (0.9ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 646]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 646], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email9@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email9@gmail.com"], ["password_digest", "$2a$04$couW.aCfRBnvg6rjz4tgmukXFm2p5NuBOtF.EzpGivVkEhpCE3Sq6"], ["created_at", "2021-02-09 08:55:29.803411"], ["updated_at", "2021-02-09 08:55:29.803411"], ["referral_code", "UbbxScx7zAmbC7QtsfknqY7v"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email10@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email10@gmail.com"], ["password_digest", "$2a$04$Jqu82v.J5.JVizFQ2Z/b2eg1G4/xjutGZcKp5cT/Ymn2U3fCUMUq2"], ["created_at", "2021-02-09 08:55:29.808814"], ["updated_at", "2021-02-09 08:55:29.808814"], ["referral_code", "Tn1nmj6EbCRUV5uTFKvk18bN"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email9@gmail.com"], ["id", 647], ["LIMIT", 1]]
  [1m[36mUser Update (1.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:55:29.813948"], ["referrer_id", 648], ["id", 647]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email10@gmail.com"], ["id", 648], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:55:29.821065"], ["referral_points", 5], ["id", 648]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 648], ["LIMIT", 1]]
  [1m[36mUser Update All (1.0ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 647]]
  [1m[36mUser Update All (1.1ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 648]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 648]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 648]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 648], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email11@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email11@gmail.com"], ["password_digest", "$2a$04$k/Dy.49Vbe99gz6RHpYb4OT2kIDUDV./ZQT.bDXrX/4NFcVqc3ZEO"], ["created_at", "2021-02-09 08:55:29.836253"], ["updated_at", "2021-02-09 08:55:29.836253"], ["referral_code", "XT2tQH1SKLioVpHWD1h1GRSZ"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email12@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email12@gmail.com"], ["password_digest", "$2a$04$GoGNNwnQeH/uevqXQfSQQOYIVdx/bzoVmZmQgTHfTAToJAJeggMnC"], ["created_at", "2021-02-09 08:55:29.840612"], ["updated_at", "2021-02-09 08:55:29.840612"], ["referral_code", "so7xtWMaHpk22cqaadeDdW2k"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email11@gmail.com"], ["id", 649], ["LIMIT", 1]]
  [1m[36mUser Update (0.9ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:55:29.846440"], ["referrer_id", 650], ["id", 649]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email12@gmail.com"], ["id", 650], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:55:29.852740"], ["referral_points", 5], ["id", 650]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 650], ["LIMIT", 1]]
  [1m[36mUser Update All (1.1ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 649]]
  [1m[36mUser Update All (1.0ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 650]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 650]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 650]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 650], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "referral_code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2021-02-09 08:55:29.894792"], ["updated_at", "2021-02-09 08:55:29.894792"], ["referral_code", "9iiwk51rgdpv11MVKkJKhxza"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "dummy value"], ["updated_at", "2021-02-09 08:55:29.896781"], ["id", 651]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "dummy value"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "DUMMY VALUE"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email13@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email13@gmail.com"], ["password_digest", "$2a$04$s4gFwn/8N7A6bRFyEJ1drusBRX2bojDNiHlKLcG4rUxqbpn1fk3Qu"], ["created_at", "2021-02-09 08:55:29.941457"], ["updated_at", "2021-02-09 08:55:29.941457"], ["referral_code", "ebdqnLjoii6FS1WWU2Nu8Trx"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 652], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email14@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email14@gmail.com"], ["password_digest", "$2a$04$YCuwQZd26XUboUbE8c3/r.2PFMclHR7effh8gxvEvRf8q8uV3OTp."], ["created_at", "2021-02-09 08:55:29.956494"], ["updated_at", "2021-02-09 08:55:29.956494"], ["referral_code", "K4eY26qEvcD1Qd5GVwGN123p"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 653]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 653], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email15@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email15@gmail.com"], ["password_digest", "$2a$04$KoBN75pulUF1EQoJHFSB0u9Zt4pd4BEtTm8UKionM5PC8yRe7dLXm"], ["created_at", "2021-02-09 08:55:29.967087"], ["updated_at", "2021-02-09 08:55:29.967087"], ["referral_code", "nwKGAktjaRRKRSMrwSk3Q7xv"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email16@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email16@gmail.com"], ["password_digest", "$2a$04$n/H1hnI8pRyz0r79BA494OU0V8PxJLFuA1rA0yKZT19E.TZfuzeke"], ["created_at", "2021-02-09 08:55:48.794857"], ["updated_at", "2021-02-09 08:55:48.794857"], ["referral_code", "2NBHD37XgLJSJg9Le6GJPJLr"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email16@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email17@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email17@gmail.com"], ["password_digest", "$2a$04$2s5h5lCn8NXX8NDxR.MZbupgoOfK16AskhO5VJ02eH7.NIsbPBIcq"], ["created_at", "2021-02-09 08:55:48.801662"], ["updated_at", "2021-02-09 08:55:48.801662"], ["referral_code", "FRC4xsWnQ2anYbSRybpWbsno"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email17@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 11:55:48 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$A557PJrCd4QZ.BGTji2yEek/3rbIl610tqNXL0Ix3m358/qs1aH0K"], ["created_at", "2021-02-09 08:55:48.812992"], ["updated_at", "2021-02-09 08:55:48.812992"], ["referral_code", "2U5PAJZrv1FrkgJ6Wn8v16FZ"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 657], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 657], ["LIMIT", 1]]
Completed 201 Created in 7ms (Views: 0.3ms | ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 11:55:48 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$/Jiziw1E5xehqvvP.2CekuiihwjBMpg7ygXNsLX9PYezzigLaI3BC"], ["created_at", "2021-02-09 08:55:48.823373"], ["updated_at", "2021-02-09 08:55:48.823373"], ["referral_code", "Gn3Tci8bXZzQvjsoeERUeQN8"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 658], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 658], ["LIMIT", 1]]
Completed 201 Created in 9ms (Views: 0.7ms | ActiveRecord: 1.9ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email18@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email18@gmail.com"], ["password_digest", "$2a$04$4lEgiGVi.QTBB0uLg/wmTeMkkrnj0jcHbHC/NJvTc6zw5QK4GVuty"], ["created_at", "2021-02-09 08:55:48.838486"], ["updated_at", "2021-02-09 08:55:48.838486"], ["referral_code", "bTNYDrvUEiVhix32gQGVLQ7J"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 11:55:48 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]", "referred_by"=>"bTNYDrvUEiVhix32gQGVLQ7J"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$boUR.w7Q5wPPVdtj5ONW0.TvSRVY9Twuh2v7i6ENRyB3XCRV/UABa"], ["created_at", "2021-02-09 08:55:48.853534"], ["updated_at", "2021-02-09 08:55:48.853534"], ["referral_code", "tFnyH7BSL6aP57kfaGjx7X9y"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 660], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "bTNYDrvUEiVhix32gQGVLQ7J"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 660], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:55:48.859209"], ["referrer_id", 659], ["id", 660]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 660], ["LIMIT", 1]]
Completed 201 Created in 14ms (Views: 0.7ms | ActiveRecord: 3.6ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email19@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email19@gmail.com"], ["password_digest", "$2a$04$fPqE/jMsWRedQ0HQz.8yQOhrHNZjYBamSzsGnfMgFnXZxmMf1sX6W"], ["created_at", "2021-02-09 08:55:48.872379"], ["updated_at", "2021-02-09 08:55:48.872379"], ["referral_code", "ZHXEcByVX6xC8DwFFzB3LG2D"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 11:55:48 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email19@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email19@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email19@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email19@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 6ms (Views: 0.2ms | ActiveRecord: 0.9ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email20@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email20@gmail.com"], ["password_digest", "$2a$04$7xjSLLXUTvqobJ6c17d.ve6fuvMSA0U3KGEsTZvQyXGcGKbejfL76"], ["created_at", "2021-02-09 08:55:48.887968"], ["updated_at", "2021-02-09 08:55:48.887968"], ["referral_code", "rE3YTr3cpLxu6Gm7morenqjn"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 11:55:48 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email20@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email20@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email20@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email20@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 10ms (Views: 0.2ms | ActiveRecord: 2.3ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email21@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email21@gmail.com"], ["password_digest", "$2a$04$k8T9E4D/H4z6St9m90hzY.y5HEjlhwQ7Y46GShiCwGoMcUV73AWHm"], ["created_at", "2021-02-09 08:55:48.910122"], ["updated_at", "2021-02-09 08:55:48.910122"], ["referral_code", "qd15Vb8r5eDGset8Dmas6VX5"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email22@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email22@gmail.com"], ["password_digest", "$2a$04$zTNiGi1.0Xl/tSMU3w/8H..0vUT.j5jscaST/ujK5g04jlGMwzpGO"], ["created_at", "2021-02-09 08:55:48.914091"], ["updated_at", "2021-02-09 08:55:48.914091"], ["referral_code", "rYA3sMM94YtiJBCSTa6A3xxa"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 11:55:48 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email21@gmail.com", "password"=>"[FILTERED]", "referred_by"=>"rYA3sMM94YtiJBCSTa6A3xxa"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email21@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email21@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email21@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 7ms (Views: 0.3ms | ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email23@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email23@gmail.com"], ["password_digest", "$2a$04$Kxz2a7FXs//kEvVtHWuRle7du/LqPad3A2ppzTXBTYYJt5ZHiPILS"], ["created_at", "2021-02-09 08:55:48.931594"], ["updated_at", "2021-02-09 08:55:48.931594"], ["referral_code", "VwXEoR65E5VLX4Gc7m6ETxcm"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 11:55:48 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email23@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email23@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.4ms)
Started GET "/users" for 127.0.0.1 at 2021-02-09 11:55:48 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 665], ["LIMIT", 1]]
Completed 200 OK in 205004ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email24@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email24@gmail.com"], ["password_digest", "$2a$04$hYPemLiz3Ejs3xxDGU37OOityILbma/S8tVVQ2S.4MPIf1VcKS8Ke"], ["created_at", "2021-02-09 08:59:13.952867"], ["updated_at", "2021-02-09 08:59:13.952867"], ["referral_code", "UyFBLsa9yUyFZQ91dHYbGgxV"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 11:59:13 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email24@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email24@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms)
Started GET "/users" for 127.0.0.1 at 2021-02-09 11:59:13 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 666], ["LIMIT", 1]]
Completed 200 OK in 771ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/users" for 127.0.0.1 at 2021-02-09 11:59:14 +0300
Processing by UsersController#index as HTML
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$IqWyLyBnE18G0BDyZI3BkOFZeWkvWNdqopI/yBmqRyMRX/wk3p7.C"], ["created_at", "2021-02-09 08:59:14.739992"], ["updated_at", "2021-02-09 08:59:14.739992"], ["referral_code", "aXSe8BFyNo7fVsony6vXqfCg"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 667], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email25@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email25@gmail.com"], ["password_digest", "$2a$04$OXPV2ThwXj.0ki2BFKBDt.OLgKjkqNuVZEQU0SxBADvWeSgSbFXHG"], ["created_at", "2021-02-09 08:59:14.746253"], ["updated_at", "2021-02-09 08:59:14.746253"], ["referral_code", "tuFTop3STkRNd1ZztNgAfNex"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$PecEYSWpmZMKah432HTKyefFIQNOzSoyvKu8TFzv7z3X6WFHM3Z4m"], ["created_at", "2021-02-09 08:59:14.750764"], ["updated_at", "2021-02-09 08:59:14.750764"], ["referral_code", "zkt16ttqGJCHo6jwNe6irtGj"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 669], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email26@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email26@gmail.com"], ["password_digest", "$2a$04$oirnL6AsGAidHe.ojTtJGuJWj5TNq96BCYS7CilH7H.6Au9Ee396y"], ["created_at", "2021-02-09 08:59:14.757892"], ["updated_at", "2021-02-09 08:59:14.757892"], ["referral_code", "XMCFnH1qVgae8W2EHbrzYX3H"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$ydMMeWHY0O/MkBwxrSiSVeB3v5/d2UaDdMDFq66tlv0ARGqaADnNK"], ["created_at", "2021-02-09 08:59:14.762765"], ["updated_at", "2021-02-09 08:59:14.762765"], ["referral_code", "bB71G5c4Qh4hBFxdbVVGqG1Q"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 671], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "XMCFnH1qVgae8W2EHbrzYX3H"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 671], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:59:14.766850"], ["referrer_id", 670], ["id", 671]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$iZqhkbOL4DdvpDG/A7xGTeH1uwMZ3fnJJTU9fwye7TtxSe8ljX6om"], ["created_at", "2021-02-09 08:59:16.913790"], ["updated_at", "2021-02-09 08:59:16.913790"], ["referral_code", "c6hwRDGLfqi7PGXinC87zyhZ"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 672]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 672], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$g163Vcw0DVV7sspL1kd3G.XtXUxwFCiVImWu3wUGOlgWv5leqeCOK"], ["created_at", "2021-02-09 08:59:16.927790"], ["updated_at", "2021-02-09 08:59:16.927790"], ["referral_code", "Vr6yDs6Vb2qHTKhYxfL4Ry78"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 673], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email3@gmail.com"], ["password_digest", "$2a$04$eWZc7B9COUO70FhhwWzcM.1mjGTd/h66moQaMibTL/GsCawBZYQLG"], ["created_at", "2021-02-09 08:59:16.937802"], ["updated_at", "2021-02-09 08:59:16.937802"], ["referral_code", "JbnXJywsKgi3rQADthrzNXxL"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$txaRqETbHlCNpiuotCBeRe.Lj3a/7ME7ooL6Dijzi7E150QsSgXMi"], ["created_at", "2021-02-09 08:59:20.872554"], ["updated_at", "2021-02-09 08:59:20.872554"], ["referral_code", "cb16AjaFYoyyLpoNGBvCptXE"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 675], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email4@gmail.com"], ["password_digest", "$2a$04$Fo1n/5.2NSu7FlpUtMQjZe7RnRaTcRX9AjB1OMxKwSB.M38i3fzPa"], ["created_at", "2021-02-09 08:59:20.879139"], ["updated_at", "2021-02-09 08:59:20.879139"], ["referral_code", "ieNALcM2qwP6UYBuVoVGiY2t"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$hk04J1Tpms0UmGaB4/pdNuDVxFq1hjkL0b9w8Jxq3OZGX2l5jheM2"], ["created_at", "2021-02-09 08:59:20.896723"], ["updated_at", "2021-02-09 08:59:20.896723"], ["referral_code", "rsZrSJRNCinoueW3CSYZTGGw"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 677], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "ieNALcM2qwP6UYBuVoVGiY2t"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 677], ["LIMIT", 1]]
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:59:20.904834"], ["referrer_id", 676], ["id", 677]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email5@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email5@gmail.com"], ["password_digest", "$2a$04$iOddezx9T.LoKVcRKfbu6u3KOKWiYiwpBKuYjWIoPOKqSjR9IVxHe"], ["created_at", "2021-02-09 08:59:20.913167"], ["updated_at", "2021-02-09 08:59:20.913167"], ["referral_code", "oBrtMoSJcD4JoWkRDo2tGUBJ"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$L.I0eC/jldQu.86FgYIUyOW3CSjRVaz/dQOGx1dZvqaTkrDsAYTHO"], ["created_at", "2021-02-09 08:59:20.919103"], ["updated_at", "2021-02-09 08:59:20.919103"], ["referral_code", "8x1MCxBVrbdFcywycJxyD4QT"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 679], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 11:59:20 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$t/rpu4LYQv3WK2VLaFjKLevUPA806VU9UG0EQyTAzhWlYEY.ntM22"], ["created_at", "2021-02-09 08:59:20.955651"], ["updated_at", "2021-02-09 08:59:20.955651"], ["referral_code", "Q79h2oMRafUpTMS7nK7EDmH9"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 680], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 680], ["LIMIT", 1]]
Completed 201 Created in 8ms (Views: 0.4ms | ActiveRecord: 1.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 11:59:20 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$o3xz2IFHwvh7/uy6U0QF..prxRg3HO8htprH0Yhd.va0nWCJFkkeu"], ["created_at", "2021-02-09 08:59:20.969020"], ["updated_at", "2021-02-09 08:59:20.969020"], ["referral_code", "GQQbyF3ov4kzuUeuu4vDBjqE"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 681], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 681], ["LIMIT", 1]]
Completed 201 Created in 9ms (Views: 0.8ms | ActiveRecord: 1.7ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email6@gmail.com"], ["password_digest", "$2a$04$8dzzxlTu2pf13NCkh8z5Muu/rhNEt8NRAONr.cMvGDSNa.eLCMumC"], ["created_at", "2021-02-09 08:59:20.982163"], ["updated_at", "2021-02-09 08:59:20.982163"], ["referral_code", "hi5xt8v1EFc6XMjJ6tx8ZXkw"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 11:59:20 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]", "referred_by"=>"hi5xt8v1EFc6XMjJ6tx8ZXkw"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$r8MVHi.xEerp8SgdZ/oRo.SUOZfMfyh6MvBG2xGy.SvqdogtEubR6"], ["created_at", "2021-02-09 08:59:20.997401"], ["updated_at", "2021-02-09 08:59:20.997401"], ["referral_code", "gXj8YeGvZ2KxvYDD1ohzKJv3"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 683], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "hi5xt8v1EFc6XMjJ6tx8ZXkw"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 683], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:59:21.002927"], ["referrer_id", 682], ["id", 683]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 683], ["LIMIT", 1]]
Completed 201 Created in 14ms (Views: 0.8ms | ActiveRecord: 3.4ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email7@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email7@gmail.com"], ["password_digest", "$2a$04$y7qqE6JEL1K5PPJsV1IH8uDTHSJSIZ0Yr012WFainiokgy1sB/A.q"], ["created_at", "2021-02-09 08:59:21.015926"], ["updated_at", "2021-02-09 08:59:21.015926"], ["referral_code", "tFUcC8faPeDPksgQYaQEck93"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 11:59:21 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email7@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email7@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email7@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email7@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 6ms (Views: 0.2ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email8@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email8@gmail.com"], ["password_digest", "$2a$04$etxfM6S/.rTAZFiSS1meteJoDiyLTcgCPFD6lMcxd0bRrxPt3Z/m."], ["created_at", "2021-02-09 08:59:21.032749"], ["updated_at", "2021-02-09 08:59:21.032749"], ["referral_code", "w2HmRquoRHLHfDo9So33mvmT"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 11:59:21 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email8@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email8@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email8@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email8@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 10ms (Views: 0.2ms | ActiveRecord: 2.1ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email9@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email9@gmail.com"], ["password_digest", "$2a$04$EWpJLodwTfcNowiRfNPKl.dsyjhCtznvHue0TcF..qmNmltn3id5y"], ["created_at", "2021-02-09 08:59:21.055262"], ["updated_at", "2021-02-09 08:59:21.055262"], ["referral_code", "c8E6evkEgRbSL3eEq2q4x8ZZ"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email10@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email10@gmail.com"], ["password_digest", "$2a$04$eKSpQCWA2mXg/eJGBTPXyOxQxG6HWTIVaS7GDmDy/FxWB/ZSxLlcC"], ["created_at", "2021-02-09 08:59:21.059536"], ["updated_at", "2021-02-09 08:59:21.059536"], ["referral_code", "qUj8QBcxgyBH9xNZSTrYuE1o"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 11:59:21 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email9@gmail.com", "password"=>"[FILTERED]", "referred_by"=>"qUj8QBcxgyBH9xNZSTrYuE1o"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email9@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email9@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email9@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 8ms (Views: 0.2ms | ActiveRecord: 1.6ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email11@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email11@gmail.com"], ["password_digest", "$2a$04$4ksMYLOS3k2bt68Ps1AkQOu8puKc4aTR.bXa1558HU0TbqU1Hk0QO"], ["created_at", "2021-02-09 08:59:21.080574"], ["updated_at", "2021-02-09 08:59:21.080574"], ["referral_code", "e6ea1wkoUeZqrPFSMvHXy87q"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 11:59:21 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email11@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email11@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.3ms)
Started GET "/users" for 127.0.0.1 at 2021-02-09 11:59:21 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 688], ["LIMIT", 1]]
Completed 200 OK in 2765ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email12@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email12@gmail.com"], ["password_digest", "$2a$04$xKOjg7quKCduo/cqBtJWBuooaeOuZidFLqsHGKeoSMTbCSp.sJWGO"], ["created_at", "2021-02-09 08:59:23.863144"], ["updated_at", "2021-02-09 08:59:23.863144"], ["referral_code", "d9VRLjkUD9aVE5hjTFGQxQCo"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 11:59:23 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email12@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email12@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.3ms)
Started GET "/users" for 127.0.0.1 at 2021-02-09 11:59:23 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 689], ["LIMIT", 1]]
Completed 200 OK in 988ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/users" for 127.0.0.1 at 2021-02-09 11:59:24 +0300
Processing by UsersController#index as HTML
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email13@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email13@gmail.com"], ["password_digest", "$2a$04$gF6nF6QQgi9sJvX3yyRYve2JOHOC5s78MAmkFUlVc4.T4pk15hqm."], ["created_at", "2021-02-09 08:59:24.866476"], ["updated_at", "2021-02-09 08:59:24.866476"], ["referral_code", "FqtAjreV8RVXv4W7WJ4A7J4g"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 11:59:24 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email13@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email13@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email14@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email14@gmail.com"], ["password_digest", "$2a$04$hr2ew503Bl6cCSyvUk.YnObArRpF3zKuJP/XM69l2ZuypqwuqfVQi"], ["created_at", "2021-02-09 08:59:24.875266"], ["updated_at", "2021-02-09 08:59:24.875266"], ["referral_code", "ATCLJeANYw4XncQ2oyiqFiuV"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 11:59:24 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email14@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email14@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 11:59:24 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 8ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 11:59:24 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 3ms (Views: 0.5ms | ActiveRecord: 0.8ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email15@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email15@gmail.com"], ["password_digest", "$2a$04$VnVEfCelEa9aXM.snwXZWe3mhlFWV0Ye/YkJf5cCOeN7yJHJKhSYW"], ["created_at", "2021-02-09 08:59:24.909166"], ["updated_at", "2021-02-09 08:59:24.909166"], ["referral_code", "fu2Yxrdtfto1ETfYTbGfTXq2"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email16@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email16@gmail.com"], ["password_digest", "$2a$04$hq0AIha4aP9Jo4q4bM9cy.jc2ByPpK8u31db2NrWs.4FyxXLiYkIG"], ["created_at", "2021-02-09 08:59:24.915215"], ["updated_at", "2021-02-09 08:59:24.915215"], ["referral_code", "LKi9C4vcUhuCeEUCw8W3ji9x"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email15@gmail.com"], ["id", 692], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:59:24.917876"], ["referrer_id", 693], ["id", 692]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 693], ["LIMIT", 1]]
  [1m[36mUser Update All (0.6ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 692]]
  [1m[36mUser Update All (0.7ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 693]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 693], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email17@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email17@gmail.com"], ["password_digest", "$2a$04$pS32vShibZFOqf6bLd5FhO2Oypjn/wV.fwdtrRIYR3.N92opPaYkS"], ["created_at", "2021-02-09 08:59:24.932831"], ["updated_at", "2021-02-09 08:59:24.932831"], ["referral_code", "Gtv3PmSQTWUeZZKK27rPdw6r"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email18@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email18@gmail.com"], ["password_digest", "$2a$04$jlfF.TCyCVPCJQcamAjR4uBD6NHOGCrfPgUkEo0pHMcSOWnhLd9Je"], ["created_at", "2021-02-09 08:59:24.938076"], ["updated_at", "2021-02-09 08:59:24.938076"], ["referral_code", "EtQB6QSt6kVKA5TwkQHoPugs"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email17@gmail.com"], ["id", 694], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:59:24.944263"], ["referrer_id", 695], ["id", 694]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 694], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 695], ["LIMIT", 1]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 694]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 695]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 694], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email19@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email19@gmail.com"], ["password_digest", "$2a$04$eDlMkhP4qb6cnb6rqigyFOzwS6ksNCuC0dLvinAS3.aJmWQPB4UIy"], ["created_at", "2021-02-09 08:59:24.955549"], ["updated_at", "2021-02-09 08:59:24.955549"], ["referral_code", "dgpjpoHSUFyQEuYsBB81pVxm"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email20@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email20@gmail.com"], ["password_digest", "$2a$04$/d05thFOzags5VgBTWzIMeOfiKU3reAOM/1eQ0lYgaG4QsXtAFIbe"], ["created_at", "2021-02-09 08:59:24.963208"], ["updated_at", "2021-02-09 08:59:24.963208"], ["referral_code", "TJ9EgY1RJhknqsEX2KfD6CFc"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email19@gmail.com"], ["id", 696], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:59:24.968449"], ["referrer_id", 697], ["id", 696]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 697], ["LIMIT", 1]]
  [1m[36mUser Update All (1.0ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 696]]
  [1m[36mUser Update All (1.0ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 697]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 697], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email21@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email21@gmail.com"], ["password_digest", "$2a$04$7a4s.ccFDZznR1UfPLvJ8eXi.WGRJ0kdIhv2O5evze.Nhe5c5xkzW"], ["created_at", "2021-02-09 08:59:24.982172"], ["updated_at", "2021-02-09 08:59:24.982172"], ["referral_code", "FpPnW3Z16tsbwWQv3xBm69Tm"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email22@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email22@gmail.com"], ["password_digest", "$2a$04$iJhDBzLfBlopI0iR9h.QUu4T4V1Fb.JfKaI1clRVDmuhSGtCqo6o2"], ["created_at", "2021-02-09 08:59:24.986355"], ["updated_at", "2021-02-09 08:59:24.986355"], ["referral_code", "49vmLx2YR7L2KTKDu4fkUsCL"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email21@gmail.com"], ["id", 698], ["LIMIT", 1]]
  [1m[36mUser Update (1.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:59:24.990032"], ["referrer_id", 699], ["id", 698]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email22@gmail.com"], ["id", 699], ["LIMIT", 1]]
  [1m[36mUser Update (0.9ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:59:24.997110"], ["referral_points", 5], ["id", 699]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 699], ["LIMIT", 1]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 698]]
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 699]]
  [1m[36mUser Update All (0.8ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 699]]
  [1m[36mUser Update All (1.2ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 699]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 699], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email23@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email23@gmail.com"], ["password_digest", "$2a$04$bhXkMfAf2Jtx4RU1cwAfc.cyrDK9UxSJJR8dcFL8IJP4FjHFBPQam"], ["created_at", "2021-02-09 08:59:25.013701"], ["updated_at", "2021-02-09 08:59:25.013701"], ["referral_code", "fEhV4cU5ZBGeLron3Fecxy3T"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email24@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email24@gmail.com"], ["password_digest", "$2a$04$zmKzK6Of17aDm5tq91rNiO4QDSZRwhZiRKJbwiKTBA7siwyWZ9XbW"], ["created_at", "2021-02-09 08:59:25.018135"], ["updated_at", "2021-02-09 08:59:25.018135"], ["referral_code", "DXL8QKH4vuWTpzKNGPth8Prr"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email23@gmail.com"], ["id", 700], ["LIMIT", 1]]
  [1m[36mUser Update (1.1ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:59:25.021488"], ["referrer_id", 701], ["id", 700]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email24@gmail.com"], ["id", 701], ["LIMIT", 1]]
  [1m[36mUser Update (0.9ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 08:59:25.028191"], ["referral_points", 5], ["id", 701]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 701], ["LIMIT", 1]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 700]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 701]]
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 701]]
  [1m[36mUser Update All (0.6ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 701]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 701], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "referral_code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2021-02-09 08:59:25.048121"], ["updated_at", "2021-02-09 08:59:25.048121"], ["referral_code", "QiFqGjRFNtbVhB5t2rVDczbL"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "dummy value"], ["updated_at", "2021-02-09 08:59:25.050334"], ["id", 702]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "dummy value"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "DUMMY VALUE"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email25@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email25@gmail.com"], ["password_digest", "$2a$04$LMb0IL.2gjTXkP.4aOquduevd2m.TUiugsBClempmc4JEzTBsD44S"], ["created_at", "2021-02-09 08:59:25.115024"], ["updated_at", "2021-02-09 08:59:25.115024"], ["referral_code", "oYzWtjAd89pVvxA5Kzki94YG"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email25@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email26@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email26@gmail.com"], ["password_digest", "$2a$04$YbsBmAyfUHJGH1Xj7oPgU.UnZIg6G65I5jqNiCiNt7Nx3L8Twc8vO"], ["created_at", "2021-02-09 08:59:25.125256"], ["updated_at", "2021-02-09 08:59:25.125256"], ["referral_code", "t4QKUpZzReLNGaNjPukWAF2u"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email26@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$jeAPwdLYMnImQnIWmSK5KePkUI4cOwIM0G3exhC6UhLByP2Pltxuq"], ["created_at", "2021-02-09 09:01:17.214983"], ["updated_at", "2021-02-09 09:01:17.214983"], ["referral_code", "BeoNQat7pT6qKmwRbQaXtp4n"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 705]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 705], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$G0repL2lBLO7egNHEYzSX.8HYa43SloXx4m5BDCAAIehBM7Fay0.W"], ["created_at", "2021-02-09 09:01:17.226545"], ["updated_at", "2021-02-09 09:01:17.226545"], ["referral_code", "X3oHNaWZkNkX6FB2ZTaxtcEN"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 706], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email3@gmail.com"], ["password_digest", "$2a$04$xZhzWUakKCVq620NlrBIj.tJ5zdZnikrhiL.vnVpcnYG0./g3/HIS"], ["created_at", "2021-02-09 09:01:17.240036"], ["updated_at", "2021-02-09 09:01:17.240036"], ["referral_code", "DdyPv5i47Ni2FtruN9X4s5F7"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 12:01:17 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email3@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 14ms (Views: 0.2ms | ActiveRecord: 2.5ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email4@gmail.com"], ["password_digest", "$2a$04$s9AZwO6oDD.Bwkz7OTze2.GkR26W6ldXJU9n2sbzSQfaW5WZJYy.."], ["created_at", "2021-02-09 09:01:17.276337"], ["updated_at", "2021-02-09 09:01:17.276337"], ["referral_code", "gRbhPrLtgias5oA7yCkc8Ww5"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 12:01:17 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email4@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 6ms (Views: 0.2ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email5@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email5@gmail.com"], ["password_digest", "$2a$04$yc2JQ10t.yG.LdVuh1EXreEK63ZtuHAMcVpmG7ael0lZH47grKvNC"], ["created_at", "2021-02-09 09:01:17.291331"], ["updated_at", "2021-02-09 09:01:17.291331"], ["referral_code", "uCotwUmzQFkX3NR5TH2m15yD"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email6@gmail.com"], ["password_digest", "$2a$04$YujpMfjcYLQDUnbTjPBq/.ULcXVt/hAw47WT1LcFJqz1bH4/HAILG"], ["created_at", "2021-02-09 09:01:17.297857"], ["updated_at", "2021-02-09 09:01:17.297857"], ["referral_code", "DhPEhFv8pQhrEB1VCoBsKVcp"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 12:01:17 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email5@gmail.com", "password"=>"[FILTERED]", "referred_by"=>"DhPEhFv8pQhrEB1VCoBsKVcp"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email5@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email5@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email5@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 7ms (Views: 0.2ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 12:01:17 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$c7unQNZwrBhFS7fC5HCm5OZrd5KOUEULxO6FcrpGecoFlrNmCgBRy"], ["created_at", "2021-02-09 09:01:17.327561"], ["updated_at", "2021-02-09 09:01:17.327561"], ["referral_code", "k7modhHMKy3Hd8gECZfiVQxp"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 711], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 711], ["LIMIT", 1]]
Completed 201 Created in 17ms (Views: 0.4ms | ActiveRecord: 3.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 12:01:17 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$IU24q/DvoJ5M3FuxGm/VRuWVEpgDNLr9.n.7Uv0lzOITl92qlW3jG"], ["created_at", "2021-02-09 09:01:17.347150"], ["updated_at", "2021-02-09 09:01:17.347150"], ["referral_code", "jHwy98ADmtcxH2SkDFfgFgoY"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 712], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 712], ["LIMIT", 1]]
Completed 201 Created in 7ms (Views: 0.4ms | ActiveRecord: 1.7ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email7@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email7@gmail.com"], ["password_digest", "$2a$04$z3el3k8foSoF9a3wERsEMuxx/Fi2GWIAtS13AukoE3WdgpW5ibCqW"], ["created_at", "2021-02-09 09:01:17.361844"], ["updated_at", "2021-02-09 09:01:17.361844"], ["referral_code", "FhUm2ynGVjVvDC6VKDW1P3fx"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 12:01:17 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]", "referred_by"=>"FhUm2ynGVjVvDC6VKDW1P3fx"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$SI/u/qnGl69ior123PH0qOXm6pvtKlN90kb/Ry6YJNfL7zrwMnZgC"], ["created_at", "2021-02-09 09:01:17.375126"], ["updated_at", "2021-02-09 09:01:17.375126"], ["referral_code", "n2BNi6QK1x8APsUovsyZC7UF"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 714], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "FhUm2ynGVjVvDC6VKDW1P3fx"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 714], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:01:17.379763"], ["referrer_id", 713], ["id", 714]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 714], ["LIMIT", 1]]
Completed 201 Created in 11ms (Views: 0.3ms | ActiveRecord: 2.8ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email8@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email8@gmail.com"], ["password_digest", "$2a$04$BBbyM4DYIl1F7M9LZLKoU.N76dJEBeeTc/WPo.zX2YE3QvSrUwQYe"], ["created_at", "2021-02-09 09:01:17.393770"], ["updated_at", "2021-02-09 09:01:17.393770"], ["referral_code", "JqMquEQKC6Aosw2heSgatiEY"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email8@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email9@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email9@gmail.com"], ["password_digest", "$2a$04$cJGzgKGFbWJqtowtWpl6muBAXRcWxY9A7CdgSar4v3Gm67pR0iQk6"], ["created_at", "2021-02-09 09:01:17.407061"], ["updated_at", "2021-02-09 09:01:17.407061"], ["referral_code", "LA77uCTSgbTggfjNPP32vGX2"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email9@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "referral_code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2021-02-09 09:01:17.442030"], ["updated_at", "2021-02-09 09:01:17.442030"], ["referral_code", "4C5NdUtBRydb2B8mY4P5B1RN"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "dummy value"], ["updated_at", "2021-02-09 09:01:17.444757"], ["id", 717]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "dummy value"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "DUMMY VALUE"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$g9QfOehLzg/UrxAxoPPBs.ePu9zibdF/oCJ749AmLcZL9cmjiq2J."], ["created_at", "2021-02-09 09:01:17.486027"], ["updated_at", "2021-02-09 09:01:17.486027"], ["referral_code", "Y4r5AeEx1Hez2KuXLx17W5c3"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 718], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email10@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email10@gmail.com"], ["password_digest", "$2a$04$OQrS/t3BSvNCUMe4md7Q6.7iel8nhG3MbucEGyt5c9y.fOV2NUvrS"], ["created_at", "2021-02-09 09:01:17.498301"], ["updated_at", "2021-02-09 09:01:17.498301"], ["referral_code", "Tanyq5htDGafbSPjhfirw7JF"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$vsmvPtvjOIMBHe0JlsLDZ.qjKbZhQZO98du6BGVydKwbe3pzG0iE2"], ["created_at", "2021-02-09 09:01:17.505713"], ["updated_at", "2021-02-09 09:01:17.505713"], ["referral_code", "aBMxGcbhACQCgmw8ziD3RhAi"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 720], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email11@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email11@gmail.com"], ["password_digest", "$2a$04$.W5hUZI.N8FDGaJpW8Tg1uUjDVovVaaA.9R4fex5Q6YD/dO6TuEMy"], ["created_at", "2021-02-09 09:01:17.513284"], ["updated_at", "2021-02-09 09:01:17.513284"], ["referral_code", "opKejduuv6tXhsoCckStxhcd"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$18ehApR/kQISlHdXStudKe9Qc9bfXwtbaVn5FOLT8FwOGqBuMyaHS"], ["created_at", "2021-02-09 09:01:17.520080"], ["updated_at", "2021-02-09 09:01:17.520080"], ["referral_code", "vkntpELLRmioR4J4o4jVkcwG"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 722], ["LIMIT", 1]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "opKejduuv6tXhsoCckStxhcd"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 722], ["LIMIT", 1]]
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:01:17.534713"], ["referrer_id", 721], ["id", 722]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email12@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email12@gmail.com"], ["password_digest", "$2a$04$fgCVDH5j9F5Q94ib4P.80uFAqkcYyA7DfEDwD6B4rvqoXwoFKZ2Oy"], ["created_at", "2021-02-09 09:01:17.575082"], ["updated_at", "2021-02-09 09:01:17.575082"], ["referral_code", "Eb9dnCEaSCMiRzxnyseDt2bP"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email13@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email13@gmail.com"], ["password_digest", "$2a$04$aLZUaN4mFWsrhPnCc/kiCef.0coogGUO9MDzVeu2NIRjzVqhSTbYa"], ["created_at", "2021-02-09 09:01:17.579859"], ["updated_at", "2021-02-09 09:01:17.579859"], ["referral_code", "VHJ1Eq9RQckUFhRA7upqnUBZ"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email12@gmail.com"], ["id", 723], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:01:17.584545"], ["referrer_id", 724], ["id", 723]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 723], ["LIMIT", 1]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 724], ["LIMIT", 1]]
  [1m[36mUser Update All (1.3ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 723]]
  [1m[36mUser Update All (0.7ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 724]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 723], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email14@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email14@gmail.com"], ["password_digest", "$2a$04$BieM/BQRtMOJko4eDdVkKeMcvWq.Soweo7PWXY5GK4XnTxedTR2.K"], ["created_at", "2021-02-09 09:01:17.602926"], ["updated_at", "2021-02-09 09:01:17.602926"], ["referral_code", "D9THSA3JYTybstK7WdM3BTfL"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email15@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email15@gmail.com"], ["password_digest", "$2a$04$f24mqsEFAzE4ppUpaGIArOa2O65IrAxvzhdNsRx5yTLsPMOj8OPey"], ["created_at", "2021-02-09 09:01:17.606868"], ["updated_at", "2021-02-09 09:01:17.606868"], ["referral_code", "xFdsW7zJtPE8urDJ5aCXACYd"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email14@gmail.com"], ["id", 725], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:01:17.609267"], ["referrer_id", 726], ["id", 725]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 726], ["LIMIT", 1]]
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 725]]
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 726]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 726], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email16@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email16@gmail.com"], ["password_digest", "$2a$04$iTLfq1YTuoxDN6XR2RcQy.aiOMKq8TgJ/QQA1c9IRdFhTVhxfYydW"], ["created_at", "2021-02-09 09:01:17.621125"], ["updated_at", "2021-02-09 09:01:17.621125"], ["referral_code", "QkigerGs6ZA5NrvuSepbvNiX"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email17@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email17@gmail.com"], ["password_digest", "$2a$04$4xZ69ESiEBgmvI6UmfZ8ueAvWxz/EzCy4GIz.c/XlMSGhpPjf9Rqu"], ["created_at", "2021-02-09 09:01:17.628682"], ["updated_at", "2021-02-09 09:01:17.628682"], ["referral_code", "eu2uUjqS4VR8HRb88b7tEfFH"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email16@gmail.com"], ["id", 727], ["LIMIT", 1]]
  [1m[36mUser Update (1.0ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:01:17.634496"], ["referrer_id", 728], ["id", 727]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 728], ["LIMIT", 1]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 727]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 728]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 728], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email18@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email18@gmail.com"], ["password_digest", "$2a$04$fXGN9sVRg0viZxKMWctg6O2Q0umo9dpIBLudMRQmr.4tP8CqCsD7m"], ["created_at", "2021-02-09 09:01:17.644652"], ["updated_at", "2021-02-09 09:01:17.644652"], ["referral_code", "Y4pr9xYhwWUjR1rSe5VsQXjL"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email19@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email19@gmail.com"], ["password_digest", "$2a$04$FXEFEA04XwWtj3O6KENleOMR2Rla1OaHFrlZT28AXZK1WwVLZKbdu"], ["created_at", "2021-02-09 09:01:17.650672"], ["updated_at", "2021-02-09 09:01:17.650672"], ["referral_code", "HMmcgKUJTQ9a3bLo16814y9s"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email18@gmail.com"], ["id", 729], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:01:17.653275"], ["referrer_id", 730], ["id", 729]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email19@gmail.com"], ["id", 730], ["LIMIT", 1]]
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:01:17.659196"], ["referral_points", 5], ["id", 730]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 730], ["LIMIT", 1]]
  [1m[36mUser Update All (0.9ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 729]]
  [1m[36mUser Update All (1.1ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 730]]
  [1m[36mUser Update All (1.1ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 730]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 730]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 730], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email20@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email20@gmail.com"], ["password_digest", "$2a$04$NwYhkm2QP/dKyojxGUls4Oqvl7fMVfJebGna2sKWTBWon6LtVw0Hi"], ["created_at", "2021-02-09 09:01:17.676173"], ["updated_at", "2021-02-09 09:01:17.676173"], ["referral_code", "526WrNkf21VfGtrWXWcstyzS"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email21@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email21@gmail.com"], ["password_digest", "$2a$04$Xsfng2.tyG6tMqJzS53FNe4Xr7J8P28Lnfw4dN7eXScmAPUjf6Q8a"], ["created_at", "2021-02-09 09:01:17.681784"], ["updated_at", "2021-02-09 09:01:17.681784"], ["referral_code", "W1YN97RQNpmjTiay7S33rxM7"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email20@gmail.com"], ["id", 731], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:01:17.685786"], ["referrer_id", 732], ["id", 731]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email21@gmail.com"], ["id", 732], ["LIMIT", 1]]
  [1m[36mUser Update (1.0ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:01:17.688749"], ["referral_points", 5], ["id", 732]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 732], ["LIMIT", 1]]
  [1m[36mUser Update All (0.8ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 731]]
  [1m[36mUser Update All (0.9ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 732]]
  [1m[36mUser Update All (1.3ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 732]]
  [1m[36mUser Update All (1.7ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 732]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 732], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 12:01:17 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 12:01:17 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email22@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email22@gmail.com"], ["password_digest", "$2a$04$mDQBfDZ8VmBOrDve.Y4wxOkffRg1E45at4w9snULTOrpyOYmPFF2G"], ["created_at", "2021-02-09 09:01:17.726764"], ["updated_at", "2021-02-09 09:01:17.726764"], ["referral_code", "gNpbbQma26z4EC9JkqzMZd5E"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 12:01:17 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email22@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email22@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.4ms | ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email23@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email23@gmail.com"], ["password_digest", "$2a$04$cxD4K8lGznoAImRdqfinLuJC7Ousvgnqr5ODZfCuofn5y1Oh3Mj16"], ["created_at", "2021-02-09 09:01:17.741980"], ["updated_at", "2021-02-09 09:01:17.741980"], ["referral_code", "g3fR6GBZSbBsfWgk2voSARDF"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 12:01:17 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email23@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email23@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email24@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email24@gmail.com"], ["password_digest", "$2a$04$Qf51xlPHjyFKavURD7ASa.pj5ayAwuDbgOR8RdlBpY201EtUVAicS"], ["created_at", "2021-02-09 09:01:17.754958"], ["updated_at", "2021-02-09 09:01:17.754958"], ["referral_code", "uYKUt5fCYLXhRNGuAwY8R8bc"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email25@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email25@gmail.com"], ["password_digest", "$2a$04$S4gYgOQ.9r02ExXcrYYtUeT/esYtBs0WB3SDoaU2tNVWDcKzEv/om"], ["created_at", "2021-02-09 09:01:24.460589"], ["updated_at", "2021-02-09 09:01:24.460589"], ["referral_code", "AWXUPjQDtgEPWaw7Js1AypxN"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 12:01:24 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email25@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email25@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms)
Started GET "/users" for 127.0.0.1 at 2021-02-09 12:01:24 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 736], ["LIMIT", 1]]
Completed 200 OK in 564ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email26@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email26@gmail.com"], ["password_digest", "$2a$04$3ec1cDMy9gm9IRG28k2GZO3nSbEdIxJgSL8TEPlDwnO/UcGApU/ka"], ["created_at", "2021-02-09 09:01:25.036257"], ["updated_at", "2021-02-09 09:01:25.036257"], ["referral_code", "NWSdVtN8jwaRG3xJcDxF1Bap"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 12:01:25 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email26@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email26@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms)
Started GET "/users" for 127.0.0.1 at 2021-02-09 12:01:25 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 737], ["LIMIT", 1]]
Completed 200 OK in 356ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/users" for 127.0.0.1 at 2021-02-09 12:01:25 +0300
Processing by UsersController#index as HTML
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$tcNElD7OueIr/MSLvkA66ePp/gIU7GenZwoXpbB7ukfZXS19b9g/O"], ["created_at", "2021-02-09 09:01:51.302060"], ["updated_at", "2021-02-09 09:01:51.302060"], ["referral_code", "FJrdBi5Zea1ATp32WLvqyMzW"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$Yvtr9mtToqt9pWL9ny2D0OZ2/iWJziJiJuspWxLD68usHKAk5ESdy"], ["created_at", "2021-02-09 09:02:38.933623"], ["updated_at", "2021-02-09 09:02:38.933623"], ["referral_code", "qT2yFYqtcfMcD9rshrFfAeMz"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 739], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$.zcPeWrApu7ZxZkFvSnrFOfTpZSD7Vaod6dSVs.96gLbmM16u47L2"], ["created_at", "2021-02-09 09:02:38.940498"], ["updated_at", "2021-02-09 09:02:38.940498"], ["referral_code", "sxJSohyWLBXgutK4JydMuYvt"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$NKCALuCLM5Y9OaPBKOVwP.vZb/jxolkABxMou816OpEBQKVJ8Qzvy"], ["created_at", "2021-02-09 09:02:38.945610"], ["updated_at", "2021-02-09 09:02:38.945610"], ["referral_code", "xWoDhaK5xnCRL1orPybbYQcF"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 741], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email3@gmail.com"], ["password_digest", "$2a$04$j5cG/pp3RsC5eaLDSU8KceKobYrDYwnNlv4zDRje3ysUV9L9ivwby"], ["created_at", "2021-02-09 09:02:38.971631"], ["updated_at", "2021-02-09 09:02:38.971631"], ["referral_code", "fQiQ8W8tR8p7BKtmC36uDdmS"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$zrFtj8cRzbhfyn0jMbr.DO0tj/KFvJf.8.tfWW.KTiztYrEPzRBmq"], ["created_at", "2021-02-09 09:02:38.979086"], ["updated_at", "2021-02-09 09:02:38.979086"], ["referral_code", "2uTHHrwWyyDtdXd6nTHYJ27V"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 743], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "fQiQ8W8tR8p7BKtmC36uDdmS"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 743], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:02:38.986712"], ["referrer_id", 742], ["id", 743]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "referral_code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2021-02-09 09:02:39.011695"], ["updated_at", "2021-02-09 09:02:39.011695"], ["referral_code", "18pQ6wpGhRMFwLMDZGnwB6aH"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "dummy value"], ["updated_at", "2021-02-09 09:02:39.014936"], ["id", 744]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "dummy value"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "DUMMY VALUE"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email4@gmail.com"], ["password_digest", "$2a$04$cJtcvVWP4EgbxTZHa8xK7ObewL647KpZ./Vh0X5Jm1RkyJJgr0bTe"], ["created_at", "2021-02-09 09:02:39.076728"], ["updated_at", "2021-02-09 09:02:39.076728"], ["referral_code", "5THKbdYn8XAAb7jA38qW7x1x"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 745]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 745], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email5@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email5@gmail.com"], ["password_digest", "$2a$04$3sYJq6ZuFEWMynVefYp0deOD1uCCYdstr/dqTXfvo4W2MvHcG6sX."], ["created_at", "2021-02-09 09:02:39.087417"], ["updated_at", "2021-02-09 09:02:39.087417"], ["referral_code", "Dkt65ptu4a29tNEuJNfLY7wv"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 746], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email6@gmail.com"], ["password_digest", "$2a$04$aIraEWpaUoOSt/lNooEDM.Hv78Wq5PPip8Lpf9TX1zx73glKd0USa"], ["created_at", "2021-02-09 09:02:39.097621"], ["updated_at", "2021-02-09 09:02:39.097621"], ["referral_code", "FXRgUbTT3VGL7YFVQpRNgjid"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email7@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email7@gmail.com"], ["password_digest", "$2a$04$Nggi69dBQIWD5DBzbim0yOLxrGr/CMkIWWn4wHdkbaR0txB2c8XzK"], ["created_at", "2021-02-09 09:02:39.104565"], ["updated_at", "2021-02-09 09:02:39.104565"], ["referral_code", "pCRuGZGdRQhGgj8meRju7mAV"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email6@gmail.com"], ["id", 747], ["LIMIT", 1]]
  [1m[36mUser Update (1.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:02:39.110662"], ["referrer_id", 748], ["id", 747]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 747], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 748], ["LIMIT", 1]]
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 747]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 748]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 747], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email8@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email8@gmail.com"], ["password_digest", "$2a$04$Hq/wNkBIbJ7TvhtKKEhuveW3p3Eki9QUpT.pPFSZvCYzKAcUCmn7u"], ["created_at", "2021-02-09 09:02:39.127000"], ["updated_at", "2021-02-09 09:02:39.127000"], ["referral_code", "h4T9nsz8ovPydysiK6qZhTFE"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email9@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email9@gmail.com"], ["password_digest", "$2a$04$/V8QIt0ahW2HdCZRk7QH5evKGOwpxPcOs2GxGCoc52Vc0T2JRbq2."], ["created_at", "2021-02-09 09:02:39.131526"], ["updated_at", "2021-02-09 09:02:39.131526"], ["referral_code", "pJvJyK6f9DJ93h4yv5T9j1sw"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email8@gmail.com"], ["id", 749], ["LIMIT", 1]]
  [1m[36mUser Update (1.1ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:02:39.137404"], ["referrer_id", 750], ["id", 749]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 750], ["LIMIT", 1]]
  [1m[36mUser Update All (1.0ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 749]]
  [1m[36mUser Update All (1.0ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 750]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 750], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email10@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email10@gmail.com"], ["password_digest", "$2a$04$4EJJ.halO6MFk8HEZ7mxUO8j4auF6gHJKatq6xcjchJ4Y9a8dQPX6"], ["created_at", "2021-02-09 09:02:39.153282"], ["updated_at", "2021-02-09 09:02:39.153282"], ["referral_code", "WKunbr1b53Xkwss5MFtANJT6"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email11@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email11@gmail.com"], ["password_digest", "$2a$04$anIWBrynCcVnShMoqfeFruxqNZNH3knudFtvIssEODLyL8Hu8ma6i"], ["created_at", "2021-02-09 09:02:39.157659"], ["updated_at", "2021-02-09 09:02:39.157659"], ["referral_code", "E1MGcnRjy9tJq6xcmkZdov8A"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email10@gmail.com"], ["id", 751], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:02:39.162099"], ["referrer_id", 752], ["id", 751]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email11@gmail.com"], ["id", 752], ["LIMIT", 1]]
  [1m[36mUser Update (1.6ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:02:39.165809"], ["referral_points", 5], ["id", 752]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 752], ["LIMIT", 1]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 751]]
  [1m[36mUser Update All (0.8ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 752]]
  [1m[36mUser Update All (1.0ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 752]]
  [1m[36mUser Update All (1.2ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 752]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 752], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email12@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email12@gmail.com"], ["password_digest", "$2a$04$nD8oe3l1S9xIsbownQTgHOL0w8WEe6N1AjCk8AKD8NtD0st/9lA7G"], ["created_at", "2021-02-09 09:02:39.185981"], ["updated_at", "2021-02-09 09:02:39.185981"], ["referral_code", "jzyEUXt6unsp4x2WQmymhYYF"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email13@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email13@gmail.com"], ["password_digest", "$2a$04$.iaU/zrGcWntyc9BCnKFz.QbeXgDD8.xS7oy6bcYv9S6Zfy93VML."], ["created_at", "2021-02-09 09:02:39.190655"], ["updated_at", "2021-02-09 09:02:39.190655"], ["referral_code", "QzZ7ySTySEGMaNQAVvwcuSh8"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email12@gmail.com"], ["id", 753], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:02:39.194272"], ["referrer_id", 754], ["id", 753]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email13@gmail.com"], ["id", 754], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:02:39.197925"], ["referral_points", 5], ["id", 754]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 754], ["LIMIT", 1]]
  [1m[36mUser Update All (1.1ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 753]]
  [1m[36mUser Update All (1.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 754]]
  [1m[36mUser Update All (1.2ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 754]]
  [1m[36mUser Update All (1.1ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 754]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 754], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email14@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email14@gmail.com"], ["password_digest", "$2a$04$8TO.RpGjOpGfB6PMykfeWOj9ar8IFAwsCPlK80khGUZ1q7VaEop0q"], ["created_at", "2021-02-09 09:02:39.219100"], ["updated_at", "2021-02-09 09:02:39.219100"], ["referral_code", "XLWiMaHgu9wLZq7xKY2xZyiP"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email15@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email15@gmail.com"], ["password_digest", "$2a$04$SRu4gmQoGqLnTY3od.hEpO5jOdjWtJvqgu3VGCU2HhtTxOM3rt966"], ["created_at", "2021-02-09 09:02:39.223131"], ["updated_at", "2021-02-09 09:02:39.223131"], ["referral_code", "hsij2RZLV6QzpcmE28NZLT7N"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email14@gmail.com"], ["id", 755], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:02:39.226367"], ["referrer_id", 756], ["id", 755]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 756], ["LIMIT", 1]]
  [1m[36mUser Update All (0.6ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 755]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 756]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 756], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 12:02:39 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 12:02:39 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email16@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email16@gmail.com"], ["password_digest", "$2a$04$paxwLuzakfnqgRdfEfnsa.98lsqGi6BsVY.aSXbkhP3yqqGXYrmiW"], ["created_at", "2021-02-09 09:02:39.271674"], ["updated_at", "2021-02-09 09:02:39.271674"], ["referral_code", "Q1EsRDR77fPShuUKWu6f3yZW"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 12:02:39 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email16@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email16@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 5ms (Views: 0.4ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email17@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email17@gmail.com"], ["password_digest", "$2a$04$k0/LHKWOjDgKMq7qXlV0M.SpbZInLcpH.G35jvp7X5nkomE8qeS1S"], ["created_at", "2021-02-09 09:02:39.287417"], ["updated_at", "2021-02-09 09:02:39.287417"], ["referral_code", "DJEocwipYpnHbe56kJnmeXmm"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 12:02:39 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email17@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email17@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email18@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email18@gmail.com"], ["password_digest", "$2a$04$Fh7UY/hT8dTKYT12Xka8NerU77j0BXdj1xwtPVGIQtwf1YJFH7V3i"], ["created_at", "2021-02-09 09:02:39.312006"], ["updated_at", "2021-02-09 09:02:39.312006"], ["referral_code", "fxWMJGHdDiZkudgBhaXsrm59"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email18@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email19@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email19@gmail.com"], ["password_digest", "$2a$04$J/4NTUNWgSyz.wOF1v2WZuamsZ8vonKpq6uwZEvGm9qyc0RKf.7JO"], ["created_at", "2021-02-09 09:02:39.322266"], ["updated_at", "2021-02-09 09:02:39.322266"], ["referral_code", "YLcPtAQzaqU5Dsmhc9BEn3bS"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email19@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email20@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email20@gmail.com"], ["password_digest", "$2a$04$LasywFOjXHUg1yvty4MJQ.cKe8C4Q0CvTI15Kd71THUJx8t/kodpm"], ["created_at", "2021-02-09 09:02:39.332018"], ["updated_at", "2021-02-09 09:02:39.332018"], ["referral_code", "vVdjvqZ77DgjxFhrqXm3Saub"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 12:02:39 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email20@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email20@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 5ms (Views: 0.4ms | ActiveRecord: 0.7ms)
Started GET "/users" for 127.0.0.1 at 2021-02-09 12:02:39 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 761], ["LIMIT", 1]]
Completed 200 OK in 656ms (Views: 0.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email21@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email21@gmail.com"], ["password_digest", "$2a$04$hm0WV1vluQvOAsj5qMKzkeNn72PszugOVzkVYZhbMmlTLMIkTTuyK"], ["created_at", "2021-02-09 09:02:40.010566"], ["updated_at", "2021-02-09 09:02:40.010566"], ["referral_code", "BNN4eSN4NmeGBSxt5YQmvZjD"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 12:02:40 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email21@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email21@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 0.2ms)
Started GET "/users" for 127.0.0.1 at 2021-02-09 12:02:40 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 762], ["LIMIT", 1]]
Completed 200 OK in 1038ms (Views: 0.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/users" for 127.0.0.1 at 2021-02-09 12:02:41 +0300
Processing by UsersController#index as HTML
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email22@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email22@gmail.com"], ["password_digest", "$2a$04$IOERfUsxiSE1ROmAW/JkPeU/jWO7NKKD.rdMh0u.wvNsZ1xcGMffa"], ["created_at", "2021-02-09 09:02:41.069713"], ["updated_at", "2021-02-09 09:02:41.069713"], ["referral_code", "kywwvPYLqrE4xTfmZfUbmpj7"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 12:02:41 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email22@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email22@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email22@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email22@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 5ms (Views: 0.2ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email23@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email23@gmail.com"], ["password_digest", "$2a$04$s3wHuoXAAz2zyV.p7YR7qu.zx7ipH.3ti1Rn/TzXjYmq/ebjvvGvS"], ["created_at", "2021-02-09 09:02:41.082033"], ["updated_at", "2021-02-09 09:02:41.082033"], ["referral_code", "mwd1PRPoDazqWa3Ti1aqMUzj"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 12:02:41 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email23@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email23@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email23@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email23@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 6ms (Views: 0.2ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email24@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email24@gmail.com"], ["password_digest", "$2a$04$St37KZpRvWL.l6m7iuZvvuI0dtvwsBePhzGuC0HOnZznXVkjU3q1y"], ["created_at", "2021-02-09 09:02:41.095017"], ["updated_at", "2021-02-09 09:02:41.095017"], ["referral_code", "153ra3t96f983Xb1e5m9sEmz"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email25@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email25@gmail.com"], ["password_digest", "$2a$04$VwHVwsCGtdFpOHwAI5bR2ecXQzUtsYyw699Fh/K.99Kou7QhbIeU6"], ["created_at", "2021-02-09 09:02:41.100274"], ["updated_at", "2021-02-09 09:02:41.100274"], ["referral_code", "fgS9ZBTjMp8zZmFjtv7tmUJu"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 12:02:41 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email24@gmail.com", "password"=>"[FILTERED]", "referred_by"=>"fgS9ZBTjMp8zZmFjtv7tmUJu"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email24@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email24@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email24@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 7ms (Views: 0.2ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 12:02:41 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$3KLWAySL0PznSDYNWUjiWuw3JaVpmo0RIyJcDyg5nevMiQHXJri4K"], ["created_at", "2021-02-09 09:02:41.132155"], ["updated_at", "2021-02-09 09:02:41.132155"], ["referral_code", "bN94abo2qCHvYnEsHBgU4kj8"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 767], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 767], ["LIMIT", 1]]
Completed 201 Created in 11ms (Views: 0.3ms | ActiveRecord: 3.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 12:02:41 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$ylMaR4r32HQAcEiTIrYofu1t4sY4hKWDARKlvDm3KE7DUblpFZFWe"], ["created_at", "2021-02-09 09:02:41.149491"], ["updated_at", "2021-02-09 09:02:41.149491"], ["referral_code", "4zWQfRixHkogZ1c8BTk42EJ1"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 768], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 768], ["LIMIT", 1]]
Completed 201 Created in 7ms (Views: 0.3ms | ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email26@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email26@gmail.com"], ["password_digest", "$2a$04$hVtVqSqdXP8BTREPeeWkaeHG7H0TUztO9dWKW5B/v1zLMeDL28qzW"], ["created_at", "2021-02-09 09:02:41.157579"], ["updated_at", "2021-02-09 09:02:41.157579"], ["referral_code", "GjgxAt7Mdg9y8nWvJQ33i8aQ"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 12:02:41 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]", "referred_by"=>"GjgxAt7Mdg9y8nWvJQ33i8aQ"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$Ezk2825Kd44.vRlstLeSuOT6qrcFy.qSQAgsGci/lX2fI21ocm9kW"], ["created_at", "2021-02-09 09:02:41.165807"], ["updated_at", "2021-02-09 09:02:41.165807"], ["referral_code", "wd8XqMW257eWbu7u5fRdgjML"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 770], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "GjgxAt7Mdg9y8nWvJQ33i8aQ"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 770], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:02:41.174487"], ["referrer_id", 769], ["id", 770]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 770], ["LIMIT", 1]]
Completed 201 Created in 18ms (Views: 0.8ms | ActiveRecord: 5.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$RxCySMhkYXBpl9xaz0Y4.eFKsHApAjIM3VbMVA0KttOsZ77UPrlmC"], ["created_at", "2021-02-09 09:02:59.134452"], ["updated_at", "2021-02-09 09:02:59.134452"], ["referral_code", "5EqQhZiutDUmHtkVxmGobmka"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 12:02:59 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email1@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 6ms (Views: 0.2ms | ActiveRecord: 0.9ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$8pmrFgH1yVVu5ZvCrIbtdupwXyEHA0xw6/lmegnmCMnvHbAKVcJ62"], ["created_at", "2021-02-09 09:02:59.159170"], ["updated_at", "2021-02-09 09:02:59.159170"], ["referral_code", "Kdfmayip4QQooYFzDMeidwjm"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 12:02:59 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email2@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 5ms (Views: 0.1ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email3@gmail.com"], ["password_digest", "$2a$04$nCJiA7ZUMR7Lo7QQQ16y5ucbmI/mIDCWv/25M2Sa9f16sxybuHYsO"], ["created_at", "2021-02-09 09:02:59.170803"], ["updated_at", "2021-02-09 09:02:59.170803"], ["referral_code", "KdmNYKUDLV3VgqZ2n6oDt58U"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email4@gmail.com"], ["password_digest", "$2a$04$d80.cd3l/6O/K7oOevXGOe/GW8eAGjvgSxsFayGE.c6V3eeiNg0v6"], ["created_at", "2021-02-09 09:02:59.174608"], ["updated_at", "2021-02-09 09:02:59.174608"], ["referral_code", "vpsE7pa9coSPt7nBy3Ln5aRL"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 12:02:59 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email3@gmail.com", "password"=>"[FILTERED]", "referred_by"=>"vpsE7pa9coSPt7nBy3Ln5aRL"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 7ms (Views: 0.2ms | ActiveRecord: 1.3ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 12:02:59 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$Qi50zO8EufSJrMKubqq9leJpiA6XAF59JVkcMZElxnXi9fCN.LuCG"], ["created_at", "2021-02-09 09:02:59.199853"], ["updated_at", "2021-02-09 09:02:59.199853"], ["referral_code", "wumfSfCVL7eedVLaiJskN2Wb"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 775], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 775], ["LIMIT", 1]]
Completed 201 Created in 12ms (Views: 0.4ms | ActiveRecord: 2.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 12:02:59 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$UadgJonP7vZmEwq4WxFrPO/1qkDJx6CqhRYGGoFLoGmhD4cDmVSbe"], ["created_at", "2021-02-09 09:02:59.215949"], ["updated_at", "2021-02-09 09:02:59.215949"], ["referral_code", "taV3ZnwnccVCDKpj7roxDkFU"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 776], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 776], ["LIMIT", 1]]
Completed 201 Created in 7ms (Views: 0.4ms | ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email5@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email5@gmail.com"], ["password_digest", "$2a$04$Zo1Ooze/NT1R6FxWc08zJusPBqL0IHFNU1oa3nQ86C7xQCroM8h3K"], ["created_at", "2021-02-09 09:02:59.226093"], ["updated_at", "2021-02-09 09:02:59.226093"], ["referral_code", "qjduxpTEJbktBRoAYn67hmUm"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 12:02:59 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]", "referred_by"=>"qjduxpTEJbktBRoAYn67hmUm"}
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$nEWhCeM.9nVrfTAtk.4MXe/UjwYaj9n/9tIgF5xklDSLcY2Yg1nlG"], ["created_at", "2021-02-09 09:02:59.240034"], ["updated_at", "2021-02-09 09:02:59.240034"], ["referral_code", "TEn1CxtZgQBJ7nT8ysFSLcpW"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 778], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "qjduxpTEJbktBRoAYn67hmUm"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 778], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:02:59.247959"], ["referrer_id", 777], ["id", 778]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 778], ["LIMIT", 1]]
Completed 201 Created in 16ms (Views: 0.4ms | ActiveRecord: 4.9ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "referral_code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2021-02-09 09:02:59.297703"], ["updated_at", "2021-02-09 09:02:59.297703"], ["referral_code", "iAjD1dTAt34yN6Zc6SnK2HRC"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.9ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "dummy value"], ["updated_at", "2021-02-09 09:02:59.300666"], ["id", 779]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "dummy value"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "DUMMY VALUE"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email6@gmail.com"], ["password_digest", "$2a$04$DyNMfWyDDMzY8UfmKhOIHuSHD34b8mVLsIJpdveVJcqY.b.X2Mrey"], ["created_at", "2021-02-09 09:02:59.330700"], ["updated_at", "2021-02-09 09:02:59.330700"], ["referral_code", "X4dAFSUNF5AJ9j19PcWTXbqP"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email7@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email7@gmail.com"], ["password_digest", "$2a$04$ivj4OO2qd7yVYgBeJdC6x.Vh9h/Tf36Svyh8JhbnMZEKGXwM46Qaa"], ["created_at", "2021-02-09 09:03:10.201651"], ["updated_at", "2021-02-09 09:03:10.201651"], ["referral_code", "QqaLZucTRCNwkDrNDLCsnDB9"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email8@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email8@gmail.com"], ["password_digest", "$2a$04$/IK0nKVw6ouBvsL2s4GPmOeKvKo/Mw2gskKkaGuFozFSunexC0IFW"], ["created_at", "2021-02-09 09:03:10.205480"], ["updated_at", "2021-02-09 09:03:10.205480"], ["referral_code", "bStdsQEuheGq6aDXd24znxZu"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email7@gmail.com"], ["id", 781], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:03:10.207617"], ["referrer_id", 782], ["id", 781]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 781], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 782], ["LIMIT", 1]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 781]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 782]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 781], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email9@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email9@gmail.com"], ["password_digest", "$2a$04$K2lRv25zxmH3Xfjx5wGBGONfuQ7627SwmB9BNP6lx1YOIhOoiOT2O"], ["created_at", "2021-02-09 09:03:10.218998"], ["updated_at", "2021-02-09 09:03:10.218998"], ["referral_code", "QBqbcTTZhtjTtYe4N8eSaYMU"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email10@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email10@gmail.com"], ["password_digest", "$2a$04$nnLPyqjHXXf36VW6vE9Wj.Q7IombKO7XgO.dKNET7bhYVE23VQLVG"], ["created_at", "2021-02-09 09:03:10.223065"], ["updated_at", "2021-02-09 09:03:10.223065"], ["referral_code", "1YEEY46FkAdGJeRs63Fe13GM"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email9@gmail.com"], ["id", 783], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:03:10.225480"], ["referrer_id", 784], ["id", 783]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 784], ["LIMIT", 1]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 783]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 784]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 784], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email11@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email11@gmail.com"], ["password_digest", "$2a$04$ZpoK3ENsswdS8AQLWzpe.OyhQXSOYjvuYDLmLRKcu/uVt33epx0O6"], ["created_at", "2021-02-09 09:03:10.232900"], ["updated_at", "2021-02-09 09:03:10.232900"], ["referral_code", "CWDEYSJbTQ88CzLDaXoprRTs"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email12@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email12@gmail.com"], ["password_digest", "$2a$04$dbKLQ2CFlbq4gV4c1HC5FebkeSkZIP4Ndn.I7r.iZU0Ku9xvv/eWW"], ["created_at", "2021-02-09 09:03:10.237733"], ["updated_at", "2021-02-09 09:03:10.237733"], ["referral_code", "7nHHd8HRVKUrDFG9jhBR4r7U"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email11@gmail.com"], ["id", 785], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:03:10.240898"], ["referrer_id", 786], ["id", 785]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 786], ["LIMIT", 1]]
  [1m[36mUser Update All (0.7ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 785]]
  [1m[36mUser Update All (0.6ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 786]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 786], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email13@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email13@gmail.com"], ["password_digest", "$2a$04$xMN3MqHXg6eP15Ub2yo.z.5XPsngHaFa/oHBwJ0olZ4om6Bl/gPLm"], ["created_at", "2021-02-09 09:03:10.254775"], ["updated_at", "2021-02-09 09:03:10.254775"], ["referral_code", "NUcUJyHn2zoY3T954VVLKY2X"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email14@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email14@gmail.com"], ["password_digest", "$2a$04$TzdzUcYVNfUP/njEJMNQ.OMr8fiOgWy9YDAgCCuzOoD42hrP7/Uhy"], ["created_at", "2021-02-09 09:03:10.260885"], ["updated_at", "2021-02-09 09:03:10.260885"], ["referral_code", "RvhmGkbUR1SHnX22Q4i6748x"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email13@gmail.com"], ["id", 787], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:03:10.263227"], ["referrer_id", 788], ["id", 787]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email14@gmail.com"], ["id", 788], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:03:10.265394"], ["referral_points", 5], ["id", 788]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 788], ["LIMIT", 1]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 787]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 788]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 788]]
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 788]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 788], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email15@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email15@gmail.com"], ["password_digest", "$2a$04$A6RCvqh3HvY9eu5Rcg89Se4RcU05ZwMJHFJ3/HMrM5Reyse0Su1Vu"], ["created_at", "2021-02-09 09:03:10.277477"], ["updated_at", "2021-02-09 09:03:10.277477"], ["referral_code", "T3WFJEGsKM6izpPd8BGDGqRb"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email16@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email16@gmail.com"], ["password_digest", "$2a$04$tmrpV8EUjL4Q4iyWEhDB1.j0e5a.yabEl1jQevsT/gW5kaH.Hmsvy"], ["created_at", "2021-02-09 09:03:10.284996"], ["updated_at", "2021-02-09 09:03:10.284996"], ["referral_code", "AjKZiYCzzxBkmUihdtfL4yhX"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email15@gmail.com"], ["id", 789], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:03:10.287784"], ["referrer_id", 790], ["id", 789]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email16@gmail.com"], ["id", 790], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:03:10.293501"], ["referral_points", 5], ["id", 790]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 790], ["LIMIT", 1]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 789]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 790]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 790]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 790]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 790], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$NL8/VA8y2bWNyGQ0v6ji4.Sfa8twtzcIl.CjHRM.x0eKOCeJ0dJ2u"], ["created_at", "2021-02-09 09:03:10.318688"], ["updated_at", "2021-02-09 09:03:10.318688"], ["referral_code", "tingQaEd5mFLjt7fKBuRdrBD"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 791], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email17@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email17@gmail.com"], ["password_digest", "$2a$04$cLceqrGFx.2LyIAFC85VAerPoXuzHy1LDR31eZ3Furpxae77ldw5y"], ["created_at", "2021-02-09 09:03:10.330313"], ["updated_at", "2021-02-09 09:03:10.330313"], ["referral_code", "RBtMam5e96H4iD8YtsuJ3oAh"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$dX7rERqkTgurBkKzbvjdg.oAEO89TQQsTPpVoD/xnCzln0/Xr7U0i"], ["created_at", "2021-02-09 09:03:10.335201"], ["updated_at", "2021-02-09 09:03:10.335201"], ["referral_code", "AKRhqhXz7wQC1JXnTS2Wfogo"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 793], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email18@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email18@gmail.com"], ["password_digest", "$2a$04$far.wLRnqiyDaeFsHI/Rpeg2ccHGbg0uf6dut4mupjneHVZOUb642"], ["created_at", "2021-02-09 09:03:10.346052"], ["updated_at", "2021-02-09 09:03:10.346052"], ["referral_code", "C93VNRzQq1Vutxd7LeHRCDca"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$HdGbR/b2BUdNUUcVehZVGeq8twrDK8uFJPblmanvEU0r2oPOYekoe"], ["created_at", "2021-02-09 09:03:10.354716"], ["updated_at", "2021-02-09 09:03:10.354716"], ["referral_code", "pKrpFkUNkeHAL6yFnZcLVUU9"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 795], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "C93VNRzQq1Vutxd7LeHRCDca"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 795], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:03:10.361670"], ["referrer_id", 794], ["id", 795]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email19@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email19@gmail.com"], ["password_digest", "$2a$04$MkANVYmxwXcYvpZ7dkV5zuIuyX9h6Ipvgm8CvG5PGvXd9cOivPDqG"], ["created_at", "2021-02-09 09:03:10.368343"], ["updated_at", "2021-02-09 09:03:10.368343"], ["referral_code", "KGGk8M1pYrC88yL3MpRre5P2"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 796]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 796], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email20@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email20@gmail.com"], ["password_digest", "$2a$04$O.bN7cnAnNsvkEhBbnLHZ.Fiz1aSPn3v0Evu71lfFQwpJ9q3CnO46"], ["created_at", "2021-02-09 09:03:10.378416"], ["updated_at", "2021-02-09 09:03:10.378416"], ["referral_code", "P21ADbbXGN5Yc5YsaEYdSZ8W"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 797], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 12:03:10 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 12:03:10 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email21@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email21@gmail.com"], ["password_digest", "$2a$04$k39AcvalqWOa5Qdhcqgg/OjC3CAPaIsk12HWw/FwlTO6GFavkLXsm"], ["created_at", "2021-02-09 09:03:10.404690"], ["updated_at", "2021-02-09 09:03:10.404690"], ["referral_code", "3fPEq2Kz8c7VxT8TRp9Enj5t"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 12:03:10 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email21@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email21@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email22@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email22@gmail.com"], ["password_digest", "$2a$04$2OshF.IS09KMIBfDPtaAuew.ojnTWANLcREZ8oBHrSocf9JoZWOm6"], ["created_at", "2021-02-09 09:03:10.424464"], ["updated_at", "2021-02-09 09:03:10.424464"], ["referral_code", "YurCKieYPZVWAu2T1d3FReNN"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 12:03:10 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email22@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email22@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email23@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email23@gmail.com"], ["password_digest", "$2a$04$A4xhiRpVvbaSBVb6bcTpKezFSrmuJdSvdaCbjuKsq2sSsBrSS7wEO"], ["created_at", "2021-02-09 09:03:10.437999"], ["updated_at", "2021-02-09 09:03:10.437999"], ["referral_code", "ipirF7PBpm5tXFx9HS45GRSq"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email23@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email24@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email24@gmail.com"], ["password_digest", "$2a$04$z9bQqOBB72zjjUhxQJsjouVATVuIWEcWQqmKyslk7RPQyTg7hHdQK"], ["created_at", "2021-02-09 09:03:10.452285"], ["updated_at", "2021-02-09 09:03:10.452285"], ["referral_code", "p7Rv4MZVatzfJ8RQNSqsNVu4"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email24@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email25@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email25@gmail.com"], ["password_digest", "$2a$04$Bmi/OcsSw1jLnQbC.hFDLeASRVr6/dLA/GEAJP4sKoHby55slVAEq"], ["created_at", "2021-02-09 09:03:10.462633"], ["updated_at", "2021-02-09 09:03:10.462633"], ["referral_code", "8WtL6n1sTcgsCNQCo6Tj6api"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 12:03:10 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email25@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email25@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.2ms)
Started GET "/users" for 127.0.0.1 at 2021-02-09 12:03:10 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 802], ["LIMIT", 1]]
Completed 200 OK in 882ms (Views: 0.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email26@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email26@gmail.com"], ["password_digest", "$2a$04$YTTYP5J8Nkzu8PvohQDmeuvNnOHwbGjMfVuHyi08P9.rttv2bz1SS"], ["created_at", "2021-02-09 09:03:11.361771"], ["updated_at", "2021-02-09 09:03:11.361771"], ["referral_code", "vxWUwZfZF3i2VtbgbeCF3BZf"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 12:03:11 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email26@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email26@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms)
Started GET "/users" for 127.0.0.1 at 2021-02-09 12:03:11 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 803], ["LIMIT", 1]]
Completed 200 OK in 597ms (Views: 0.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/users" for 127.0.0.1 at 2021-02-09 12:03:11 +0300
Processing by UsersController#index as HTML
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
Started GET "/users" for 127.0.0.1 at 2021-02-09 12:21:56 +0300
Processing by UsersController#index as HTML
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$qEjPu51a042v/14vSCyoQeIJJNALGKnB9Mi0.PPEEw6LjvpzubYea"], ["created_at", "2021-02-09 09:21:56.215674"], ["updated_at", "2021-02-09 09:21:56.215674"], ["referral_code", "gUKNm4M1xfkJoqQd4BeYZwAy"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 12:21:56 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email1@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.4ms)
Started GET "/users" for 127.0.0.1 at 2021-02-09 12:21:56 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 804], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$TOQVx2dH03nF0sTjXOG8BeIVZpdCLzY4.VHN/hBx8cmIUSlILKsya"], ["created_at", "2021-02-09 09:21:56.236232"], ["updated_at", "2021-02-09 09:21:56.236232"], ["referral_code", "twwohqnhsdjHEkSNbq51CKzT"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 12:21:56 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email2@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.3ms)
Started GET "/users" for 127.0.0.1 at 2021-02-09 12:21:56 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 805], ["LIMIT", 1]]
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email3@gmail.com"], ["password_digest", "$2a$04$wXxeguKiNoy2R50.h/rWAOgIwekkwoEGN2ioiw4706VSZtzVwnC.G"], ["created_at", "2021-02-09 09:21:56.247913"], ["updated_at", "2021-02-09 09:21:56.247913"], ["referral_code", "nqMSnuDMiUW91BiWF2qQoJbE"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email4@gmail.com"], ["password_digest", "$2a$04$HL8890nDvTq.oN3DHa6P9ORvXWM9xQdPB/945A48KTEoQP3O5lMA2"], ["created_at", "2021-02-09 09:21:56.251513"], ["updated_at", "2021-02-09 09:21:56.251513"], ["referral_code", "rwkTkiQsNYRWX5MyCzyGhwEm"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email3@gmail.com"], ["id", 806], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:21:56.257060"], ["referrer_id", 807], ["id", 806]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 806], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 807], ["LIMIT", 1]]
  [1m[36mUser Update All (1.2ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 806]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 807]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 806], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email5@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email5@gmail.com"], ["password_digest", "$2a$04$SHevCy3jKd1caL7x9W1vde1G.LI3WMGlxQikyQi/31ZUdoqD/jOeC"], ["created_at", "2021-02-09 09:21:56.276408"], ["updated_at", "2021-02-09 09:21:56.276408"], ["referral_code", "fnnBhtytEoA2YFJXt83fm1Ki"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email6@gmail.com"], ["password_digest", "$2a$04$qI37HZPjR3EABsK3UZYorOEMBYW7hRqg0ZWDMzvqRi.dXOiMBuJD."], ["created_at", "2021-02-09 09:21:56.280424"], ["updated_at", "2021-02-09 09:21:56.280424"], ["referral_code", "XPgnqmDwcmDVkMsy31SVvpmb"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email5@gmail.com"], ["id", 808], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:21:56.283294"], ["referrer_id", 809], ["id", 808]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 809], ["LIMIT", 1]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 808]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 809]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 809], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email7@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email7@gmail.com"], ["password_digest", "$2a$04$RYTTHiarmZMWn4r57bTZDuIO8HOobHWUeFuUfHeHs5sjg2MSUU.VK"], ["created_at", "2021-02-09 09:21:56.293234"], ["updated_at", "2021-02-09 09:21:56.293234"], ["referral_code", "pBSAKPPWZngm3mQHtyo98eev"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email8@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email8@gmail.com"], ["password_digest", "$2a$04$Jxe.3D/8u3XDLJuEfdrwP.AaVdDL.XRn/S.66x4QGwnXHaSVv0ObC"], ["created_at", "2021-02-09 09:21:56.299625"], ["updated_at", "2021-02-09 09:21:56.299625"], ["referral_code", "pMfyW92HrToT9ySYXWEtK2Hs"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email7@gmail.com"], ["id", 810], ["LIMIT", 1]]
  [1m[36mUser Update (0.9ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:21:56.303891"], ["referrer_id", 811], ["id", 810]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 811], ["LIMIT", 1]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 810]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 811]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 811], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email9@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email9@gmail.com"], ["password_digest", "$2a$04$s5toyHwWjv6zRu58kMCg8OAEt8aKw/XI0gg8lekPWpH2NikIYY3qG"], ["created_at", "2021-02-09 09:21:56.316194"], ["updated_at", "2021-02-09 09:21:56.316194"], ["referral_code", "sQmi7EF2Kr8cLZ5edhcCvFWN"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email10@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email10@gmail.com"], ["password_digest", "$2a$04$CAoybTdnkHpKYQTJKfyLlen/vJ5MLQvZgXP2LTqjumIfttsyA1AP6"], ["created_at", "2021-02-09 09:21:56.320328"], ["updated_at", "2021-02-09 09:21:56.320328"], ["referral_code", "gCA8S8BaGfRF4AZzDUYSBRMm"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email9@gmail.com"], ["id", 812], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:21:56.323837"], ["referrer_id", 813], ["id", 812]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email10@gmail.com"], ["id", 813], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:21:56.326369"], ["referral_points", 5], ["id", 813]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 813], ["LIMIT", 1]]
  [1m[36mUser Update All (0.9ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 812]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 813]]
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 813]]
  [1m[36mUser Update All (0.9ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 813]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 813], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email11@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email11@gmail.com"], ["password_digest", "$2a$04$sp0gWTgN0GJEdxlCZa/MReRwLJ3UKehRlztNXTyLNHET3lr0ZFp.S"], ["created_at", "2021-02-09 09:21:56.345648"], ["updated_at", "2021-02-09 09:21:56.345648"], ["referral_code", "V3ugzKNAR1QPeDNZtzdqUrfF"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email12@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email12@gmail.com"], ["password_digest", "$2a$04$g9FqsZWGg8kTud7KTNdp3ehjj9uGE4pYCgszhtlEpyOiLOny5GU9C"], ["created_at", "2021-02-09 09:21:56.349496"], ["updated_at", "2021-02-09 09:21:56.349496"], ["referral_code", "gAvjBtAkssiWxxqV2K1PRrxt"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email11@gmail.com"], ["id", 814], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:21:56.352185"], ["referrer_id", 815], ["id", 814]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email12@gmail.com"], ["id", 815], ["LIMIT", 1]]
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:21:56.354459"], ["referral_points", 5], ["id", 815]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 815], ["LIMIT", 1]]
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 814]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 815]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 815]]
  [1m[36mUser Update All (0.7ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 815]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 815], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email13@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email13@gmail.com"], ["password_digest", "$2a$04$EiRFn.WhIE.r1c0p/SVyzux3JkitjQgoowlLf1/zvx7B42C9EUlMu"], ["created_at", "2021-02-09 09:21:56.371733"], ["updated_at", "2021-02-09 09:21:56.371733"], ["referral_code", "twp3nDQCzdhf4BEt69w7PvVj"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 12:21:56 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 12:21:56 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email14@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email14@gmail.com"], ["password_digest", "$2a$04$Ma0QR6sGQLObz19Zj7hTNuuupnxwhroldiAA9i9QlPDQd2.JFr9Vu"], ["created_at", "2021-02-09 09:21:56.388597"], ["updated_at", "2021-02-09 09:21:56.388597"], ["referral_code", "nFybAV9gf3QqQaHJJsuhGA6V"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 12:21:56 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email14@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email14@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email15@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email15@gmail.com"], ["password_digest", "$2a$04$NTwHS/XkV8bvcZsxumXvQuZNr2To8yOO8f/ohGii8efpNT62A3qZ6"], ["created_at", "2021-02-09 09:21:56.404981"], ["updated_at", "2021-02-09 09:21:56.404981"], ["referral_code", "AhRtQx8yinkubru2NtCNcUKp"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 12:21:56 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email15@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email15@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email16@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email16@gmail.com"], ["password_digest", "$2a$04$jlnf53WK9T5SE2mfpylaA.NkDeDchjDaHrXIw42GgrNi5t/NMJlXK"], ["created_at", "2021-02-09 09:21:56.420383"], ["updated_at", "2021-02-09 09:21:56.420383"], ["referral_code", "6CUGbdBqQjTjj5ygt5tpeSsf"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 819]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 819], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email17@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email17@gmail.com"], ["password_digest", "$2a$04$l14UaJjVUBWMU2SoPq3iZuWWA2kocX2/8OX2ZUktqB0C7dX4C311m"], ["created_at", "2021-02-09 09:21:56.430848"], ["updated_at", "2021-02-09 09:21:56.430848"], ["referral_code", "x6sm9Az4rv9ALrN2SjLZVPXb"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 820], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "referral_code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2021-02-09 09:21:56.447487"], ["updated_at", "2021-02-09 09:21:56.447487"], ["referral_code", "9iUccs2pVwfhitgJs3xLTYgJ"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "dummy value"], ["updated_at", "2021-02-09 09:21:56.449165"], ["id", 821]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "dummy value"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "DUMMY VALUE"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email18@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email18@gmail.com"], ["password_digest", "$2a$04$7Z8WdVqKnSjkj6N3DPcF4OWQ2kAalXEK12pdbRDXNHbVa9B9DhgZC"], ["created_at", "2021-02-09 09:21:56.524016"], ["updated_at", "2021-02-09 09:21:56.524016"], ["referral_code", "RBESf2XrcZRxy7iYdn3Gw6vh"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 12:21:56 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email18@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email18@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email18@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email18@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 12ms (Views: 0.6ms | ActiveRecord: 2.4ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email19@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email19@gmail.com"], ["password_digest", "$2a$04$hvWBLNeN9qqwfd/agOjnKeLeLQD23qA0t.k8iRZJ2vJTaTFD3GH/a"], ["created_at", "2021-02-09 09:21:56.544862"], ["updated_at", "2021-02-09 09:21:56.544862"], ["referral_code", "pUQ2rPBaJtFcDeLfSxpDBdM1"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 12:21:56 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email19@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email19@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email19@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email19@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 7ms (Views: 0.3ms | ActiveRecord: 1.2ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email20@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email20@gmail.com"], ["password_digest", "$2a$04$ZFrGp332U90IBQcryCtvseYmvXDXYtZmRNeKWh.p4KndiFzKgsksu"], ["created_at", "2021-02-09 09:21:56.560399"], ["updated_at", "2021-02-09 09:21:56.560399"], ["referral_code", "hvo7RCMSpx2AsnAiZnjh7i6x"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email21@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email21@gmail.com"], ["password_digest", "$2a$04$6kxd4WGNfC61t2AQspJl4uXS6lzKLyPW8m6pTpkZ7Pyt.bDwwNium"], ["created_at", "2021-02-09 09:21:56.568092"], ["updated_at", "2021-02-09 09:21:56.568092"], ["referral_code", "EXWDEhoaYT1tjPzU7BVT7TjJ"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 12:21:56 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email20@gmail.com", "password"=>"[FILTERED]", "referred_by"=>"EXWDEhoaYT1tjPzU7BVT7TjJ"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email20@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email20@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email20@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 9ms (Views: 0.3ms | ActiveRecord: 1.4ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 12:21:56 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$ld2ec.tKd8aKkTAPX9on7OSYHLdyq/9ohWr0xtfgS4AtNWRWuCeWu"], ["created_at", "2021-02-09 09:21:56.599013"], ["updated_at", "2021-02-09 09:21:56.599013"], ["referral_code", "cu7QrJbyYR8Z9nTmyKnng7pZ"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 826], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 826], ["LIMIT", 1]]
Completed 201 Created in 14ms (Views: 1.1ms | ActiveRecord: 3.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 12:21:56 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$JryQ.wAjavrOHpLkBtNbg.YRIPTD1T.GMDis9F8I1mG5b.HdNYPSm"], ["created_at", "2021-02-09 09:21:56.615126"], ["updated_at", "2021-02-09 09:21:56.615126"], ["referral_code", "1dNs4kWySv4DXdBnadP8Pbna"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 827], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 827], ["LIMIT", 1]]
Completed 201 Created in 7ms (Views: 0.3ms | ActiveRecord: 1.6ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email22@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email22@gmail.com"], ["password_digest", "$2a$04$IcPwQXGi/xgwzS2yKa0FmeSpCrDG.IasGsg01Yfl3icGKJ2RTVOYq"], ["created_at", "2021-02-09 09:21:56.626322"], ["updated_at", "2021-02-09 09:21:56.626322"], ["referral_code", "WmzFBQYQni5o9Nx71Jsreut9"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 12:21:56 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]", "referred_by"=>"WmzFBQYQni5o9Nx71Jsreut9"}
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$px6Eq9y2GMHiwew061d54.jQWS/Z97oqJoHOFupjLxP9czg.OEwB6"], ["created_at", "2021-02-09 09:21:56.638329"], ["updated_at", "2021-02-09 09:21:56.638329"], ["referral_code", "6bEBMXMKPCyGKrGuJ9xcAbPS"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 829], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "WmzFBQYQni5o9Nx71Jsreut9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 829], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:21:56.645367"], ["referrer_id", 828], ["id", 829]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 829], ["LIMIT", 1]]
Completed 201 Created in 15ms (Views: 0.4ms | ActiveRecord: 4.5ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$Ax2uiO0PrQwS13HKnwUkR.aEGGAzaz4HVrpX0jwanQGZMhLA/5Ugm"], ["created_at", "2021-02-09 09:21:56.656962"], ["updated_at", "2021-02-09 09:21:56.656962"], ["referral_code", "H5EbPa32FGirVz3KSbZmbVvL"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 830], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email23@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email23@gmail.com"], ["password_digest", "$2a$04$hMvK4vzPIxUVypP3PA/kmeUbsXDiaYhdTPdn23gm8JV/GGDXXKg2u"], ["created_at", "2021-02-09 09:21:56.665796"], ["updated_at", "2021-02-09 09:21:56.665796"], ["referral_code", "nNVwPZynrsTrrtfk3eGmsak8"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$dhao7lqXkev2foGcJVBVeOMxhsv5bcVefsBprOnOfC9SAoNF4bES2"], ["created_at", "2021-02-09 09:21:56.675116"], ["updated_at", "2021-02-09 09:21:56.675116"], ["referral_code", "cZkae3FAPiKaQRu3eWpLQwvg"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 832], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "nNVwPZynrsTrrtfk3eGmsak8"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 832], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:21:56.680809"], ["referrer_id", 831], ["id", 832]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email24@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email24@gmail.com"], ["password_digest", "$2a$04$NlTDCvLRuaxWZfQIqzfWa.TC.EEGqQ7077Kcx9kI12Gac8shuteAW"], ["created_at", "2021-02-09 09:21:56.688500"], ["updated_at", "2021-02-09 09:21:56.688500"], ["referral_code", "PeAXJt5S7Cizv7cNCWR3duDm"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$gzbFGefKGcTVGoP5tcEchuu9phDQ7RjlENNOgpiD9mCFgKIuVGzky"], ["created_at", "2021-02-09 09:21:56.695872"], ["updated_at", "2021-02-09 09:21:56.695872"], ["referral_code", "nVFtwABiaPMeabJYz1pGhT1c"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 834], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email25@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email25@gmail.com"], ["password_digest", "$2a$04$.WTs8Vcur58G2ypxXrbBO.QfTfPLqC57uQwoZGb/sBe7Qyz3sEMgG"], ["created_at", "2021-02-09 09:21:56.717412"], ["updated_at", "2021-02-09 09:21:56.717412"], ["referral_code", "2H1fkYS697nj3XbbqqbbVLyv"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email25@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email26@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email26@gmail.com"], ["password_digest", "$2a$04$ZDa2mIEpr9ZxTkd6gy.cKeXYIqmUZEv441Gvf/emBRFyAO29eDwfe"], ["created_at", "2021-02-09 09:21:56.726546"], ["updated_at", "2021-02-09 09:21:56.726546"], ["referral_code", "mcpN7Z75xe8irts9UWuzfNwY"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email26@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
Started GET "/users" for 127.0.0.1 at 2021-02-09 12:23:04 +0300
Processing by UsersController#index as HTML
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$yNYpp08JVKwfFnivSrY5FuPq1vgPlY.tJXtYnDULrt/FdfIEdsJbi"], ["created_at", "2021-02-09 09:23:04.110791"], ["updated_at", "2021-02-09 09:23:04.110791"], ["referral_code", "RWBjHpb9TUDYV8pUNUekScvh"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 12:23:04 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email1@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.4ms)
Started GET "/users" for 127.0.0.1 at 2021-02-09 12:23:04 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 837], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$9YacWHtDcRn.yMlxw.14neG78dIGoVTsChM1WThvffN/Ra8sbdu8i"], ["created_at", "2021-02-09 09:23:04.131417"], ["updated_at", "2021-02-09 09:23:04.131417"], ["referral_code", "h3CRnvZTJcRqbzf722ykoGC9"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 12:23:04 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email2@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.3ms)
Started GET "/users" for 127.0.0.1 at 2021-02-09 12:23:04 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 838], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email3@gmail.com"], ["password_digest", "$2a$04$HaWM0f.b6Q3oCvy3T.55furlgs/VayEJZDNHOCigRx///qQOgzYje"], ["created_at", "2021-02-09 09:23:04.146573"], ["updated_at", "2021-02-09 09:23:04.146573"], ["referral_code", "Cyhfmmkuoncd7XB1kHMAyAaB"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email4@gmail.com"], ["password_digest", "$2a$04$XtPrwOCJreeDHxFAGZwdxe.piI7QpJAfYlmXRzQ2EfVeusWmvOpkS"], ["created_at", "2021-02-09 09:23:04.150863"], ["updated_at", "2021-02-09 09:23:04.150863"], ["referral_code", "DpxaHedh9PLFjatmPxfh94NX"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email3@gmail.com"], ["id", 839], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:23:04.156993"], ["referrer_id", 840], ["id", 839]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 839], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 840], ["LIMIT", 1]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 839]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 840]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 839], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email5@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email5@gmail.com"], ["password_digest", "$2a$04$.hGTMgQaEATUIwg1LfPtluVTfJE/rXpTx/HJnxF/xPiU9iUZSJ98."], ["created_at", "2021-02-09 09:23:04.179743"], ["updated_at", "2021-02-09 09:23:04.179743"], ["referral_code", "umHbWrxbg7Wwwug9syYX8BtZ"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email6@gmail.com"], ["password_digest", "$2a$04$AXhpKpZpCh8ooBxeLLcJ2eCTeRbgW8KGM5qwAYgFA3tRulhevoGeq"], ["created_at", "2021-02-09 09:23:04.183692"], ["updated_at", "2021-02-09 09:23:04.183692"], ["referral_code", "83EpS1DDegaFraA4T5dLEduk"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email5@gmail.com"], ["id", 841], ["LIMIT", 1]]
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:23:04.186730"], ["referrer_id", 842], ["id", 841]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 842], ["LIMIT", 1]]
  [1m[36mUser Update All (0.6ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 841]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 842]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 842], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email7@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email7@gmail.com"], ["password_digest", "$2a$04$X3OrcE3bmW70lt4i76ZlHOI9XCpD7MpUULzSSjbhk1UYUHIGFQTmy"], ["created_at", "2021-02-09 09:23:04.199831"], ["updated_at", "2021-02-09 09:23:04.199831"], ["referral_code", "VP41EMVnTdKoWR2gLPaBx71R"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email8@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email8@gmail.com"], ["password_digest", "$2a$04$bJEQc1ZZTEDthapNVJpc5O3WXkuWqk0pu4jz6A5RM7B8mol9lLFqq"], ["created_at", "2021-02-09 09:23:04.205244"], ["updated_at", "2021-02-09 09:23:04.205244"], ["referral_code", "f4pPDQnu3C8XB7rwFMrQ1rXL"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email7@gmail.com"], ["id", 843], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:23:04.211015"], ["referrer_id", 844], ["id", 843]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email8@gmail.com"], ["id", 844], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:23:04.213605"], ["referral_points", 5], ["id", 844]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 844], ["LIMIT", 1]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 843]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 844]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 844]]
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 844]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 844], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email9@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email9@gmail.com"], ["password_digest", "$2a$04$OjDZeTw1bC3qNI9v3yUabumpo/K/qgYCZ/1dyJXXhsxWkPVtuK71y"], ["created_at", "2021-02-09 09:23:04.226892"], ["updated_at", "2021-02-09 09:23:04.226892"], ["referral_code", "qmvN3Z2vXxTmVqHHBN2RAT63"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email10@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email10@gmail.com"], ["password_digest", "$2a$04$T/YUwylZYBCgWm9Gd3bLWeV.i/Z/YaifkBCrTJqAS0eQ8XLahY2Eq"], ["created_at", "2021-02-09 09:23:04.232752"], ["updated_at", "2021-02-09 09:23:04.232752"], ["referral_code", "BvBTY9cfioyztiCwNoQMCooY"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email9@gmail.com"], ["id", 845], ["LIMIT", 1]]
  [1m[36mUser Update (1.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:23:04.236653"], ["referrer_id", 846], ["id", 845]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email10@gmail.com"], ["id", 846], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:23:04.243139"], ["referral_points", 5], ["id", 846]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 846], ["LIMIT", 1]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 845]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 846]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 846]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 846]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 846], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email11@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email11@gmail.com"], ["password_digest", "$2a$04$WGYgihEoj6E7h8axN1iXXOQ57P6NgEcikbHUeayNLnoSuvSawwGRS"], ["created_at", "2021-02-09 09:23:04.253898"], ["updated_at", "2021-02-09 09:23:04.253898"], ["referral_code", "WhkaqfkFc58sJBRLi1RaewNe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email12@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email12@gmail.com"], ["password_digest", "$2a$04$/aa6uFppNqLDlX9sBs5gjOIbAWWgQLEimKmnB2/ziX/FlsWUiQSRm"], ["created_at", "2021-02-09 09:23:04.260090"], ["updated_at", "2021-02-09 09:23:04.260090"], ["referral_code", "npg92zrJ1c2M62Sp3wbDbp9B"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email11@gmail.com"], ["id", 847], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:23:04.264904"], ["referrer_id", 848], ["id", 847]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 848], ["LIMIT", 1]]
  [1m[36mUser Update All (0.6ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 847]]
  [1m[36mUser Update All (0.8ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 848]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 848], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email13@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email13@gmail.com"], ["password_digest", "$2a$04$TbI0ruRuajaNI05si/Bk3OEjg94V/nf4t6rMFTicuI5YdrWy3dLiy"], ["created_at", "2021-02-09 09:23:04.279109"], ["updated_at", "2021-02-09 09:23:04.279109"], ["referral_code", "VspQ2NTZ4gXAvotbFnW3AMep"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 849]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 849], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email14@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email14@gmail.com"], ["password_digest", "$2a$04$s.eNczubZ2NupnWMKAV/8.zmIMiAjkIhWkrycpUHjxLYZ7bHK7//i"], ["created_at", "2021-02-09 09:23:04.286583"], ["updated_at", "2021-02-09 09:23:04.286583"], ["referral_code", "goWm7vcX9s6skchp8G8zfW4E"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 850], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 12:23:04 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$84IT4xp7.eGGk4EwYFUoQu4lih69nI.SBTMmnx.IUy9aMrxyl2POu"], ["created_at", "2021-02-09 09:23:04.305279"], ["updated_at", "2021-02-09 09:23:04.305279"], ["referral_code", "Mn9Dkf48BnSv66VRWstxcgdu"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 851], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 851], ["LIMIT", 1]]
Completed 201 Created in 11ms (Views: 0.4ms | ActiveRecord: 3.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 12:23:04 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$i8z8fqPj4IWvhqwJjuPsdeUypVvcgKQiPTjDARBEBvgfGXbIgIIi2"], ["created_at", "2021-02-09 09:23:04.318962"], ["updated_at", "2021-02-09 09:23:04.318962"], ["referral_code", "bwMxyipD4XEwRtFqBbcA9iSr"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 852], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 852], ["LIMIT", 1]]
Completed 201 Created in 10ms (Views: 0.7ms | ActiveRecord: 2.0ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email15@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email15@gmail.com"], ["password_digest", "$2a$04$K0tcuQWdsRtzszn8i.0aM.eBMxgXyXTetJ3rCx81GQV7lM2AVMiFS"], ["created_at", "2021-02-09 09:23:04.332951"], ["updated_at", "2021-02-09 09:23:04.332951"], ["referral_code", "go855xe14o9jpoBeX6sQPPMW"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 12:23:04 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]", "referred_by"=>"go855xe14o9jpoBeX6sQPPMW"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$NRXQTw3oYwcVmCj/0MifvOG3kurVfP6gxfPu5841S3fRvQ36Gkaa."], ["created_at", "2021-02-09 09:23:04.348643"], ["updated_at", "2021-02-09 09:23:04.348643"], ["referral_code", "2VpFdWXBBWxjRx3JEmUpqQpL"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 854], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "go855xe14o9jpoBeX6sQPPMW"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCACHE User Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 854], ["LIMIT", 1]]
  [1m[36mUser Update (1.0ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:23:04.355760"], ["referrer_id", 853], ["id", 854]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 854], ["LIMIT", 1]]
Completed 201 Created in 17ms (Views: 0.8ms | ActiveRecord: 4.6ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email16@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email16@gmail.com"], ["password_digest", "$2a$04$UhdGm7L8vCuXdr.lf9N49.BSJZ2lAuKqpetCRiqR5F3u.mH0qIAZu"], ["created_at", "2021-02-09 09:23:04.371552"], ["updated_at", "2021-02-09 09:23:04.371552"], ["referral_code", "jFvVTmPj8Y6cUPgVRjz1B7DH"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 12:23:04 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email16@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email16@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email16@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email16@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 8ms (Views: 0.2ms | ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email17@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email17@gmail.com"], ["password_digest", "$2a$04$pKyUevfJC8n4U.R5NmCUsu0Bf8xxWULPX4OXD3G42fz5yK6jYcmUK"], ["created_at", "2021-02-09 09:23:04.391305"], ["updated_at", "2021-02-09 09:23:04.391305"], ["referral_code", "5nf2biDN9sgsSqpgig9xTtg6"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 12:23:04 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email17@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email17@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email17@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email17@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 11ms (Views: 0.1ms | ActiveRecord: 2.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email18@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email18@gmail.com"], ["password_digest", "$2a$04$SpyX2vVjm/270lLPlDjPN.hh3tCx2iYIm/455vVRBJ0sQN0l2R4KC"], ["created_at", "2021-02-09 09:23:04.413343"], ["updated_at", "2021-02-09 09:23:04.413343"], ["referral_code", "mLXz7WRj6NNXqcUE8zvW72ps"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email19@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email19@gmail.com"], ["password_digest", "$2a$04$/2jK5ADxrAbn8febUCm9nuMKOBl4yQxSeg.PvacU9XhyoU6LKO0xW"], ["created_at", "2021-02-09 09:23:04.417729"], ["updated_at", "2021-02-09 09:23:04.417729"], ["referral_code", "mZ1Fm14ociH2tQyhzkSd9AAd"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 12:23:04 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email18@gmail.com", "password"=>"[FILTERED]", "referred_by"=>"mZ1Fm14ociH2tQyhzkSd9AAd"}
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email18@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email18@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email18@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 13ms (Views: 0.5ms | ActiveRecord: 2.3ms)
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email20@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email20@gmail.com"], ["password_digest", "$2a$04$uoKoxlnpvO5IvA5su1ooounvhK/YO/O6o63EDCls3CGbVAjCtTzs6"], ["created_at", "2021-02-09 09:23:04.445647"], ["updated_at", "2021-02-09 09:23:04.445647"], ["referral_code", "uX15tVqHu1EQ2Kx4ixVHczYD"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email20@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email21@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email21@gmail.com"], ["password_digest", "$2a$04$nBTASlvOT.NCEVrPVkn5aeBhQ2Ul.ltM6Ni0ZJ4FaY2tc43j..rCK"], ["created_at", "2021-02-09 09:23:04.476941"], ["updated_at", "2021-02-09 09:23:04.476941"], ["referral_code", "pQpggTLYa8qcDg6hwLNMsieQ"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email21@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "referral_code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2021-02-09 09:23:04.499747"], ["updated_at", "2021-02-09 09:23:04.499747"], ["referral_code", "9xnwftkKK8UDXPRXm8W6i8mv"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "dummy value"], ["updated_at", "2021-02-09 09:23:04.503651"], ["id", 861]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "dummy value"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "DUMMY VALUE"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email22@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email22@gmail.com"], ["password_digest", "$2a$04$RA8yC9ABNhZ9fBcXiBKHdOuVb5tg6CmpTMHNAlsEafJLg5yqwiyVi"], ["created_at", "2021-02-09 09:23:04.552867"], ["updated_at", "2021-02-09 09:23:04.552867"], ["referral_code", "4GfZA5D841hkpjHA71TfYWJW"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 12:23:04 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email22@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email22@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.4ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email23@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email23@gmail.com"], ["password_digest", "$2a$04$BxEmJoWoyu82g6iu5lM9Q.QlYJpCGCMYYveh780OebmIRaZP9AIbq"], ["created_at", "2021-02-09 09:23:04.570871"], ["updated_at", "2021-02-09 09:23:04.570871"], ["referral_code", "4Fe4a7XXL6gBYzNX4vnd779f"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 12:23:04 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email23@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email23@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 12:23:04 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 12:23:04 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email24@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email24@gmail.com"], ["password_digest", "$2a$04$.x2TRYO9aAbUcY2dS2y7jeypGdcMJPTyMIvV.TBRiZJUfwO/6UVNK"], ["created_at", "2021-02-09 09:23:04.593810"], ["updated_at", "2021-02-09 09:23:04.593810"], ["referral_code", "gS9i5PP88uULrFDmkBQeUHat"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$ufwgPKNIylZKm/YpbOqKXu97gtemDnbZsqIYZpjPhjuGMi9w4Rmkq"], ["created_at", "2021-02-09 09:23:04.613410"], ["updated_at", "2021-02-09 09:23:04.613410"], ["referral_code", "VL7uR6JsR4ybPQyjwzLdxb1P"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 865], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email25@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email25@gmail.com"], ["password_digest", "$2a$04$PuWCIV/Iet0HySqf90SkaOomCS46o7q8LyEovzfAV7TdIvZuIM412"], ["created_at", "2021-02-09 09:23:04.624174"], ["updated_at", "2021-02-09 09:23:04.624174"], ["referral_code", "G21C8VUGpzDjH4cnHYSiNZJ6"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$0ff75agh7EW4z3grP2wQXOGUjKcvv0dwY8Vwvn7PWGLWhU/EnPgSe"], ["created_at", "2021-02-09 09:23:04.634429"], ["updated_at", "2021-02-09 09:23:04.634429"], ["referral_code", "1tr4XzgiuDGZgjeUy6TH1VpN"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 867], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email26@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email26@gmail.com"], ["password_digest", "$2a$04$sT6qsoa./GexlcZXy52fLOuK5WHLWt6O3oZwD5e0e98PnPvc6vF4G"], ["created_at", "2021-02-09 09:23:04.642623"], ["updated_at", "2021-02-09 09:23:04.642623"], ["referral_code", "XmopGvWoYWRrLryqGtS29NRi"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$ZV5hvUAtSKq99Xsl3iIpBufhqUmjACyLjmM6cx4h/WRAs6a7KsgS."], ["created_at", "2021-02-09 09:23:04.648886"], ["updated_at", "2021-02-09 09:23:04.648886"], ["referral_code", "wFgu2n2rwpZsgEfQzb3D2irc"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 869], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "XmopGvWoYWRrLryqGtS29NRi"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 869], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:23:04.652790"], ["referrer_id", 868], ["id", 869]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email1@gmail.com"], ["password_digest", "$2a$04$GNKMQYkyGVTMvbK7Va1c1edF8UWENLnH3T0Y9WoLXeR1b8PNyz062"], ["created_at", "2021-02-09 09:38:12.192255"], ["updated_at", "2021-02-09 09:38:12.192255"], ["referral_code", "Ex5kiTKn4iR916guiJAxUNaL"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 870], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email2@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email2@gmail.com"], ["password_digest", "$2a$04$8JTm8Dx/DClCZAq8VBEqWu/Lm7qwqCB4IOuSq.VsShoSZkZHE9a5."], ["created_at", "2021-02-09 09:38:12.242130"], ["updated_at", "2021-02-09 09:38:12.242130"], ["referral_code", "65NXxXS5wSKQraCFyaeS9bHG"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 871]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 871], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email3@gmail.com"], ["password_digest", "$2a$04$c4bAnxKMOyq5ipbzCDy7rO5D7ckG4ANtAKQ/5P/jSH.IrIWJc/NWS"], ["created_at", "2021-02-09 09:38:12.251572"], ["updated_at", "2021-02-09 09:38:12.251572"], ["referral_code", "qhRwkxwh46T3rrsr9k3Sem4x"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 12:38:12 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email3@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email3@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 6ms (Views: 0.4ms | ActiveRecord: 0.7ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email4@gmail.com"], ["password_digest", "$2a$04$kOVXAgrNFJXzPxVBhzvzkeHuUcvCn7UTqmrYbctKr57jYm0DDCisG"], ["created_at", "2021-02-09 09:38:12.280116"], ["updated_at", "2021-02-09 09:38:12.280116"], ["referral_code", "pvokw4WvK5hdr9AE9KmiiCu4"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 12:38:12 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email4@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email4@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 12:38:12 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 12:38:12 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"wrong@email.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "wrong@email.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "referral_code") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2021-02-09 09:38:12.337311"], ["updated_at", "2021-02-09 09:38:12.337311"], ["referral_code", "UJE1aU9bRJtcXdyk6iKGvdiY"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "dummy value"], ["updated_at", "2021-02-09 09:38:12.340910"], ["id", 874]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "dummy value"], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "DUMMY VALUE"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "invalid@email.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email5@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email5@gmail.com"], ["password_digest", "$2a$04$RH1DTT3NoCvpGXcUsM0hmOVKm2AZUe7RliPg4.ghtVxoElPF6SM7m"], ["created_at", "2021-02-09 09:38:12.379626"], ["updated_at", "2021-02-09 09:38:12.379626"], ["referral_code", "JFcAtMCr4eEuVMRJhFtpsrKb"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email5@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email6@gmail.com"], ["password_digest", "$2a$04$aTjIT5gAEJ2jcCEdKnVsB.eSd/lWqf2XlYP/ahEmQs.BqZe979Y6G"], ["created_at", "2021-02-09 09:38:12.390465"], ["updated_at", "2021-02-09 09:38:12.390465"], ["referral_code", "tzim9CoqnoVhuxu3nvYjXtak"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email6@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$a9ADphC9kmQqlAHnvQE5o.8LKTGLV31HziKpYldgFiBxHlm4pnRMm"], ["created_at", "2021-02-09 09:38:12.406358"], ["updated_at", "2021-02-09 09:38:12.406358"], ["referral_code", "yfJotUb7jkFoFJwXzKPbomxv"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 877], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email7@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email7@gmail.com"], ["password_digest", "$2a$04$jSdHH.IwjlOvmrIg5x.cEO4IVruN/WfTFRGOoD6Pzr6O0rayaFaL6"], ["created_at", "2021-02-09 09:38:12.413665"], ["updated_at", "2021-02-09 09:38:12.413665"], ["referral_code", "bfT2TahJ8cfB6s5SpHViai6p"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$SO.20LoX23G8bJ5EWrHbNObwGCwS5A1bX1vqOjkLwXUUaUDjd4AKq"], ["created_at", "2021-02-09 09:38:12.420661"], ["updated_at", "2021-02-09 09:38:12.420661"], ["referral_code", "gJydEHUGwHWVJuisZg7WAMws"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 879], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email8@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email8@gmail.com"], ["password_digest", "$2a$04$Mv.J96VwuqQgVe9IWeSoC.UeQHw1O1QVMhdPp1OQJ0JUc6LdCyoDe"], ["created_at", "2021-02-09 09:38:12.436120"], ["updated_at", "2021-02-09 09:38:12.436120"], ["referral_code", "7WxJtw1JRREdCAkAgh1w4gq8"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@gmail.com"], ["password_digest", "$2a$04$Xx.EYQrxoj/sdlzkEI19teovo5MtjorbwfzZn9VC20A.u1uZO5sXm"], ["created_at", "2021-02-09 09:38:12.442658"], ["updated_at", "2021-02-09 09:38:12.442658"], ["referral_code", "EnGwrKzz1g9igV2T64gevYU2"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 881], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "7WxJtw1JRREdCAkAgh1w4gq8"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email@gmail.com"], ["id", 881], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:38:12.447602"], ["referrer_id", 880], ["id", 881]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", ""], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email9@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email9@gmail.com"], ["password_digest", "$2a$04$ngg.PEKEm2UGM30/3RVFueWjMmYnp1V0uGkhW9ZyXSjg4NbublhC6"], ["created_at", "2021-02-09 09:38:12.473029"], ["updated_at", "2021-02-09 09:38:12.473029"], ["referral_code", "MECb5QzzfdSGoKbBD1SnnCzS"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email10@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email10@gmail.com"], ["password_digest", "$2a$04$kaL3Ulz5lwk6NJ.IuItpw.59bul/ozDrXfn3c0.8xQ6guzL6OQ94e"], ["created_at", "2021-02-09 09:38:12.476985"], ["updated_at", "2021-02-09 09:38:12.476985"], ["referral_code", "8tx7j8hf82oYffBVcsvQq4kb"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email9@gmail.com"], ["id", 882], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:38:12.480130"], ["referrer_id", 883], ["id", 882]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 882], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 883], ["LIMIT", 1]]
  [1m[36mUser Update All (1.2ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 882]]
  [1m[36mUser Update All (0.9ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 883]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 882], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email11@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email11@gmail.com"], ["password_digest", "$2a$04$.7pIp3aWhoibmE2PzdeefOa4gjdFlK6KUa7FE9NpLDfK9Q72qlXpq"], ["created_at", "2021-02-09 09:38:12.502329"], ["updated_at", "2021-02-09 09:38:12.502329"], ["referral_code", "pv5N4iiKkreVDkifpkaZZHdQ"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email12@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email12@gmail.com"], ["password_digest", "$2a$04$yinUSNLnpie182n8TGOwEuNfkBO5Wyz0n6zxzAkmXfAQ0YM/yvKZi"], ["created_at", "2021-02-09 09:38:12.506550"], ["updated_at", "2021-02-09 09:38:12.506550"], ["referral_code", "QQT1AtSLpwGyKFrJgFZ6grpQ"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email11@gmail.com"], ["id", 884], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:38:12.509440"], ["referrer_id", 885], ["id", 884]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 885], ["LIMIT", 1]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 884]]
  [1m[36mUser Update All (0.8ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 885]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 885], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email13@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email13@gmail.com"], ["password_digest", "$2a$04$5lOV676lkXZ5KKOY01UcTe48PTpTvN8XqjGa30f/C9ZTTS3SrJWmq"], ["created_at", "2021-02-09 09:38:12.523657"], ["updated_at", "2021-02-09 09:38:12.523657"], ["referral_code", "dk2r7G1RXeNProamymqk15g2"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email14@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email14@gmail.com"], ["password_digest", "$2a$04$XKSelWT8zOTFX2xS4PzQMuWccHjDdx4bJzYM7I7CLyCR7WXCIBKOy"], ["created_at", "2021-02-09 09:38:12.531382"], ["updated_at", "2021-02-09 09:38:12.531382"], ["referral_code", "La2SYkLqpifCbcjBtmM5TzAp"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email13@gmail.com"], ["id", 886], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:38:12.536462"], ["referrer_id", 887], ["id", 886]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email14@gmail.com"], ["id", 887], ["LIMIT", 1]]
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:38:12.539023"], ["referral_points", 5], ["id", 887]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 887], ["LIMIT", 1]]
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 886]]
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 887]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 887]]
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 887]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 887], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email15@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email15@gmail.com"], ["password_digest", "$2a$04$myOswVYSnO4NNj0AGz292ur5GeZ09yOEnrfE66a0Hi7hVxpFK2rWK"], ["created_at", "2021-02-09 09:38:12.551465"], ["updated_at", "2021-02-09 09:38:12.551465"], ["referral_code", "9LFj57rj7nY8ydXct7pQ9Rmn"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email16@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email16@gmail.com"], ["password_digest", "$2a$04$CqLBUOa8pndEttysHAEfw.gMGx6nocRqlO7ibyyyckb5BuIvJ08WC"], ["created_at", "2021-02-09 09:38:12.559317"], ["updated_at", "2021-02-09 09:38:12.559317"], ["referral_code", "a5ZXokG41kfrK1SjSJNHvNX8"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email15@gmail.com"], ["id", 888], ["LIMIT", 1]]
  [1m[36mUser Update (1.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:38:12.565438"], ["referrer_id", 889], ["id", 888]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email16@gmail.com"], ["id", 889], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referral_points" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:38:12.570481"], ["referral_points", 5], ["id", 889]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 889], ["LIMIT", 1]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 888]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 889]]
  [1m[36mUser Update All (0.4ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 889]]
  [1m[36mUser Update All (0.5ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) - 5 WHERE "users"."id" = $1[0m  [["id", 889]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 889], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email17@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email17@gmail.com"], ["password_digest", "$2a$04$36K6fb6AJEHIq67RwOgDBedHZ3uIpzRLvM.EmAM1L/1F3xT3jjqtS"], ["created_at", "2021-02-09 09:38:12.582959"], ["updated_at", "2021-02-09 09:38:12.582959"], ["referral_code", "2dPxubsjHs5tJiF1E11Htkxo"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email18@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email18@gmail.com"], ["password_digest", "$2a$04$TBthor5GUcnbo/6j14Z/AuMjvH0l6/EjJfhgNKPv9plMVoSMkvNx6"], ["created_at", "2021-02-09 09:38:12.609609"], ["updated_at", "2021-02-09 09:38:12.609609"], ["referral_code", "94NVb5o18tDwLTzzUf9GWjHE"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "email17@gmail.com"], ["id", 890], ["LIMIT", 1]]
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:38:12.613222"], ["referrer_id", 891], ["id", 890]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 891], ["LIMIT", 1]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "credits" = COALESCE("credits", 0) + 10 WHERE "users"."id" = $1[0m  [["id", 890]]
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "referral_points" = COALESCE("referral_points", 0) + 1 WHERE "users"."id" = $1[0m  [["id", 891]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 891], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email19@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email19@gmail.com"], ["password_digest", "$2a$04$zk5VfkeaCTwt./ohwR2KQeAw9JBCvQX6WkthhuWM7D9cTziC04ihi"], ["created_at", "2021-02-09 09:38:12.627155"], ["updated_at", "2021-02-09 09:38:12.627155"], ["referral_code", "k3WpwDNc35RkexcY9AMPsp78"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 12:38:12 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$oGrQdkX2T/5kkYLT1dqww.qpA7oe58JiFsfBl7boVJRnq0yMyQJkW"], ["created_at", "2021-02-09 09:38:12.642494"], ["updated_at", "2021-02-09 09:38:12.642494"], ["referral_code", "EN9r78oF1dH5Mh1Mt7YBwQNM"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 893], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 893], ["LIMIT", 1]]
Completed 201 Created in 7ms (Views: 0.3ms | ActiveRecord: 1.7ms)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 12:38:12 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]"}
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$b9mJWGcrr/xqedsnlTqw.uzMbQGC9.QxZjqsLl8H8A9yGCpgQAD46"], ["created_at", "2021-02-09 09:38:12.659048"], ["updated_at", "2021-02-09 09:38:12.659048"], ["referral_code", "jMo44rgUsK6nqTu4Bc5nT3dU"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 894], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 894], ["LIMIT", 1]]
Completed 201 Created in 16ms (Views: 0.8ms | ActiveRecord: 3.9ms)
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email20@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email20@gmail.com"], ["password_digest", "$2a$04$hVTKD1DRvjXoVBiYiUKvCeX9zXqXDQQLNCdt3INV9UyZHoeuwnsSa"], ["created_at", "2021-02-09 09:38:12.674711"], ["updated_at", "2021-02-09 09:38:12.674711"], ["referral_code", "Bf4K2cDNdqVz372GnjLEwPax"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 12:38:12 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"test@email.com", "password"=>"[FILTERED]", "referred_by"=>"Bf4K2cDNdqVz372GnjLEwPax"}
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "test@email.com"], ["password_digest", "$2a$04$FdlnF7Q2JMJMqgrDbrwMGuKKVxeTgr4e3SmZiL7K4SZi4vTcZOG86"], ["created_at", "2021-02-09 09:38:12.691960"], ["updated_at", "2021-02-09 09:38:12.691960"], ["referral_code", "KLVqQ4FMqZSotEvveqwXYbKm"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 896], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."referral_code" = $1 LIMIT $2[0m  [["referral_code", "Bf4K2cDNdqVz372GnjLEwPax"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 896], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "referrer_id" = $2 WHERE "users"."id" = $3[0m  [["updated_at", "2021-02-09 09:38:12.701651"], ["referrer_id", 895], ["id", 896]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "test@email.com"], ["id", 896], ["LIMIT", 1]]
Completed 201 Created in 18ms (Views: 0.3ms | ActiveRecord: 6.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email21@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email21@gmail.com"], ["password_digest", "$2a$04$qNfHC4NoWFi3yL7u38QnPOgT8F4tw97uBKenBcXNsnxdUlXpWYWDu"], ["created_at", "2021-02-09 09:38:12.709832"], ["updated_at", "2021-02-09 09:38:12.709832"], ["referral_code", "x91gV6G2dULJDV4qByQKiirH"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 12:38:12 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email21@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email21@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email21@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email21@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 10ms (Views: 0.6ms | ActiveRecord: 2.1ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email22@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email22@gmail.com"], ["password_digest", "$2a$04$Gbor9NThkzDXtgxC/RMaquH1ZZMwp7gbGveqdL0JpW1EmBOgKpUpO"], ["created_at", "2021-02-09 09:38:12.733765"], ["updated_at", "2021-02-09 09:38:12.733765"], ["referral_code", "a5zfDuYXN3ivvHkA2Fy2Vu4E"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 12:38:12 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email22@gmail.com", "password"=>"[FILTERED]"}
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email22@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email22@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email22@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 7ms (Views: 0.2ms | ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email23@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email23@gmail.com"], ["password_digest", "$2a$04$YCqlxwS4fWwYgarIy2sza.n9KDpUptw0vmPHMbyInauq.n7pcJBrC"], ["created_at", "2021-02-09 09:38:12.749407"], ["updated_at", "2021-02-09 09:38:12.749407"], ["referral_code", "vMt1gE9YrWxR1iTFGgAVQb4m"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email24@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email24@gmail.com"], ["password_digest", "$2a$04$pyPXGPE/oDI9z38yqT3EOu5uzWbBlvgz5XDTqmUQfcuCZJ1hwwhYW"], ["created_at", "2021-02-09 09:38:12.754209"], ["updated_at", "2021-02-09 09:38:12.754209"], ["referral_code", "7AXtd4Mq3kxcaBt4r2ZzEesk"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_up" for 127.0.0.1 at 2021-02-09 12:38:12 +0300
Processing by UsersController#create as HTML
  Parameters: {"email"=>"email23@gmail.com", "password"=>"[FILTERED]", "referred_by"=>"7AXtd4Mq3kxcaBt4r2ZzEesk"}
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email23@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email23@gmail.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists (0.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email23@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 9ms (Views: 0.2ms | ActiveRecord: 1.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email25@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email25@gmail.com"], ["password_digest", "$2a$04$aY93oymLwioVr6.jaxYS3OrlI4/WfQ./q.cTeqWYbEFo3mIbeXh56"], ["created_at", "2021-02-09 09:38:12.774949"], ["updated_at", "2021-02-09 09:38:12.774949"], ["referral_code", "WtYMEGzwz8MXLjJPFaxfw7tB"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 12:38:12 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email25@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email25@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.4ms)
Started GET "/users" for 127.0.0.1 at 2021-02-09 12:38:12 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 901], ["LIMIT", 1]]
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email26@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "referral_code") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email26@gmail.com"], ["password_digest", "$2a$04$2kgaJTl60mEMDYGRVRf48OgpKkulTL4hWu7.JPqFXy96IBinDe75y"], ["created_at", "2021-02-09 09:38:12.791254"], ["updated_at", "2021-02-09 09:38:12.791254"], ["referral_code", "wEGpu66VLiF3txckDdMHR2tH"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2021-02-09 12:38:12 +0300
Processing by SessionsController#create as HTML
  Parameters: {"email"=>"email26@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "email26@gmail.com"], ["LIMIT", 1]]
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.6ms)
Started GET "/users" for 127.0.0.1 at 2021-02-09 12:38:12 +0300
Processing by UsersController#index as 
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 902], ["LIMIT", 1]]
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/users" for 127.0.0.1 at 2021-02-09 12:38:12 +0300
Processing by UsersController#index as HTML
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
